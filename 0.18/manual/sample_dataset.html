<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>The sample data set &#8212; MNE 0.18.2 documentation</title>
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/gallery.css" />
    <link rel="stylesheet" type="text/css" href="../_static/bootstrap_divs.css" />
    <link rel="stylesheet" href="../_static/reset-syntax.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <script type="text/javascript" src="../_static/bootstrap_divs.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />

    <script type="text/javascript" src="../_static/copybutton.js"></script>


    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-37225609-1']);
    _gaq.push(['_trackPageview']);

    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
    </script>


    <link rel="stylesheet" href="../_static/style.css " type="text/css" />
    <link rel="stylesheet" href="../_static/font-awesome.css" type="text/css" />
    <link rel="stylesheet" href="../_static/flag-icon.css" type="text/css" />



    <script type="text/javascript">
    !function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);
    js.id=id;js.src="https://platform.twitter.com/widgets.js";
    fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");
    </script>



    <script type="text/javascript">
    (function() {
    var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
    po.src = 'https://apis.google.com/js/plusone.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
    })();
    </script>



<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js "></script>
<script type="text/javascript" src="../_static/js/jquery-fix.js "></script>
<script type="text/javascript" src="../_static/bootstrap-3.3.7/js/bootstrap.min.js "></script>
<script type="text/javascript" src="../_static/bootstrap-sphinx.js "></script>



  </head><body>





  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../index.html"><span><img src="../_static/mne_logo_small.png"></span>
           </a>
        <span class="navbar-text navbar-version pull-left"><b>0.18.2</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
                <li><a href="../getting_started.html">Install</a></li>
                <li><a href="../documentation.html">Documentation</a></li>
                <li><a href="../python_reference.html">API</a></li>
                <li><a href="../glossary.html">Glossary</a></li>
                <li><a href="../auto_examples/index.html">Examples</a></li>
                <li><a href="../contributing.html">Contribute</a></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"></ul>
</li>
              
            
            
            
            
            
              <li class="hidden-sm"></li>
            
          </ul>

          
<div class="navbar-form navbar-right navbar-btn dropdown btn-group-sm" style="margin-left: 20px; margin-top: 5px; margin-bottom: 5px">
  <button type="button" class="btn btn-primary navbar-btn dropdown-toggle" id="dropdownMenu1" data-toggle="dropdown">
    v0.18.2
    <span class="caret"></span>
  </button>
  <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
    <li><a href="https://mne-tools.github.io/dev/index.html">Development</a></li>
    <li><a href="https://mne-tools.github.io/stable/index.html">v0.18 (stable)</a></li>
    <li><a href="https://mne-tools.github.io/0.17/index.html">v0.17</a></li>
    <li><a href="https://mne-tools.github.io/0.16/index.html">v0.16</a></li>
    <li><a href="https://mne-tools.github.io/0.15/index.html">v0.15</a></li>
    <li><a href="https://mne-tools.github.io/0.14/index.html">v0.14</a></li>
    <li><a href="https://mne-tools.github.io/0.13/index.html">v0.13</a></li>
    <li><a href="https://mne-tools.github.io/0.12/index.html">v0.12</a></li>
    <li><a href="https://mne-tools.github.io/0.11/index.html">v0.11</a></li>
  </ul>
</div>


            
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          

        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/mne_logo_small.png" alt="Logo"/>
            </a></p><ul>
<li><a class="reference internal" href="#">The sample data set</a><ul>
<li><a class="reference internal" href="#purpose">Purpose</a></li>
<li><a class="reference internal" href="#overview">Overview</a></li>
<li><a class="reference internal" href="#setting-up">Setting up</a></li>
<li><a class="reference internal" href="#contents-of-the-data-set">Contents of the data set</a></li>
<li><a class="reference internal" href="#setting-up-subject-specific-data">Setting up subject-specific data</a><ul>
<li><a class="reference internal" href="#structural-mris">Structural MRIs</a></li>
<li><a class="reference internal" href="#source-space">Source space</a></li>
<li><a class="reference internal" href="#boundary-element-models">Boundary-element models</a></li>
</ul>
</li>
<li><a class="reference internal" href="#setting-up-a-custom-eeg-layout">Setting up a custom EEG layout</a></li>
<li><a class="reference internal" href="#previewing-the-data">Previewing the data</a></li>
<li><a class="reference internal" href="#off-line-averaging">Off-line averaging</a><ul>
<li><a class="reference internal" href="#using-the-averaging-script-interactively">Using the averaging script interactively</a></li>
<li><a class="reference internal" href="#using-the-averaging-script-in-batch-mode">Using the averaging script in batch mode</a></li>
</ul>
</li>
<li><a class="reference internal" href="#viewing-the-off-line-average">Viewing the off-line average</a><ul>
<li><a class="reference internal" href="#loading-the-averages">Loading the averages</a></li>
<li><a class="reference internal" href="#inspecting-the-auditory-data">Inspecting the auditory data</a></li>
<li><a class="reference internal" href="#inspecting-the-visual-data">Inspecting the visual data</a></li>
</ul>
</li>
<li><a class="reference internal" href="#computing-the-noise-covariance-matrix">Computing the noise-covariance matrix</a></li>
<li><a class="reference internal" href="#meg-mri-coordinate-system-alignment">MEG-MRI coordinate system alignment</a><ul>
<li><a class="reference internal" href="#initial-alignment">Initial alignment</a></li>
<li><a class="reference internal" href="#refining-the-coordinate-transformation">Refining the coordinate transformation</a></li>
<li><a class="reference internal" href="#saving-the-transformation">Saving the transformation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#the-forward-solution">The forward solution</a></li>
<li><a class="reference internal" href="#the-inverse-operator-decomposition">The inverse operator decomposition</a></li>
<li><a class="reference internal" href="#interactive-analysis">Interactive analysis</a><ul>
<li><a class="reference internal" href="#getting-started">Getting started</a></li>
<li><a class="reference internal" href="#load-surfaces">Load surfaces</a></li>
<li><a class="reference internal" href="#load-the-data">Load the data</a></li>
<li><a class="reference internal" href="#show-field-and-potential-maps">Show field and potential maps</a></li>
<li><a class="reference internal" href="#show-current-estimates">Show current estimates</a></li>
<li><a class="reference internal" href="#labels-and-timecourses">Labels and timecourses</a></li>
<li><a class="reference internal" href="#morphing">Morphing</a></li>
</ul>
</li>
</ul>
</li>
</ul>

<form action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
        </div>
      </div>
    <div class="body col-md-12 content" role="main">
      
  <div class="section" id="the-sample-data-set">
<span id="ch-sample-data"></span><h1>The sample data set<a class="headerlink" href="#the-sample-data-set" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#purpose" id="id5">Purpose</a></p></li>
<li><p><a class="reference internal" href="#overview" id="id6">Overview</a></p></li>
<li><p><a class="reference internal" href="#setting-up" id="id7">Setting up</a></p></li>
<li><p><a class="reference internal" href="#contents-of-the-data-set" id="id8">Contents of the data set</a></p></li>
<li><p><a class="reference internal" href="#setting-up-subject-specific-data" id="id9">Setting up subject-specific data</a></p>
<ul>
<li><p><a class="reference internal" href="#structural-mris" id="id10">Structural MRIs</a></p></li>
<li><p><a class="reference internal" href="#source-space" id="id11">Source space</a></p></li>
<li><p><a class="reference internal" href="#boundary-element-models" id="id12">Boundary-element models</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#setting-up-a-custom-eeg-layout" id="id13">Setting up a custom EEG layout</a></p></li>
<li><p><a class="reference internal" href="#previewing-the-data" id="id14">Previewing the data</a></p></li>
<li><p><a class="reference internal" href="#off-line-averaging" id="id15">Off-line averaging</a></p>
<ul>
<li><p><a class="reference internal" href="#using-the-averaging-script-interactively" id="id16">Using the averaging script interactively</a></p></li>
<li><p><a class="reference internal" href="#using-the-averaging-script-in-batch-mode" id="id17">Using the averaging script in batch mode</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#viewing-the-off-line-average" id="id18">Viewing the off-line average</a></p>
<ul>
<li><p><a class="reference internal" href="#loading-the-averages" id="id19">Loading the averages</a></p></li>
<li><p><a class="reference internal" href="#inspecting-the-auditory-data" id="id20">Inspecting the auditory data</a></p></li>
<li><p><a class="reference internal" href="#inspecting-the-visual-data" id="id21">Inspecting the visual data</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#computing-the-noise-covariance-matrix" id="id22">Computing the noise-covariance matrix</a></p></li>
<li><p><a class="reference internal" href="#meg-mri-coordinate-system-alignment" id="id23">MEG-MRI coordinate system alignment</a></p>
<ul>
<li><p><a class="reference internal" href="#initial-alignment" id="id24">Initial alignment</a></p></li>
<li><p><a class="reference internal" href="#refining-the-coordinate-transformation" id="id25">Refining the coordinate transformation</a></p></li>
<li><p><a class="reference internal" href="#saving-the-transformation" id="id26">Saving the transformation</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#the-forward-solution" id="id27">The forward solution</a></p></li>
<li><p><a class="reference internal" href="#the-inverse-operator-decomposition" id="id28">The inverse operator decomposition</a></p></li>
<li><p><a class="reference internal" href="#interactive-analysis" id="id29">Interactive analysis</a></p>
<ul>
<li><p><a class="reference internal" href="#getting-started" id="id30">Getting started</a></p></li>
<li><p><a class="reference internal" href="#load-surfaces" id="id31">Load surfaces</a></p></li>
<li><p><a class="reference internal" href="#load-the-data" id="id32">Load the data</a></p></li>
<li><p><a class="reference internal" href="#show-field-and-potential-maps" id="id33">Show field and potential maps</a></p></li>
<li><p><a class="reference internal" href="#show-current-estimates" id="id34">Show current estimates</a></p></li>
<li><p><a class="reference internal" href="#labels-and-timecourses" id="id35">Labels and timecourses</a></p></li>
<li><p><a class="reference internal" href="#morphing" id="id36">Morphing</a></p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="purpose">
<h2><a class="toc-backref" href="#id5">Purpose</a><a class="headerlink" href="#purpose" title="Permalink to this headline">¶</a></h2>
<p>This Chapter gives a detailed description of the processing
of a sample data set, which can be employed to familiarize with
the workflow described in <a class="reference internal" href="cookbook.html#cookbook"><span class="std std-ref">The typical M/EEG workflow</span></a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Going through the analysis exercise in    this chapter is not a substitute for reading other chapters of this    manual and understanding the concepts underlying MNE software.</p>
</div>
</div>
<div class="section" id="overview">
<span id="sample-data-overview"></span><h2><a class="toc-backref" href="#id6">Overview</a><a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>The MNE software is accompanied by a sample data set which
includes the MRI reconstructions created with FreeSurfer and the
an MEG/EEG data set. These data were acquired with the Neuromag
Vectorview system at MGH/HMS/MIT Athinoula A. Martinos Center Biomedical
Imaging. EEG data from a 60-channel electrode cap was acquired simultaneously with
the MEG. The original MRI data set was acquired with a Siemens 1.5 T
Sonata scanner using an MPRAGE sequence.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>These data are provided solely for the purpose of getting familiar
with the MNE software. They should not be redistributed to third
parties. The data should not be used to evaluate the performance
of the MEG or MRI system employed.</p>
</div>
<p>In the MEG/EEG experiment, checkerboard patterns were presented
into the left and right visual field, interspersed by tones to the
left or right ear. The interval between the stimuli was 750 ms. Occasionally
a smiley face was presented at the center of the visual field.
The subject was asked to press a key with the right index finger
as soon as possible after the appearance of the face. A listing
of the corresponding trigger codes is provided in <a class="reference internal" href="#babdhifj"><span class="std std-ref">Trigger codes for the sample data set.</span></a></p>
<span id="babdhifj"></span><table class="docutils align-default" id="id1">
<caption><span class="caption-text">Trigger codes for the sample data set.</span><a class="headerlink" href="#id1" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 16%" />
<col style="width: 9%" />
<col style="width: 75%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"></th>
<th class="head"><p>#Contents</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>LA</p></td>
<td><p>1</p></td>
<td><p>Response to left-ear auditory stimulus</p></td>
</tr>
<tr class="row-odd"><td><p>RA</p></td>
<td><p>2</p></td>
<td><p>Response to right-ear auditory stimulus</p></td>
</tr>
<tr class="row-even"><td><p>LV</p></td>
<td><p>3</p></td>
<td><p>Response to left visual field stimulus</p></td>
</tr>
<tr class="row-odd"><td><p>RV</p></td>
<td><p>4</p></td>
<td><p>Response to right visual field stimulus</p></td>
</tr>
<tr class="row-even"><td><p>smiley</p></td>
<td><p>5</p></td>
<td><p>Response to the smiley face</p></td>
</tr>
<tr class="row-odd"><td><p>button</p></td>
<td><p>32</p></td>
<td><p>Response triggered by the button press</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="setting-up">
<h2><a class="toc-backref" href="#id7">Setting up</a><a class="headerlink" href="#setting-up" title="Permalink to this headline">¶</a></h2>
<p>The sample dataset can be downloaded automatically by doing:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">mne</span><span class="o">.</span><span class="n">datasets</span><span class="o">.</span><span class="n">sample</span><span class="o">.</span><span class="n">data_path</span><span class="p">(</span><span class="n">verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>  
</pre></div>
</div>
</div>
<div class="section" id="contents-of-the-data-set">
<h2><a class="toc-backref" href="#id8">Contents of the data set</a><a class="headerlink" href="#contents-of-the-data-set" title="Permalink to this headline">¶</a></h2>
<p>The sample data set contains two main directories: <code class="docutils literal notranslate"><span class="pre">MEG/sample</span></code> (the MEG/EEG
data) and <code class="docutils literal notranslate"><span class="pre">subjects/sample</span></code> (the MRI reconstructions).
An overview of the data provided is given in Tables <a class="reference internal" href="#chdddihe"><span class="std std-ref">Contents of the MEG/sample directory.</span></a> and <a class="reference internal" href="#chddeggc"><span class="std std-ref">Overview of the contents of the subjects/sample directory.</span></a>. In addition to
subject sample , the MRI surface
reconstructions from another subject, morph ,
are provided to demonstrate the morphing capabilities of the MNE software.</p>
<span id="chdddihe"></span><table class="docutils align-default" id="id2">
<caption><span class="caption-text">Contents of the MEG/sample directory.</span><a class="headerlink" href="#id2" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 26%" />
<col style="width: 74%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>File</p></th>
<th class="head"><p>Contents</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>sample/audvis_raw.fif</p></td>
<td><p>The raw MEG/EEG data</p></td>
</tr>
<tr class="row-odd"><td><p>audvis.ave</p></td>
<td><p>A template script for off-line averaging</p></td>
</tr>
<tr class="row-even"><td><p>auvis.cov</p></td>
<td><p>A template script for the computation of a noise-covariance matrix</p></td>
</tr>
</tbody>
</table>
<span id="chddeggc"></span><table class="docutils align-default" id="id3">
<caption><span class="caption-text">Overview of the contents of the subjects/sample directory.</span><a class="headerlink" href="#id3" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 25%" />
<col style="width: 75%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>File / directory</p></th>
<th class="head"><p>Contents</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>bem</p></td>
<td><p>Directory for the forward modelling data</p></td>
</tr>
<tr class="row-odd"><td><p>bem/watershed</p></td>
<td><p>BEM surface segmentation data computed with the watershed algorithm</p></td>
</tr>
<tr class="row-even"><td><p>bem/inner_skull.surf</p></td>
<td><p>Inner skull surface for BEM</p></td>
</tr>
<tr class="row-odd"><td><p>bem/outer_skull.surf</p></td>
<td><p>Outer skull surface for BEM</p></td>
</tr>
<tr class="row-even"><td><p>bem/outer_skin.surf</p></td>
<td><p>Skin surface for BEM</p></td>
</tr>
<tr class="row-odd"><td><p>sample-head.fif</p></td>
<td><p>Skin surface in fif format for mne_analyze visualizations</p></td>
</tr>
<tr class="row-even"><td><p>surf</p></td>
<td><p>Surface reconstructions</p></td>
</tr>
<tr class="row-odd"><td><p>mri/T1</p></td>
<td><p>The T1-weighted MRI data employed in visualizations</p></td>
</tr>
</tbody>
</table>
<p>The following preprocessing steps have been already accomplished
in the sample data set:</p>
<ul class="simple">
<li><p>The MRI surface reconstructions have
been computed using the FreeSurfer software.</p></li>
<li><p>The BEM surfaces have been created with the watershed algorithm,
see <a class="reference internal" href="appendix/bem_model.html#babbdhag"><span class="std std-ref">Using the watershed algorithm</span></a>.</p></li>
<li><p>The MEG/EEG raw data file has been checked with the utilities described
in <a class="reference internal" href="appendix/c_misc.html#babcdbdi"><span class="std std-ref">Cleaning the digital trigger channel</span></a> and <a class="reference internal" href="appendix/c_misc.html#babcdfjh"><span class="std std-ref">Fixing channel information</span></a>.</p></li>
</ul>
</div>
<div class="section" id="setting-up-subject-specific-data">
<h2><a class="toc-backref" href="#id9">Setting up subject-specific data</a><a class="headerlink" href="#setting-up-subject-specific-data" title="Permalink to this headline">¶</a></h2>
<div class="section" id="structural-mris">
<span id="chdbbaej"></span><h3><a class="toc-backref" href="#id10">Structural MRIs</a><a class="headerlink" href="#structural-mris" title="Permalink to this headline">¶</a></h3>
<p>To set up the structural MRIs for processing with the Neuromag
MRI viewer, MRIlab, say</p>
<p><code class="docutils literal notranslate"><span class="pre">mne_setup_mri</span></code></p>
<p>This command sets up the directories <code class="docutils literal notranslate"><span class="pre">subjects/sample/mri/T1-neuromag</span></code> and <code class="docutils literal notranslate"><span class="pre">subjects/sample/mri/brain-neuromag</span></code> .
For more information, see <a class="reference internal" href="appendix/c_misc.html#babccehf"><span class="std std-ref">Setting up anatomical MR images for MRIlab</span></a>.</p>
</div>
<div class="section" id="source-space">
<span id="chdigejg"></span><h3><a class="toc-backref" href="#id11">Source space</a><a class="headerlink" href="#source-space" title="Permalink to this headline">¶</a></h3>
<p>The source space with a 5-mm grid spacing is set up by saying:</p>
<p><code class="docutils literal notranslate"><span class="pre">mne_setup_source_space</span> <span class="pre">--ico</span> <span class="pre">-6</span></code></p>
<p>This command sets up the source-space related files in directory <code class="docutils literal notranslate"><span class="pre">subjects/sample/bem</span></code> as
described in <a class="reference internal" href="cookbook.html#setting-up-source-space"><span class="std std-ref">Setting up the source space</span></a>.</p>
</div>
<div class="section" id="boundary-element-models">
<span id="chdjdgbd"></span><h3><a class="toc-backref" href="#id12">Boundary-element models</a><a class="headerlink" href="#boundary-element-models" title="Permalink to this headline">¶</a></h3>
<p>The geometry calculations for the single-layer boundary-element
model are accomplished with the command:</p>
<p><code class="docutils literal notranslate"><span class="pre">mne_setup_forward_model</span> <span class="pre">--homog</span> <span class="pre">--surf</span> <span class="pre">--ico</span> <span class="pre">4</span></code></p>
<p>This command sets up the homogeneous BEM-model related files
in directory <code class="docutils literal notranslate"><span class="pre">subjects/sample/bem</span></code> as described in <a class="reference internal" href="cookbook.html#cihdbfeg"><span class="std std-ref">Setting up the boundary-element model</span></a>. In
addition to the homogeneous BEM, you also need the three-layer BEM model,
which can be used for both EEG and MEG:</p>
<p><code class="docutils literal notranslate"><span class="pre">mne_setup_forward_model</span> <span class="pre">--surf</span> <span class="pre">--ico</span> <span class="pre">4</span></code></p>
<p>The above commands employ the <code class="docutils literal notranslate"><span class="pre">inner_skull.surf</span></code> , <code class="docutils literal notranslate"><span class="pre">outer_skull.surf</span></code> ,
and <code class="docutils literal notranslate"><span class="pre">outer_skin.surf</span></code> triangulation files located in <code class="docutils literal notranslate"><span class="pre">subjects/sample/bem</span></code> .
The option <code class="docutils literal notranslate"><span class="pre">--ico</span> <span class="pre">4</span></code> will create a model with 5120 triangles
on each surface. Depending on the speed of your computer, the three-layer
model may take quite a while to set up.</p>
</div>
</div>
<div class="section" id="setting-up-a-custom-eeg-layout">
<h2><a class="toc-backref" href="#id13">Setting up a custom EEG layout</a><a class="headerlink" href="#setting-up-a-custom-eeg-layout" title="Permalink to this headline">¶</a></h2>
<p>A data specific EEG layout will facilitate viewing of the
EEG data. The MNE programs mne_browse_raw and mne_analyze look
for user-specific layouts in <code class="docutils literal notranslate"><span class="pre">$HOME/.mne/lout</span></code> . Thus,
you can create an EEG layout for the sample data set with the following
commands:</p>
<p><code class="docutils literal notranslate"><span class="pre">mkdir</span> <span class="pre">-p</span> <span class="pre">$HOME/.mne/lout</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">cd</span> <span class="pre">$SAMPLE/MEG/sample</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">mne_make_eeg_layout</span> <span class="pre">--fif</span> <span class="pre">sample_audvis_raw.fif</span> <span class="pre">--lout</span> <span class="pre">$HOME/.mne/lout/sample-EEG.lout</span></code></p>
<p>Please refer to <a class="reference internal" href="c_reference.html#mne-make-eeg-layout"><span class="std std-ref">mne_make_eeg_layout</span></a> for more information
on mne_make_eeg_layout .</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>It is usually sufficient to create one EEG layout    for each electrode cap you are using in your experiment rather than    using a different layout file for each data file generated using    the same cap.</p>
</div>
</div>
<div class="section" id="previewing-the-data">
<h2><a class="toc-backref" href="#id14">Previewing the data</a><a class="headerlink" href="#previewing-the-data" title="Permalink to this headline">¶</a></h2>
<p>Previewing your raw data before proceeding to averaging and
computation of the current estimates is most important to avoid
unintentional errors caused by noisy or dysfunctional channels,
frequent eye blinks, inappropriate bandpass filtering etc.</p>
<p>One possible routemap for the preview session is outlined
below:</p>
<ul class="simple">
<li><p>Go to the MEG/EEG data directory: <code class="docutils literal notranslate"><span class="pre">cd</span> <span class="pre">$SAMPLE/MEG/sample</span></code> .</p></li>
<li><p>Launch mne_browse_raw .</p></li>
<li><p>Open the raw data file <code class="docutils literal notranslate"><span class="pre">sample_audvis_raw.fif</span></code> from File/Open… .</p></li>
<li><p>Switch all SSP vectors off from Adjust/Projection… .</p></li>
<li><p>Set the lowpass filter corner to a high value, e.g., 150 Hz
from Adjust/Filter… .</p></li>
<li><p>Browse through all channels using the selections available
under Adjust/Selection… and
look for very noisy or flat channels. You should be able to readily
identify two such channels among all MEG and EEG channels. You may
need to click Remove DC to reliably
associate the noisy or flat waveform with the channel name on the
left. Also, experiment with switching the EEG average reference
projection on and off and you will notice that the EEG bad channel
cannot be seen after the projection.</p></li>
<li><p>Mark the channels you identified in step 6. bad for this viewing
session by clicking on their channel names on the left. You can
save the bad channel selection to the file from File/Apply bad channels . Bad channel marking can be removed
by clicking on their channel names again and selecting File/Apply bad channels . Alternatively, you can use the utility mne_mark_bad_channels to
set a bad channel selection, see <a class="reference internal" href="c_reference.html#mne-mark-bad-channels"><span class="std std-ref">mne_mark_bad_channels</span></a>.</p></li>
<li><p>Switch the projections back on and change filter to a 40-Hz
lowpass.</p></li>
<li><p>Compute a preliminary average for the left-ear auditory stimulus:</p>
<ul>
<li><p>Open the averaging preferences dialog
(Adjust/Averaging preferences… .</p></li>
<li><p>Set the time scale to -100…300 ms.</p></li>
<li><p>Click on the text next to Average: in
the main window and press return. After a while, a topographical
display appears with the averaged responses. Notice that the bad
channels are not displayed.</p></li>
<li><p>Change to different layouts from Adjust/Full view layout… . Inspect both the MEG and EEG waveforms.</p></li>
</ul>
</li>
<li><p>Compute a preliminary average for the right-ear auditory stimulus:</p>
<ul>
<li><p>Open the averaging preferences.</p></li>
<li><p>Click on the Trace color… button
and change the trace color to something different from the default
yellow.</p></li>
<li><p>Change the text next to Average: to
2 and press return. Average to the right-ear tones will be computed.
Compare the to sets of averages and verify that all channels show
reasonable data.</p></li>
</ul>
</li>
<li><p>Go to Windows/Manage averages… and
delete the preliminary averages just computed.</p></li>
</ul>
<p>After these steps, you are ready to proceed to the actual
analysis.</p>
</div>
<div class="section" id="off-line-averaging">
<h2><a class="toc-backref" href="#id15">Off-line averaging</a><a class="headerlink" href="#off-line-averaging" title="Permalink to this headline">¶</a></h2>
<p>Go to directory <code class="docutils literal notranslate"><span class="pre">$SAMPLE/MEG/sample</span></code> . With help
of <a class="reference internal" href="gui/browse.html#cacbbdgc"><span class="std std-ref">Description files for off-line averaging</span></a>, familiarize yourself with the averaging
script <code class="docutils literal notranslate"><span class="pre">audvis.ave</span></code> .</p>
<div class="section" id="using-the-averaging-script-interactively">
<h3><a class="toc-backref" href="#id16">Using the averaging script interactively</a><a class="headerlink" href="#using-the-averaging-script-interactively" title="Permalink to this headline">¶</a></h3>
<p>You can invoke an averaging script in mne_browse_raw from Process/Average… .
Select the <code class="docutils literal notranslate"><span class="pre">audvis.ave</span></code> script from the file selection
box that appears. Once averaging is complete, you can inspect the
details of the averaged responses in the Averages window,
which appears automatically. You can redisplay it from Windows/Show averages… . The window, which appears when you
select Adjust/Manage averages… allows
you to:</p>
<ul class="simple">
<li><p>Select which conditions (categories)
are displayed.</p></li>
<li><p>Change the trace colors.</p></li>
<li><p>Inspect the averaging log.</p></li>
<li><p>Save the averaged data.</p></li>
<li><p>Delete this set of averages.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you decide to save the averages in the interactive    mode, use the name <code class="docutils literal notranslate"><span class="pre">sample_audvis-ave.fif</span></code> for the result.</p>
</div>
</div>
<div class="section" id="using-the-averaging-script-in-batch-mode">
<h3><a class="toc-backref" href="#id17">Using the averaging script in batch mode</a><a class="headerlink" href="#using-the-averaging-script-in-batch-mode" title="Permalink to this headline">¶</a></h3>
<p>The batch-mode version of mne_browse_raw , mne_process_raw can
be used for averaging as well. Batch mode averaging can be done
with the command:</p>
<p><code class="docutils literal notranslate"><span class="pre">mne_process_raw</span> <span class="pre">--raw</span> <span class="pre">sample_audvis_raw.fif</span> <span class="pre">``</span> <span class="pre">``--lowpass</span> <span class="pre">40</span> <span class="pre">--projoff</span> <span class="pre">``</span> <span class="pre">``--saveavetag</span> <span class="pre">-ave</span> <span class="pre">--ave</span> <span class="pre">audvis.ave</span></code></p>
<p>See <a class="reference internal" href="c_reference.html#mne-process-raw"><span class="std std-ref">mne_process_raw</span></a> for command-line options.</p>
<p>As a result of running the averaging script a file called <code class="docutils literal notranslate"><span class="pre">sample_audvis-ave.fif</span></code> is
created. It contains averages to the left and right ear auditory
as well as to the left and right visual field stimuli.</p>
</div>
</div>
<div class="section" id="viewing-the-off-line-average">
<span id="chdhbggh"></span><h2><a class="toc-backref" href="#id18">Viewing the off-line average</a><a class="headerlink" href="#viewing-the-off-line-average" title="Permalink to this headline">¶</a></h2>
<p>The average file computed in the previous section can be
viewed in  mne_browse_raw .</p>
<p>To view the averaged signals, invoke mne_browse_raw :</p>
<p><code class="docutils literal notranslate"><span class="pre">cd</span> <span class="pre">$SAMPLE/MEG/sample</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">mne_browse_raw</span> <span class="pre">&amp;</span></code></p>
<p>This Section gives only very basic information about the
use of mne_browse_raw for viewing
evoked-response data. Please consult <a class="reference internal" href="gui/browse.html#ch-browse"><span class="std std-ref">Browsing raw data with mne_browse_raw</span></a> for more
comprehensive information.</p>
<div class="section" id="loading-the-averages">
<h3><a class="toc-backref" href="#id19">Loading the averages</a><a class="headerlink" href="#loading-the-averages" title="Permalink to this headline">¶</a></h3>
<p>mne_browse_raw loads all
the available data from an average file at once:</p>
<ul class="simple">
<li><p>Select Open evoked… from
the File menu.</p></li>
<li><p>Select the average file <code class="docutils literal notranslate"><span class="pre">sample_audvis-ave.fif</span></code> file
from the list and click OK .</p></li>
<li><p>A topographical display of the waveforms with gradiometer
channels included appears.</p></li>
</ul>
</div>
<div class="section" id="inspecting-the-auditory-data">
<h3><a class="toc-backref" href="#id20">Inspecting the auditory data</a><a class="headerlink" href="#inspecting-the-auditory-data" title="Permalink to this headline">¶</a></h3>
<p>Select the left and right ear auditory stimulus responses
for display:</p>
<ul class="simple">
<li><p>Select Manage averages… from
the Adjust menu.</p></li>
<li><p>Click off all other conditions except the auditory ones.</p></li>
</ul>
<p>Set the time scale and baseline:</p>
<ul class="simple">
<li><p>Select Scales… from
the Adjust menu.</p></li>
<li><p>Switch off Autoscale time range and
set the Average time range from -200
to 500 ms.</p></li>
<li><p>Switch on Use average display baseline and
set Average display baseline from
-200 to 0 ms.</p></li>
<li><p>Click OK .</p></li>
</ul>
<p>You can display a subset of responses from the topographical display
by holding the shift key down and dragging with the mouse, left
button down. When you drag on the response with just the left button
down, the signal timing, and channel name are displayed at the bottom. If
the left mouse button is down and you press shift down the time
is give both in absolute units and relative to the point where shift
was pressed down.</p>
<p>Observe the following:</p>
<ul class="simple">
<li><p>The main deflection occurs around 100 ms
over the left and right temporal areas.</p></li>
<li><p>The left-ear response (shown in yellow) is stronger on the
right than on the left. The opposite is true for the right-ear response,
shown in red.</p></li>
</ul>
</div>
<div class="section" id="inspecting-the-visual-data">
<h3><a class="toc-backref" href="#id21">Inspecting the visual data</a><a class="headerlink" href="#inspecting-the-visual-data" title="Permalink to this headline">¶</a></h3>
<p>Go back to the Manage averages… dialog
and switch all other conditions except the visual ones.</p>
<p>Observe the following:</p>
<ul class="simple">
<li><p>The left and right visual field responses
are quite different in spatial distribution in the occipital area.</p></li>
<li><p>There is a later response in the right parietal area, almost
identical to both visual stimuli.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you have the Neuromag software available,    the averaged data can be also viewed in the Neuromag data plotter    (xplotter ). See <a class="reference internal" href="appendix/martinos.html#babgfdjg"><span class="std std-ref">Using Neuromag software</span></a> for    instructions on how to use the Neuromag software at the MGH Martinos    Center.</p>
</div>
</div>
</div>
<div class="section" id="computing-the-noise-covariance-matrix">
<h2><a class="toc-backref" href="#id22">Computing the noise-covariance matrix</a><a class="headerlink" href="#computing-the-noise-covariance-matrix" title="Permalink to this headline">¶</a></h2>
<p>Another piece of information derived from the raw data file
is the estimate for the noise-covariance matrix, which can be computed
with the command:</p>
<p><code class="docutils literal notranslate"><span class="pre">mne_process_raw</span> <span class="pre">--raw</span> <span class="pre">sample_audvis_raw.fif</span> <span class="pre">--lowpass</span> <span class="pre">40</span> <span class="pre">--projon</span> <span class="pre">--savecovtag</span> <span class="pre">-cov</span> <span class="pre">--cov</span> <span class="pre">audvis.cov</span></code></p>
<p>Using the definitions in <code class="docutils literal notranslate"><span class="pre">audvis.cov</span></code> , this command
will create the noise-covariance matrix file <code class="docutils literal notranslate"><span class="pre">sample_audvis-cov.fif</span></code> .
In this case the projections are set on. The projection information
is then attached to the noise-covariance matrix and will be automatically
loaded when the inverse-operator decomposition is computed.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You can study the contents of the covariance    matrix computation description file <code class="docutils literal notranslate"><span class="pre">audvis.cov</span></code> with the help of <a class="reference internal" href="gui/browse.html#cacebacg"><span class="std std-ref">Description files for covariance matrix estimation</span></a>.</p>
</div>
</div>
<div class="section" id="meg-mri-coordinate-system-alignment">
<span id="chdijbig"></span><h2><a class="toc-backref" href="#id23">MEG-MRI coordinate system alignment</a><a class="headerlink" href="#meg-mri-coordinate-system-alignment" title="Permalink to this headline">¶</a></h2>
<p>The mne_analyze module
of the MNE is one option for the coordinate alignment. It uses a
triangulated scalp surface to facilitate the alignment.</p>
<div class="section" id="initial-alignment">
<span id="chdedcae"></span><h3><a class="toc-backref" href="#id24">Initial alignment</a><a class="headerlink" href="#initial-alignment" title="Permalink to this headline">¶</a></h3>
<p>Follow these steps to make an initial approximation for the
coordinate alignment.</p>
<ul class="simple">
<li><p>Go to directory <code class="docutils literal notranslate"><span class="pre">MEG/sample</span></code> .</p></li>
<li><p>Launch mne_analyze</p></li>
<li><p>Select File/Load digitizer data… and
load the digitizer data from <code class="docutils literal notranslate"><span class="pre">sample_audvis_raw.fif</span></code> .</p></li>
<li><p>Load an inflated surface for subject sample from File/Load surface…</p></li>
<li><p>Bring up the viewer window from View/Show viewer…</p></li>
<li><p>Click Options… in the
viewer window. Make the following selections:</p>
<ul>
<li><p>Switch left and right cortical surface
display off.</p></li>
<li><p>Make the scalp transparent.</p></li>
<li><p>Switch Digitizer data on.</p></li>
</ul>
</li>
<li><p>After a while, the digitizer points will be shown. The color
of the circles indicates whether the point is inside (blue) or outside
(red) of the scalp. The HPI coils are shown in green and the landmark
locations in light blue or light red color. The initial alignment
is way off!</p></li>
<li><p>Switch the Digitizer data off
to get the big circles out of the way.</p></li>
<li><p>Bring up the coordinate alignment window from Adjust/Coordinate alignment…</p></li>
<li><p>Click on the RAP (Right
Auricular Point) button. It turns red, indicating that you should
select the point from the viewer window. Click at the approximate
location of this point in the viewer. The button jumps up, turns
to normal color, and the MRI coordinates of the point appear in
the text fields next to the button.</p></li>
<li><p>Proceed similarly for the other two landmark points: Nasion
and LAP (Left Auricular Point).</p></li>
<li><p>Press Align using fiducials .
Notice that the coordinate transformation changes from a unit transformation
(no rotation, no origin translation) to a one determined by the
identified landmark locations. The rotation matrix (upper left 3
x 3 part of the transformation) should have positive values close
to one on the diagonal. Three is a significant rotation around the
x axis as indicated by elements (3,2) and (2,3) of the rotation
matrix. The <em>x</em> and <em>y</em> values
of the translation should be small and the <em>z</em> value
should be negative, around -50 mm. An example of an initial
coordinate transformation is shown in <a class="reference internal" href="#chdfihac"><span class="std std-ref">Example of an initial coordinate alignment.</span></a>.</p></li>
<li><p>Make the Digitizer data again
visible from the options of the viewer window. Note that the points
are now much closer to the scalp surface.</p></li>
</ul>
<div class="figure align-default" id="id4">
<span id="chdfihac"></span><img alt="Example of an initial coordinate alignment" src="../_images/Digitizer-example.png" />
<p class="caption"><span class="caption-text">Example of an initial coordinate alignment.</span><a class="headerlink" href="#id4" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="refining-the-coordinate-transformation">
<h3><a class="toc-backref" href="#id25">Refining the coordinate transformation</a><a class="headerlink" href="#refining-the-coordinate-transformation" title="Permalink to this headline">¶</a></h3>
<p>Before proceeding to the refinement procedure, it is useful
to remove outlier digitizer points. When you rotate the image in
the viewer window, you will notice that there is at least one such
point over the right cheek. To discard this point:</p>
<ul class="simple">
<li><p>Click on Discard in
the Adjust coordinate alignment window.</p></li>
<li><p>Enter 10 for the distance of the points to be discarded.</p></li>
<li><p>Click done. The outlier point disappears.</p></li>
</ul>
<p>The coordinate transformation can be adjusted manually with
the arrow buttons in the middle part of the Adjust coordinate alignment dialog. These buttons move
the digitizer points in the directions indicated by the amount listed
next to each of the buttons.</p>
<p>An automatic iterative procedure, Iterative Closest Point
(ICP) matching is also provided. At each iteration step</p>
<ul class="simple">
<li><p>For each digitizer point, transformed
from MEG to the MRI coordinate frame, the closest point on the triangulated
surface is determined.</p></li>
<li><p>The best coordinate transformation aligning the digitizer
points with the closest points on the head surface is computed.</p></li>
</ul>
<p>In step 2 of the iteration, the nasion is assigned five times
the weight of the other points since it can be assumed that the
nasion is the easiest point to identify reliably from the surface
image.</p>
<p>The ICP alignment can be invoked by entering the desired
number of iterations next to the ICP align button
followed by return or simply pressing the ICP align button.
The iteration will converge in 10 to 20 steps.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Use the ICP alignment option in mne_analyze with    caution. The iteration will not converge to a reasonable solution    unless and initial alignment is performed first according to <a class="reference internal" href="#chdedcae"><span class="std std-ref">Initial alignment</span></a>. Outlier points should be excluded as described    above. No attempt is made to compensate for the possible distance    of the digitized EEG electrode locations from the scalp.</p>
</div>
</div>
<div class="section" id="saving-the-transformation">
<h3><a class="toc-backref" href="#id26">Saving the transformation</a><a class="headerlink" href="#saving-the-transformation" title="Permalink to this headline">¶</a></h3>
<p>To create a MRI fif description file which incorporates the
coordinate transformation click Save MRI set in
the Adjust coordinate alignment dialog.
This will create the MRI set file in the <code class="docutils literal notranslate"><span class="pre">$SUBJECTS_DIR/sample/mri/T1-neuromag/sets</span></code> directory,
which was created by mne_setup_mri_data ,
see <a class="reference internal" href="#chdbbaej"><span class="std std-ref">Structural MRIs</span></a>. The file will be called</p>
<p><code class="docutils literal notranslate"><span class="pre">COR-</span></code> &lt;<em>username</em>&gt;- &lt;<em>date</em>&gt;- &lt;<em>time</em>&gt; .fif</p>
<p>where &lt;<em>username</em>&gt; is
your login name.</p>
<p>You can also save transformation to a fif file through the Save… button.
If the file does not exist, it will only contain the coordinate
transformation. If the file exists it will be inserted to the appropriate
context. An existing transformation will not be replaced unless Overwrite existing transform is checked in the save dialog.</p>
<p>Once you have saved the coordinate transformation, press Done and
quit mne_analyze (File/Quit ).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you dismiss the alignment dialog before    saving the transformation, it will be lost.</p>
</div>
</div>
</div>
<div class="section" id="the-forward-solution">
<h2><a class="toc-backref" href="#id27">The forward solution</a><a class="headerlink" href="#the-forward-solution" title="Permalink to this headline">¶</a></h2>
<p>To compute the forward solution, say:</p>
<p><code class="docutils literal notranslate"><span class="pre">cd</span> <span class="pre">$SAMPLE/MEG/sample</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">mne_do_forward_solution</span> <span class="pre">--mindist</span> <span class="pre">5</span> <span class="pre">--spacing</span> <span class="pre">oct-6</span> <span class="pre">--bem</span> <span class="pre">sample-5120-5120-5120</span> <span class="pre">--meas</span> <span class="pre">sample_audvis-ave.fif</span></code></p>
<p>This produces an EEG and MEG forward solution with source
space points closer than 5 mm to the inner skull surface omitted.
The source space created in <a class="reference internal" href="#chdigejg"><span class="std std-ref">Source space</span></a> will be employed.
As the output from this command will indicate The forward solution
will be stored in file <code class="docutils literal notranslate"><span class="pre">sample_audvis-ave-oct-6-fwd.fif</span></code> .</p>
<p>This command uses the three-layer BEM model <code class="docutils literal notranslate"><span class="pre">sample-5120-5120-5120-bem-sol.fif</span></code> created
in <a class="reference internal" href="#chdjdgbd"><span class="std std-ref">Boundary-element models</span></a>. If you want to use the single-compartment
BEM <code class="docutils literal notranslate"><span class="pre">sample-5120-bem-sol.fif</span></code> usable for MEG data only
say:</p>
<p><code class="docutils literal notranslate"><span class="pre">cd</span> <span class="pre">$SAMPLE/MEG/sample</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">mne_do_forward_solution</span> <span class="pre">--mindist</span> <span class="pre">5</span> <span class="pre">--spacing</span> <span class="pre">oct-6</span> <span class="pre">--meas</span> <span class="pre">sample_audvis-ave.fif</span> <span class="pre">--bem</span> <span class="pre">sample-5120</span> <span class="pre">--megonly</span></code></p>
</div>
<div class="section" id="the-inverse-operator-decomposition">
<h2><a class="toc-backref" href="#id28">The inverse operator decomposition</a><a class="headerlink" href="#the-inverse-operator-decomposition" title="Permalink to this headline">¶</a></h2>
<p>The inverse operator information, necessary for the computation
of the MNEs and dSPMs is accomplished by the command:</p>
<p><code class="docutils literal notranslate"><span class="pre">mne_do_inverse_operator</span> <span class="pre">--fwd</span> <span class="pre">sample_audvis-ave-oct-6-fwd.fif</span> <span class="pre">--depth</span> <span class="pre">--loose</span> <span class="pre">0.2</span> <span class="pre">--meg</span> <span class="pre">--eeg</span></code></p>
<p>This produces a depth-weighted inverse operator decomposition
with ‘loose’ orientation constraint applied. More
details on the convenience script mne_do_inverse_operator are
provided in <a class="reference internal" href="cookbook.html#cihcfjei"><span class="std std-ref">Calculating the inverse operator</span></a>.</p>
<p>The above command employs both EEG and MEG data. To create
separate solution for EEG and MEG, run the commands:</p>
<p><code class="docutils literal notranslate"><span class="pre">mne_do_inverse_operator</span> <span class="pre">--fwd</span> <span class="pre">sample_audvis-ave-oct-6-fwd.fif</span> <span class="pre">--depth</span> <span class="pre">--loose</span> <span class="pre">0.2</span> <span class="pre">--meg</span></code></p>
<p>and</p>
<p><code class="docutils literal notranslate"><span class="pre">mne_do_inverse_operator</span> <span class="pre">--fwd</span> <span class="pre">sample_audvis-ave-oct-6-fwd.fif</span> <span class="pre">--depth</span> <span class="pre">--loose</span> <span class="pre">0.2</span> <span class="pre">--eeg</span></code></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you were using a single-compartment BEM to    compute the forward solution, you can only compute the MEG inverse    operator.</p>
</div>
</div>
<div class="section" id="interactive-analysis">
<h2><a class="toc-backref" href="#id29">Interactive analysis</a><a class="headerlink" href="#interactive-analysis" title="Permalink to this headline">¶</a></h2>
<p>The most exciting part of this exercise is to explore the
data and the current estimates in mne_analyze .
This section contains some useful steps to get you started. A lot
of information about the capabilities of mne_analyze is
given in <a class="reference internal" href="gui/analyze.html#c-legacy-ch-interactive-analysis"><span class="std std-ref">Interactive analysis with mne_analyze</span></a>. Batch-mode processing with
mne_make_movie is discussed in <a class="reference internal" href="source_localization/c_inverse.html#c-legacy-movies-and-snapshots"><span class="std std-ref">Producing movies and snapshots</span></a>. Cross-subject
averaging is covered in <a class="reference internal" href="source_localization/c_morph.html#c-legacy-ch-morph"><span class="std std-ref">Morphing and averaging</span></a>.</p>
<p>Before launching mne_analyze it
is advisable to go to the directory <code class="docutils literal notranslate"><span class="pre">MEG/sample</span></code> . The
current working directory can be also changed from mne_analyze .</p>
<div class="section" id="getting-started">
<h3><a class="toc-backref" href="#id30">Getting started</a><a class="headerlink" href="#getting-started" title="Permalink to this headline">¶</a></h3>
<p>Launch mne_analyze . Select Help/On GLX… , which brings up a window containing Open
GL rendering context information. If first line in the information
dialog that pops up says Nondirect rendering context instead of Direct rendering context you will experience slow graphics
performance. To fix this, your system software, graphics adapter
or both need to be updated. Consult a computer support person for
further information.</p>
</div>
<div class="section" id="load-surfaces">
<h3><a class="toc-backref" href="#id31">Load surfaces</a><a class="headerlink" href="#load-surfaces" title="Permalink to this headline">¶</a></h3>
<p>It is reasonable to start the analysis by loading the display
surfaces: choose the inflated surface for subject sample from
the dialog that appears when you select File/Load surface… .</p>
</div>
<div class="section" id="load-the-data">
<h3><a class="toc-backref" href="#id32">Load the data</a><a class="headerlink" href="#load-the-data" title="Permalink to this headline">¶</a></h3>
<p>Select File/Open… . Select <code class="docutils literal notranslate"><span class="pre">sample_audvis-ave.fif</span></code> as
your data file and select the Left auditory data
set. Select the inverse operator <code class="docutils literal notranslate"><span class="pre">sample_audvis-ave-oct-6-meg-eeg-inv.fif</span></code> and
press OK . After a while the signals
appear in the sample waveform and topographical displays. Click
on the N100m peak in the auditory response. A dSPM map appears in
the main surface display.</p>
</div>
<div class="section" id="show-field-and-potential-maps">
<h3><a class="toc-backref" href="#id33">Show field and potential maps</a><a class="headerlink" href="#show-field-and-potential-maps" title="Permalink to this headline">¶</a></h3>
<p>Select Windows/Show viewer… .
After a while the viewer window appears. Click on the N100m peak
again. Once the field map preparation computations are complete,
the magnetic field and potential maps appear. Investigate the viewer
window options with help of <a class="reference internal" href="gui/analyze.html#caceffjf"><span class="std std-ref">The viewer</span></a>.</p>
</div>
<div class="section" id="show-current-estimates">
<h3><a class="toc-backref" href="#id34">Show current estimates</a><a class="headerlink" href="#show-current-estimates" title="Permalink to this headline">¶</a></h3>
<p>The options affecting the current estimates are accessible
from Adjust/Estimate parameters… .
With help of <a class="reference internal" href="gui/analyze.html#cacbhdbf"><span class="std std-ref">Working with current estimates</span></a>, investigate the effects of the
parameter settings.</p>
</div>
<div class="section" id="labels-and-timecourses">
<h3><a class="toc-backref" href="#id35">Labels and timecourses</a><a class="headerlink" href="#labels-and-timecourses" title="Permalink to this headline">¶</a></h3>
<p>While in directory <code class="docutils literal notranslate"><span class="pre">MEG/sample</span></code> , create a directory
called <code class="docutils literal notranslate"><span class="pre">label</span></code> :</p>
<p><code class="docutils literal notranslate"><span class="pre">mkdir</span> <span class="pre">label</span></code></p>
<p>Using the information in <a class="reference internal" href="gui/analyze.html#cacjcfjj"><span class="std std-ref">Creating new label files</span></a>, create two
labels <code class="docutils literal notranslate"><span class="pre">A-lh.label</span></code> and <code class="docutils literal notranslate"><span class="pre">A-rh.label</span></code> in the
approximate location of the left and right auditory cortices. Save
these labels in the newly created <code class="docutils literal notranslate"><span class="pre">label</span></code> directory.</p>
<p>Load all labels from the <code class="docutils literal notranslate"><span class="pre">label</span></code> directory and
investigate the timecourses in these two labels as well as at individual
vertices. Information on label processing can be found from <a class="reference internal" href="gui/analyze.html#cacccfhh"><span class="std std-ref">Inquiring timecourses</span></a>.</p>
</div>
<div class="section" id="morphing">
<h3><a class="toc-backref" href="#id36">Morphing</a><a class="headerlink" href="#morphing" title="Permalink to this headline">¶</a></h3>
<p>Goto to <code class="docutils literal notranslate"><span class="pre">$SUBJECTS_DIR</span></code> and create the directory <code class="docutils literal notranslate"><span class="pre">morph-maps</span></code> .
Load the inflated surface for subject morph as
the morphing surfaces. Try switching between the original and morphing
surfaces. More information about morphing is available in <a class="reference internal" href="gui/analyze.html#cacgbeib"><span class="std std-ref">Morphing</span></a> and
in <a class="reference internal" href="source_localization/c_morph.html#c-legacy-ch-morph"><span class="std std-ref">Morphing and averaging</span></a>.</p>
<p>There is also a left-hemisphere occipital patch file available
for subject morph . Load a righ-hemifield
visual response instead of the auditory one and investigate mapping
of the current estimates on the patch.</p>
</div>
</div>
</div>


    </div>
    
  </div>
</div>
<footer class="footer">
  <div class="container institutions">
    <a href="https://www.massgeneral.org/"><img class="institution_lg" src="../_static/institution_logos/MGH.svg" title="Massachusetts General Hospital" alt="Massachusetts General Hospital"/></a>
    <a href="https://martinos.org/"><img class="institution_lg" src="../_static/institution_logos/Martinos.png" title="Athinoula A. Martinos Center for Biomedical Imaging" alt="Athinoula A. Martinos Center for Biomedical Imaging"/></a>
    <a href="https://hms.harvard.edu/"><img class="institution_lg" src="../_static/institution_logos/Harvard.png" title="Harvard Medical School" alt="Harvard Medical School"/></a>
    <a href="https://web.mit.edu/"><img class="institution_sm" src="../_static/institution_logos/MIT.svg" title="Massachusetts Institute of Technology" alt="Massachusetts Institute of Technology"/></a>
    <a href="https://www.nyu.edu/"><img class="institution_md" src="../_static/institution_logos/NYU.png" title="New York University" alt="New York University"/></a>
    <a href="http://www.cea.fr/"><img class="institution_md" src="../_static/institution_logos/CEA.png" title="Commissariat à l´énergie atomique et aux énergies alternatives" alt="Commissariat à l´énergie atomique et aux énergies alternatives"/></a>
    <a href="https://sci.aalto.fi/"><img class="institution_md" src="../_static/institution_logos/Aalto.svg" title="Aalto-yliopiston perustieteiden korkeakoulu" alt="Aalto-yliopiston perustieteiden korkeakoulu"/></a>
    <a href="https://www.telecom-paris.fr/"><img class="institution_md" src="../_static/institution_logos/Telecom_Paris_Tech.png" title="Télécom ParisTech" alt="Télécom ParisTech"/></a>
    <a href="https://www.washington.edu/"><img class="institution_sm" src="../_static/institution_logos/Washington.png" title="University of Washington" alt="University of Washington"/></a>
    <a href="https://icm-institute.org/"><img class="institution_lg" src="../_static/institution_logos/ICM.jpg" title="Institut du Cerveau et de la Moelle épinière" alt="Institut du Cerveau et de la Moelle épinière"/></a>
    <a href="https://www.bu.edu/"><img class="institution_sm" src="../_static/institution_logos/BU.svg" title="Boston University" alt="Boston University"/></a>
    <a href="https://www.inserm.fr/"><img class="institution_xs" src="../_static/institution_logos/Inserm.svg" title="Institut national de la santé et de la recherche médicale" alt="Institut national de la santé et de la recherche médicale"/></a>
    <a href="https://www.fz-juelich.de/"><img class="institution_sm" src="../_static/institution_logos/Julich.svg" title="Forschungszentrum Jülich" alt="Forschungszentrum Jülich"/></a>
    <a href="https://www.tu-ilmenau.de/"><img class="institution_sm" src="../_static/institution_logos/Ilmenau.gif" title="Technische Universität Ilmenau" alt="Technische Universität Ilmenau"/></a>
    <a href="https://bids.berkeley.edu/"><img class="institution_md" src="../_static/institution_logos/BIDS.png" title="Berkeley Institute for Data Science" alt="Berkeley Institute for Data Science"/></a>
    <a href="https://www.inria.fr/"><img class="institution_sm" src="../_static/institution_logos/inria.png" title="Institut national de recherche en informatique et en automatique" alt="Institut national de recherche en informatique et en automatique"/></a>
    <a href="https://www.au.dk/"><img class="institution_sm" src="../_static/institution_logos/Aarhus.png" title="Aarhus Universitet" alt="Aarhus Universitet"/></a>
    <a href="https://www.uni-graz.at/"><img class="institution_md" src="../_static/institution_logos/Graz.jpg" title="Karl-Franzens-Universität Graz" alt="Karl-Franzens-Universität Graz"/></a>
  </div>
  <div class="container">
    <ul class="list-inline">
      <li><a href="https://github.com/mne-tools/mne-python">GitHub</a></li>
      <li>·</li>
      <li><a href="https://mail.nmr.mgh.harvard.edu/mailman/listinfo/mne_analysis">Mailing list</a></li>
      <li>·</li>
      <li><a href="https://gitter.im/mne-tools/mne-python">Gitter</a></li>
      <li>·</li>
      <li><a href="whats_new.html">What's new</a></li>
      <li>·</li>
      <li><a href="faq.html#cite">Cite MNE</a></li>
      <li class="pull-right"><a href="#">Back to top</a></li>
    </ul>
    <p>&copy; Copyright 2012-2019, MNE Developers. Last updated on 2019-07-11.</p>
  </div>
</footer>
  </body>
</html>