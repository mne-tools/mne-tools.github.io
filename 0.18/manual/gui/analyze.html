<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Interactive analysis with mne_analyze &#8212; MNE 0.18.2 documentation</title>
    <link rel="stylesheet" href="../../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/gallery.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/bootstrap_divs.css" />
    <link rel="stylesheet" href="../../_static/reset-syntax.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/language_data.js"></script>
    <script type="text/javascript" src="../../_static/bootstrap_divs.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />

    <script type="text/javascript" src="../../_static/copybutton.js"></script>


    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-37225609-1']);
    _gaq.push(['_trackPageview']);

    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
    </script>


    <link rel="stylesheet" href="../../_static/style.css " type="text/css" />
    <link rel="stylesheet" href="../../_static/font-awesome.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/flag-icon.css" type="text/css" />



    <script type="text/javascript">
    !function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);
    js.id=id;js.src="https://platform.twitter.com/widgets.js";
    fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");
    </script>



    <script type="text/javascript">
    (function() {
    var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
    po.src = 'https://apis.google.com/js/plusone.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
    })();
    </script>



<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript" src="../../_static/js/jquery-1.11.0.min.js "></script>
<script type="text/javascript" src="../../_static/js/jquery-fix.js "></script>
<script type="text/javascript" src="../../_static/bootstrap-3.3.7/js/bootstrap.min.js "></script>
<script type="text/javascript" src="../../_static/bootstrap-sphinx.js "></script>



  </head><body>





  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../../index.html"><span><img src="../../_static/mne_logo_small.png"></span>
           </a>
        <span class="navbar-text navbar-version pull-left"><b>0.18.2</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
                <li><a href="../../getting_started.html">Install</a></li>
                <li><a href="../../documentation.html">Documentation</a></li>
                <li><a href="../../python_reference.html">API</a></li>
                <li><a href="../../glossary.html">Glossary</a></li>
                <li><a href="../../auto_examples/index.html">Examples</a></li>
                <li><a href="../../contributing.html">Contribute</a></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../../index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"></ul>
</li>
              
            
            
            
            
            
              <li class="hidden-sm"></li>
            
          </ul>

          
<div class="navbar-form navbar-right navbar-btn dropdown btn-group-sm" style="margin-left: 20px; margin-top: 5px; margin-bottom: 5px">
  <button type="button" class="btn btn-primary navbar-btn dropdown-toggle" id="dropdownMenu1" data-toggle="dropdown">
    v0.18.2
    <span class="caret"></span>
  </button>
  <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
    <li><a href="https://mne-tools.github.io/dev/index.html">Development</a></li>
    <li><a href="https://mne-tools.github.io/stable/index.html">v0.18 (stable)</a></li>
    <li><a href="https://mne-tools.github.io/0.17/index.html">v0.17</a></li>
    <li><a href="https://mne-tools.github.io/0.16/index.html">v0.16</a></li>
    <li><a href="https://mne-tools.github.io/0.15/index.html">v0.15</a></li>
    <li><a href="https://mne-tools.github.io/0.14/index.html">v0.14</a></li>
    <li><a href="https://mne-tools.github.io/0.13/index.html">v0.13</a></li>
    <li><a href="https://mne-tools.github.io/0.12/index.html">v0.12</a></li>
    <li><a href="https://mne-tools.github.io/0.11/index.html">v0.11</a></li>
  </ul>
</div>


            
<form class="navbar-form navbar-right" action="../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          

        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index.html">
              <img class="logo" src="../../_static/mne_logo_small.png" alt="Logo"/>
            </a></p><ul>
<li><a class="reference internal" href="#">Interactive analysis with mne_analyze</a><ul>
<li><a class="reference internal" href="#overview">Overview</a></li>
<li><a class="reference internal" href="#the-main-window">The main window</a></li>
<li><a class="reference internal" href="#the-menus">The menus</a><ul>
<li><a class="reference internal" href="#the-file-menu">The File menu</a></li>
<li><a class="reference internal" href="#the-adjust-menu">The Adjust menu</a></li>
<li><a class="reference internal" href="#the-view-menu">The View menu</a></li>
<li><a class="reference internal" href="#the-labels-menu">The Labels menu</a></li>
<li><a class="reference internal" href="#the-dipoles-menu">The Dipoles menu</a></li>
<li><a class="reference internal" href="#the-help-menu">The Help menu</a></li>
</ul>
</li>
<li><a class="reference internal" href="#loading-data">Loading data</a></li>
<li><a class="reference internal" href="#loading-epochs-from-a-raw-data-file">Loading epochs from a raw data file</a></li>
<li><a class="reference internal" href="#data-displays">Data displays</a><ul>
<li><a class="reference internal" href="#the-topographical-display">The topographical display</a></li>
<li><a class="reference internal" href="#the-sample-channel-display">The sample channel display</a></li>
<li><a class="reference internal" href="#scale-settings">Scale settings</a></li>
</ul>
</li>
<li><a class="reference internal" href="#the-surface-display">The surface display</a><ul>
<li><a class="reference internal" href="#the-surface-selection-dialog">The surface selection dialog</a></li>
<li><a class="reference internal" href="#the-patch-selection-dialog">The patch selection dialog</a></li>
<li><a class="reference internal" href="#controlling-the-surface-display">Controlling the surface display</a></li>
<li><a class="reference internal" href="#selecting-vertices">Selecting vertices</a></li>
<li><a class="reference internal" href="#defining-viewing-orientations">Defining viewing orientations</a></li>
<li><a class="reference internal" href="#adjusting-lighting">Adjusting lighting</a></li>
<li><a class="reference internal" href="#producing-output-files">Producing output files</a></li>
<li><a class="reference internal" href="#image-output-modes">Image output modes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#morphing">Morphing</a></li>
<li><a class="reference internal" href="#the-viewer">The viewer</a><ul>
<li><a class="reference internal" href="#cacfddcb">Overview</a></li>
<li><a class="reference internal" href="#viewer-options">Viewer options</a></li>
</ul>
</li>
<li><a class="reference internal" href="#magnetic-field-and-electric-potential-maps">Magnetic field and electric potential maps</a><ul>
<li><a class="reference internal" href="#id2">Overview</a></li>
<li><a class="reference internal" href="#technical-description">Technical description</a></li>
<li><a class="reference internal" href="#field-mapping-preferences">Field mapping preferences</a></li>
</ul>
</li>
<li><a class="reference internal" href="#working-with-current-estimates">Working with current estimates</a><ul>
<li><a class="reference internal" href="#preferences">Preferences</a></li>
<li><a class="reference internal" href="#the-snr-display">The SNR display</a></li>
</ul>
</li>
<li><a class="reference internal" href="#inquiring-timecourses">Inquiring timecourses</a><ul>
<li><a class="reference internal" href="#timecourses-at-vertices">Timecourses at vertices</a></li>
<li><a class="reference internal" href="#timecourses-at-labels">Timecourses at labels</a></li>
<li><a class="reference internal" href="#the-timecourse-manager">The timecourse manager</a><ul>
<li><a class="reference internal" href="#label-timecourse-files">Label timecourse files</a></li>
</ul>
</li>
<li><a class="reference internal" href="#creating-new-label-files">Creating new label files</a></li>
</ul>
</li>
<li><a class="reference internal" href="#overlays">Overlays</a></li>
<li><a class="reference internal" href="#fitting-current-dipoles">Fitting current dipoles</a><ul>
<li><a class="reference internal" href="#dipole-fitting-parameters">Dipole fitting parameters</a></li>
<li><a class="reference internal" href="#the-dipole-fitting-algorithm">The dipole fitting algorithm</a></li>
<li><a class="reference internal" href="#the-dipole-list">The dipole list</a></li>
<li><a class="reference internal" href="#channel-selections">Channel selections</a></li>
</ul>
</li>
<li><a class="reference internal" href="#coordinate-frame-alignment">Coordinate frame alignment</a><ul>
<li><a class="reference internal" href="#using-a-high-resolution-head-surface-tessellations">Using a high-resolution head surface tessellations</a></li>
<li><a class="reference internal" href="#using-fiducial-points-identified-by-other-software">Using fiducial points identified by other software</a></li>
</ul>
</li>
<li><a class="reference internal" href="#viewing-continuous-hpi-data">Viewing continuous HPI data</a></li>
<li><a class="reference internal" href="#working-with-the-mri-viewer">Working with the MRI viewer</a></li>
<li><a class="reference internal" href="#working-with-the-average-brain">Working with the average brain</a></li>
<li><a class="reference internal" href="#compatibility-with-cliplab">Compatibility with cliplab</a></li>
<li><a class="reference internal" href="#visualizing-the-head-position">Visualizing the head position</a></li>
</ul>
</li>
</ul>

<form action="../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
        </div>
      </div>
    <div class="body col-md-12 content" role="main">
      
  <div class="section" id="interactive-analysis-with-mne-analyze">
<span id="c-legacy-ch-interactive-analysis"></span><h1>Interactive analysis with mne_analyze<a class="headerlink" href="#interactive-analysis-with-mne-analyze" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#overview" id="id36">Overview</a></p></li>
<li><p><a class="reference internal" href="#the-main-window" id="id37">The main window</a></p></li>
<li><p><a class="reference internal" href="#the-menus" id="id38">The menus</a></p>
<ul>
<li><p><a class="reference internal" href="#the-file-menu" id="id39">The File menu</a></p></li>
<li><p><a class="reference internal" href="#the-adjust-menu" id="id40">The Adjust menu</a></p></li>
<li><p><a class="reference internal" href="#the-view-menu" id="id41">The View menu</a></p></li>
<li><p><a class="reference internal" href="#the-labels-menu" id="id42">The Labels menu</a></p></li>
<li><p><a class="reference internal" href="#the-dipoles-menu" id="id43">The Dipoles menu</a></p></li>
<li><p><a class="reference internal" href="#the-help-menu" id="id44">The Help menu</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#loading-data" id="id45">Loading data</a></p></li>
<li><p><a class="reference internal" href="#loading-epochs-from-a-raw-data-file" id="id46">Loading epochs from a raw data file</a></p></li>
<li><p><a class="reference internal" href="#data-displays" id="id47">Data displays</a></p>
<ul>
<li><p><a class="reference internal" href="#the-topographical-display" id="id48">The topographical display</a></p></li>
<li><p><a class="reference internal" href="#the-sample-channel-display" id="id49">The sample channel display</a></p></li>
<li><p><a class="reference internal" href="#scale-settings" id="id50">Scale settings</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#the-surface-display" id="id51">The surface display</a></p>
<ul>
<li><p><a class="reference internal" href="#the-surface-selection-dialog" id="id52">The surface selection dialog</a></p></li>
<li><p><a class="reference internal" href="#the-patch-selection-dialog" id="id53">The patch selection dialog</a></p></li>
<li><p><a class="reference internal" href="#controlling-the-surface-display" id="id54">Controlling the surface display</a></p></li>
<li><p><a class="reference internal" href="#selecting-vertices" id="id55">Selecting vertices</a></p></li>
<li><p><a class="reference internal" href="#defining-viewing-orientations" id="id56">Defining viewing orientations</a></p></li>
<li><p><a class="reference internal" href="#adjusting-lighting" id="id57">Adjusting lighting</a></p></li>
<li><p><a class="reference internal" href="#producing-output-files" id="id58">Producing output files</a></p></li>
<li><p><a class="reference internal" href="#image-output-modes" id="id59">Image output modes</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#morphing" id="id60">Morphing</a></p></li>
<li><p><a class="reference internal" href="#the-viewer" id="id61">The viewer</a></p>
<ul>
<li><p><a class="reference internal" href="#cacfddcb" id="id62">Overview</a></p></li>
<li><p><a class="reference internal" href="#viewer-options" id="id63">Viewer options</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#magnetic-field-and-electric-potential-maps" id="id64">Magnetic field and electric potential maps</a></p>
<ul>
<li><p><a class="reference internal" href="#id2" id="id65">Overview</a></p></li>
<li><p><a class="reference internal" href="#technical-description" id="id66">Technical description</a></p></li>
<li><p><a class="reference internal" href="#field-mapping-preferences" id="id67">Field mapping preferences</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#working-with-current-estimates" id="id68">Working with current estimates</a></p>
<ul>
<li><p><a class="reference internal" href="#preferences" id="id69">Preferences</a></p></li>
<li><p><a class="reference internal" href="#the-snr-display" id="id70">The SNR display</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#inquiring-timecourses" id="id71">Inquiring timecourses</a></p>
<ul>
<li><p><a class="reference internal" href="#timecourses-at-vertices" id="id72">Timecourses at vertices</a></p></li>
<li><p><a class="reference internal" href="#timecourses-at-labels" id="id73">Timecourses at labels</a></p></li>
<li><p><a class="reference internal" href="#the-timecourse-manager" id="id74">The timecourse manager</a></p></li>
<li><p><a class="reference internal" href="#creating-new-label-files" id="id75">Creating new label files</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#overlays" id="id76">Overlays</a></p></li>
<li><p><a class="reference internal" href="#fitting-current-dipoles" id="id77">Fitting current dipoles</a></p>
<ul>
<li><p><a class="reference internal" href="#dipole-fitting-parameters" id="id78">Dipole fitting parameters</a></p></li>
<li><p><a class="reference internal" href="#the-dipole-fitting-algorithm" id="id79">The dipole fitting algorithm</a></p></li>
<li><p><a class="reference internal" href="#the-dipole-list" id="id80">The dipole list</a></p></li>
<li><p><a class="reference internal" href="#channel-selections" id="id81">Channel selections</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#coordinate-frame-alignment" id="id82">Coordinate frame alignment</a></p>
<ul>
<li><p><a class="reference internal" href="#using-a-high-resolution-head-surface-tessellations" id="id83">Using a high-resolution head surface tessellations</a></p></li>
<li><p><a class="reference internal" href="#using-fiducial-points-identified-by-other-software" id="id84">Using fiducial points identified by other software</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#viewing-continuous-hpi-data" id="id85">Viewing continuous HPI data</a></p></li>
<li><p><a class="reference internal" href="#working-with-the-mri-viewer" id="id86">Working with the MRI viewer</a></p></li>
<li><p><a class="reference internal" href="#working-with-the-average-brain" id="id87">Working with the average brain</a></p></li>
<li><p><a class="reference internal" href="#compatibility-with-cliplab" id="id88">Compatibility with cliplab</a></p></li>
<li><p><a class="reference internal" href="#visualizing-the-head-position" id="id89">Visualizing the head position</a></p></li>
</ul>
</div>
<div class="section" id="overview">
<h2><a class="toc-backref" href="#id36">Overview</a><a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>Interactive analysis of the MEG/EEG data and source estimates
is facilitated by the <a class="reference internal" href="../c_reference.html#mne-analyze"><span class="std std-ref">mne_analyze</span></a> tool.
Its features include:</p>
<ul class="simple">
<li><p>Viewing of evoked-response data or data
segments in a topographical layout.</p></li>
<li><p>Alignment of MEG and head coordinate frames.</p></li>
<li><p>Display of maps of the magnetic field and electric potentials.</p></li>
<li><p>Computation and display of cortically-constrained minimum-norm current
estimates and statistical maps derived from them. The solutions can
be displayed on folded and inflated cortical surfaces as well as
on curved and flattened surface patches.</p></li>
<li><p>Fitting of current dipoles to the data.</p></li>
<li><p>Connection to tkmedit (part
of FreeSurfer) to display data on MRI slices.</p></li>
<li><p>Production of QuickTime (TM) movies and graphics snapshots
in several image file formats.</p></li>
<li><p>Connection to cliplab (part of Elekta-Neuromag software) to
produce graphics reports, see <a class="reference internal" href="#cacjefai"><span class="std std-ref">Compatibility with cliplab</span></a>.</p></li>
<li><p>Inquiry and saving of source waveforms at selected surface
points or within ROIs defined by label files.</p></li>
<li><p>On-line morphing of the current distributions.</p></li>
<li><p>Output of snapshots in w file format.</p></li>
<li><p>Display of overlay data delivered in w and stc file formats.</p></li>
<li><p>Creation of ROI (label) files.</p></li>
<li><p>Viewing of continuous head-position data delivered by Elekta-Neuromag
software.</p></li>
</ul>
<p>See <a class="reference internal" href="../c_reference.html#mne-analyze"><span class="std std-ref">mne_analyze</span></a> for command line options.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Before starting mne_analyze the <code class="docutils literal notranslate"><span class="pre">SUBJECTS_DIR</span></code> environment variable has to be set.</p>
</div>
</div>
<div class="section" id="the-main-window">
<h2><a class="toc-backref" href="#id37">The main window</a><a class="headerlink" href="#the-main-window" title="Permalink to this headline">¶</a></h2>
<div class="figure align-default" id="id3">
<span id="cacjabji"></span><img alt="main window of mne_analyze" src="../../_images/main_window.png" />
<p class="caption"><span class="caption-text">The main window of mne_analyze.</span><a class="headerlink" href="#id3" title="Permalink to this image">¶</a></p>
</div>
<p>The main window of mne_analyze shown
in <a class="reference internal" href="#cacjabji"><span class="std std-ref">The main window of mne_analyze.</span></a> has the following components:</p>
<ul class="simple">
<li><p>The menu bar;</p></li>
<li><p>Display area for a sample response;</p></li>
<li><p>Display of the estimated SNR, see <a class="reference internal" href="#cacjffee"><span class="std std-ref">The SNR display</span></a>;</p></li>
<li><p>Display of a source waveform;</p></li>
<li><p>Message area, time-point selection text field, an ECD fit
button, a text field for selecting a vertex on the surface, and
a message text label;</p></li>
<li><p>Display area for the current estimates;</p></li>
<li><p>Controls for the current estimate display;</p></li>
<li><p>Topographical display of data.</p></li>
</ul>
</div>
<div class="section" id="the-menus">
<h2><a class="toc-backref" href="#id38">The menus</a><a class="headerlink" href="#the-menus" title="Permalink to this headline">¶</a></h2>
<div class="section" id="the-file-menu">
<h3><a class="toc-backref" href="#id39">The File menu</a><a class="headerlink" href="#the-file-menu" title="Permalink to this headline">¶</a></h3>
<p>The File shown in <a class="reference internal" href="#cacjcbfi"><span class="std std-ref">The file menu</span></a> contains the following items:</p>
<div class="figure align-center" id="id4" style="width: 25%">
<span id="cacjcbfi"></span><img alt="the file menu" src="../../_images/file_menu.png" />
<p class="caption"><span class="caption-text">The file menu</span><a class="headerlink" href="#id4" title="Permalink to this image">¶</a></p>
</div>
<p><strong>Open…</strong></p>
<blockquote>
<div><p>Load a new data set and an inverse operator. For details, see <a class="reference internal" href="#cacbachb"><span class="std std-ref">Loading data</span></a>.</p>
</div></blockquote>
<p><strong>Open raw…</strong></p>
<blockquote>
<div><p>Load epoch data from a raw data file. For details, see <a class="reference internal" href="#cacdedbi"><span class="std std-ref">Loading epochs from a raw data file</span></a>.</p>
</div></blockquote>
<p><strong>Switch to data set…</strong></p>
<blockquote>
<div><p>If multiple data sets or epochs from a raw data file are loaded,
this menu item brings up a list to switch between the data sets
or epochs.</p>
</div></blockquote>
<p><strong>Change working directory…</strong></p>
<blockquote>
<div><p>Change the working directory of this program. This will usually
be the directory where your MEG/EEG data and inverse operator are located.</p>
</div></blockquote>
<p><strong>Load surface…</strong></p>
<blockquote>
<div><p>Load surface reconstructions for the subject whose data you are analyzing,
see <a class="reference internal" href="#cacfjicc"><span class="std std-ref">The surface display</span></a>.</p>
</div></blockquote>
<p><strong>Load morphing surface…</strong></p>
<blockquote>
<div><p>Load surface reconstructions of another subject for morphing, see <a class="reference internal" href="#cacgbeib"><span class="std std-ref">Morphing</span></a>.</p>
</div></blockquote>
<p><strong>Load surface patch…</strong></p>
<blockquote>
<div><p>Load a curved or flattened surface patch, see <a class="reference internal" href="#cacfjicc"><span class="std std-ref">The surface display</span></a>.</p>
</div></blockquote>
<p><strong>Load morphing surface patch…</strong></p>
<blockquote>
<div><p>Load a curved or flattened surface patch for morphing, see <a class="reference internal" href="#cacgbeib"><span class="std std-ref">Morphing</span></a>.</p>
</div></blockquote>
<p><strong>Load digitizer data…</strong></p>
<blockquote>
<div><p>Load digitizer data for coordinate frame alignment, see <a class="reference internal" href="#cacehgcd"><span class="std std-ref">Coordinate frame alignment</span></a>.</p>
</div></blockquote>
<p><strong>View continuous HPI data…</strong></p>
<blockquote>
<div><p>Load a data file containing continuous head position information, see <a class="reference internal" href="#caciadai"><span class="std std-ref">Viewing continuous HPI data</span></a>.</p>
</div></blockquote>
<p><strong>Manage overlays…</strong></p>
<blockquote>
<div><p>Bring up the overlay manager to import data from stc and w files, see <a class="reference internal" href="#cacfchec"><span class="std std-ref">Overlays</span></a>.</p>
</div></blockquote>
<p><strong>Save bad channel selection</strong></p>
<blockquote>
<div><p>Save the current bad channel selection created in the topographical data
display, see <a class="reference internal" href="#cacefbde"><span class="std std-ref">Data displays</span></a>.</p>
</div></blockquote>
<p><strong>Quit</strong></p>
<blockquote>
<div><p>Quit the program.</p>
</div></blockquote>
</div>
<div class="section" id="the-adjust-menu">
<h3><a class="toc-backref" href="#id40">The Adjust menu</a><a class="headerlink" href="#the-adjust-menu" title="Permalink to this headline">¶</a></h3>
<p>The contents of the Adjust menu
is shown in <a class="reference internal" href="#cacfdijj"><span class="std std-ref">The Adjust menu.</span></a>:</p>
<div class="figure align-default" id="id5">
<span id="cacfdijj"></span><img alt="The Adjust menu" src="../../_images/adjust_menu.png" />
<p class="caption"><span class="caption-text">The Adjust menu.</span><a class="headerlink" href="#id5" title="Permalink to this image">¶</a></p>
</div>
<p><strong>Scales</strong></p>
<blockquote>
<div><p>Adjust the scales of the data display.</p>
</div></blockquote>
<p><strong>Estimates…</strong></p>
<blockquote>
<div><p>Adjust the properties of the displayed current estimates, see <a class="reference internal" href="#cacbhdbf"><span class="std std-ref">Working with current estimates</span></a>.</p>
</div></blockquote>
<p><strong>Select trace layout…</strong></p>
<blockquote>
<div><p>Select the layout for the topographical display, see <a class="reference internal" href="#cacefbde"><span class="std std-ref">Data displays</span></a>.</p>
</div></blockquote>
<p><strong>Lights…</strong></p>
<blockquote>
<div><p>Adjust the lighting of the scenes in the main display and the viewer, see
<a class="reference internal" href="#cacbhdbf"><span class="std std-ref">Working with current estimates</span></a> and <a class="reference internal" href="#caceffjf"><span class="std std-ref">The viewer</span></a>.</p>
</div></blockquote>
<p><strong>Field mapping…</strong></p>
<blockquote>
<div><p>Adjust the field mapping preferences, see <a class="reference internal" href="#cacicdga"><span class="std std-ref">Magnetic field and electric potential maps</span></a>.</p>
</div></blockquote>
<p><strong>Coordinate alignment…</strong></p>
<blockquote>
<div><p>Establish a coordinate transformation between the MEG and MRI coordinate
frames, see <a class="reference internal" href="#cacehgcd"><span class="std std-ref">Coordinate frame alignment</span></a>.</p>
</div></blockquote>
</div>
<div class="section" id="the-view-menu">
<h3><a class="toc-backref" href="#id41">The View menu</a><a class="headerlink" href="#the-view-menu" title="Permalink to this headline">¶</a></h3>
<p>The contents of the file menu is shown in <a class="reference internal" href="#cacbfcgf"><span class="std std-ref">The View menu.</span></a>:</p>
<div class="figure align-default" id="id6">
<span id="cacbfcgf"></span><img alt="The View menu" src="../../_images/view_menu.png" />
<p class="caption"><span class="caption-text">The View menu.</span><a class="headerlink" href="#id6" title="Permalink to this image">¶</a></p>
</div>
<p><strong>Show viewer…</strong></p>
<blockquote>
<div><p>Loads additional surfaces and pops up the viewer window. The functions
available in the viewer are discussed in <a class="reference internal" href="#caceffjf"><span class="std std-ref">The viewer</span></a>.</p>
</div></blockquote>
<p><strong>Show MRI viewer…</strong></p>
<blockquote>
<div><p>Bring up the tkmedit program
to view MRI slices, see <a class="reference internal" href="#cacchcbf"><span class="std std-ref">Working with the MRI viewer</span></a>.</p>
</div></blockquote>
<p><strong>Show coordinates…</strong></p>
<blockquote>
<div><p>Show the coordinates of a vertex, see <a class="reference internal" href="#chdiehdh"><span class="std std-ref">Selecting vertices</span></a>.</p>
</div></blockquote>
<p><strong>Show timecourse manager…</strong></p>
<blockquote>
<div><p>Brings up the timecourse manager if some timecourses are available.
Timecourses are discussed in <a class="reference internal" href="#cacccfhh"><span class="std std-ref">Inquiring timecourses</span></a>.</p>
</div></blockquote>
</div>
<div class="section" id="the-labels-menu">
<h3><a class="toc-backref" href="#id42">The Labels menu</a><a class="headerlink" href="#the-labels-menu" title="Permalink to this headline">¶</a></h3>
<p>The contents of the Labels menu
is shown in <a class="reference internal" href="#cachcdcf"><span class="std std-ref">The Labels menu.</span></a>. ROI analysis with help of labels
is discussed in detail in <a class="reference internal" href="#cacccfhh"><span class="std std-ref">Inquiring timecourses</span></a>.</p>
<div class="figure align-default" id="id7">
<span id="cachcdcf"></span><img alt="The Labels menu" src="../../_images/labels_menu.png" />
<p class="caption"><span class="caption-text">The Labels menu.</span><a class="headerlink" href="#id7" title="Permalink to this image">¶</a></p>
</div>
<p>The label menu contains the following
items:</p>
<p><strong>Load label…</strong></p>
<blockquote>
<div><p>Loads one label file for ROI analysis.</p>
</div></blockquote>
<p><strong>Load all labels…</strong></p>
<blockquote>
<div><p>Loads all label files available in a directory for ROI analysis.</p>
</div></blockquote>
<p><strong>Load parcellation…</strong></p>
<blockquote>
<div><p>Load cortical parcellation data produced by FreeSurfer from
directory $SUBJECTS_DIR/$SUBJECT/label and add the cortical regions
defined to the label list.</p>
</div></blockquote>
<p><strong>Show label list…</strong></p>
<blockquote>
<div><p>Shows a list of all currently loaded labels for ROI analysis.</p>
</div></blockquote>
<p><strong>Discard all labels</strong></p>
<blockquote>
<div><p>Discard all labels loaded so far. The label list window will be
hidden.</p>
</div></blockquote>
<p><strong>Clear marked vertices</strong></p>
<blockquote>
<div><p>Clear the label outline or a label created interactively.</p>
</div></blockquote>
</div>
<div class="section" id="the-dipoles-menu">
<h3><a class="toc-backref" href="#id43">The Dipoles menu</a><a class="headerlink" href="#the-dipoles-menu" title="Permalink to this headline">¶</a></h3>
<p>The contents of the dipoles menu is shown in <a class="reference internal" href="#caccjdaf"><span class="std std-ref">The dipole fitting menu.</span></a>:</p>
<div class="figure align-default" id="id8">
<span id="caccjdaf"></span><img alt="The dipole fitting menu" src="../../_images/dipoles_menu.png" />
<p class="caption"><span class="caption-text">The dipole fitting menu.</span><a class="headerlink" href="#id8" title="Permalink to this image">¶</a></p>
</div>
<p><strong>Setup fitting…</strong></p>
<blockquote>
<div><p>Define the dipole fitting parameters, see <a class="reference internal" href="#cacedega"><span class="std std-ref">Dipole fitting parameters</span></a>.</p>
</div></blockquote>
<p><strong>Show dipole list…</strong></p>
<blockquote>
<div><p>Show the list of imported and fitted dipoles, see <a class="reference internal" href="#cacggaia"><span class="std std-ref">The dipole list</span></a>.</p>
</div></blockquote>
<p><strong>Manage channel selections…</strong></p>
<blockquote>
<div><p>Manage the selections of channels used in dipole fitting, see <a class="reference internal" href="#cacibhci"><span class="std std-ref">Channel selections</span></a>.</p>
</div></blockquote>
</div>
<div class="section" id="the-help-menu">
<h3><a class="toc-backref" href="#id44">The Help menu</a><a class="headerlink" href="#the-help-menu" title="Permalink to this headline">¶</a></h3>
<p>The contents of the Help menu is shown in <a class="reference internal" href="#help-menu-analyze"><span class="std std-ref">The Help menu.</span></a>:</p>
<div class="figure align-default" id="id9">
<span id="help-menu-analyze"></span><img alt="The Help menu" src="../../_images/help_menu.png" />
<p class="caption"><span class="caption-text">The Help menu.</span><a class="headerlink" href="#id9" title="Permalink to this image">¶</a></p>
</div>
<p><strong>On version…</strong></p>
<blockquote>
<div><p>Displays the version and compilation date of the program.</p>
</div></blockquote>
<p><strong>On license…</strong></p>
<blockquote>
<div><p>Displays the license information.</p>
</div></blockquote>
<p><strong>On GLX…</strong></p>
<blockquote>
<div><p>Displays information about the OpenGL rendering context. If you experience
poor graphics performance, check that the window that pops up from
here says that you have a Direct rendering context .
If not, either your graphics card or driver software needs an update.</p>
</div></blockquote>
<p><strong>Why the beep?</strong></p>
<blockquote>
<div><p>In some simple error situations, mne_analyze does
not popup an error dialog but refuses the action and rings the bell.
The reason for this can be displayed through this help menu item.</p>
</div></blockquote>
</div>
</div>
<div class="section" id="loading-data">
<span id="cacbachb"></span><h2><a class="toc-backref" href="#id45">Loading data</a><a class="headerlink" href="#loading-data" title="Permalink to this headline">¶</a></h2>
<p>When you select Open… from
the File menu the data loading
dialog shown in <a class="reference internal" href="#cacfhaih"><span class="std std-ref">The open dialog.</span></a> appears. It has four sections:</p>
<ul class="simple">
<li><p>A standard file selection box.</p></li>
<li><p>List of available data sets. This part is automatically filled
in when a proper data file is selected from the file list. You can
select one or more data sets from this list. Multiple selection
works with help of the shift and control keys. If multiple data
sets are selected, the data set to be analyzed can be changed from
the data set list accessible through Switch to data set… in the File menu.</p></li>
<li><p>List of available inverse operator decompositions in the current
directory and its subdirectory called <code class="docutils literal notranslate"><span class="pre">inv</span></code> .</p></li>
<li><p>List of options:</p>
<ul>
<li><p>MRI/head transform source specifies a file to read the MRI/MEG coordinate
transformation information from. This is usually the inverse operator
file. However, you can also load data with inverse operator set
to &lt;<em>none</em>&gt; to view the data
as well as field and potential maps derived thereof. In this case
you need to specify the coordinate transformation file using the Select… button,
usually located in <code class="docutils literal notranslate"><span class="pre">mri/T1-neuromag/sets</span></code> under the subject’s
FreeSurfer directory. The Default button
uses the default transformation file which must be called <code class="docutils literal notranslate"><span class="pre">$SUBJECTS_DIR/$SUBJECT/bem/$SUBJECT-trans.fif</span></code> .
This can be one of the MRI description files in  <code class="docutils literal notranslate"><span class="pre">mri/T1-neuromag/sets</span></code> or
a transformation file stored from mne_analyze ,
see <a class="reference internal" href="#cacehgcd"><span class="std std-ref">Coordinate frame alignment</span></a>.</p></li>
<li><p>Use EEG average electrode ref. selects
whether the average electrode reference is applied to the data.
This is only available if the inverse operator is set to &lt;<em>none</em>&gt; .</p></li>
<li><p>nave specifies the effective
number of averages to compute the SNR correctly. Usually your measurement
file contains this information.</p></li>
</ul>
</li>
</ul>
<div class="figure align-default" id="id10">
<span id="cacfhaih"></span><img alt="The open dialog" src="../../_images/open_dialog.png" />
<p class="caption"><span class="caption-text">The open dialog.</span><a class="headerlink" href="#id10" title="Permalink to this image">¶</a></p>
</div>
<p>After the data set(s) has been selected, the following actions
will take place:</p>
<ul class="simple">
<li><p>The inverse operator will be loaded.</p></li>
<li><p>Baselines will be applied as specified in the scales dialog.</p></li>
<li><p>Projection will be applied to the data. If no inverse operator
is specified, the source for the projection data will be the data
file and the average EEG reference setting in the options. If an
inverse operator is included, the projection will be read from the
data file.</p></li>
<li><p>If an inverse operator is loaded, whitened data will be computed.</p></li>
<li><p>If an inverse operator is loaded, the SNR estimate as well
as the effective SNR will be computed from the whitened data and
displayed in the SNR window.</p></li>
<li><p>Waveforms will be shown in the topographical display as well
as in the sample channel display.</p></li>
</ul>
<p>If multiple data sets are loaded each data set has the following
individual settings:</p>
<ul class="simple">
<li><p>Amplitude and time scale settings,</p></li>
<li><p>Baseline,</p></li>
<li><p>Picked time point,</p></li>
<li><p>Sample channel to be displayed, and</p></li>
<li><p>MNE display preferences, see <a class="reference internal" href="#cachffij"><span class="std std-ref">Preferences</span></a>.</p></li>
</ul>
<p>If a data set has not been previously displayed, the currently
active settings are copied to the data set.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you double click on an inverse operator file    name displayed in the Inverse operator list,    the command used to produced this file will be displayed in a message    dialog.</p>
</div>
</div>
<div class="section" id="loading-epochs-from-a-raw-data-file">
<span id="cacdedbi"></span><h2><a class="toc-backref" href="#id46">Loading epochs from a raw data file</a><a class="headerlink" href="#loading-epochs-from-a-raw-data-file" title="Permalink to this headline">¶</a></h2>
<p>Instead of an evoked-response data file it is possible to
load epochs of data (single trials) from a raw data file. This option
is invoked from File/Open raw… .
The file selection box is identical to the one used for evoked responses
(<a class="reference internal" href="#cacfhaih"><span class="std std-ref">The open dialog.</span></a>) except that data set selector is replaced
by the epoch selector show in <a class="reference internal" href="#cacdcgib"><span class="std std-ref">The raw data epoch selector.</span></a>.</p>
<div class="figure align-default" id="id11">
<span id="cacdcgib"></span><img alt="The raw data epoch selector" src="../../_images/epoch_selector.png" />
<p class="caption"><span class="caption-text">The raw data epoch selector.</span><a class="headerlink" href="#id11" title="Permalink to this image">¶</a></p>
</div>
<p>The epoch selector contains the following controls:</p>
<ul class="simple">
<li><p>The event specifier. Only events matching
this number are going to be considered.</p></li>
<li><p>The event source specifier. The event source can be either
the data file, <em>i.e.,</em> the digital trigger channel or
a event data file produced with mne_browse_raw or mne_process_raw ,
see <a class="reference internal" href="browse.html#cacjgifa"><span class="std std-ref">Save events (text)</span></a>. Using an event data file is useful
if, <em>e.g.</em>, the epochs to be processed epileptic spikes.</p></li>
<li><p>The time range specification. This determines the length of
the epoch with respect to the selected event.</p></li>
</ul>
<p>Once the settings have been accepted by clicking OK ,
the first matching epoch will be displayed. You can switch between
epochs using the data set list accessible through Switch to data set… in the File menu.</p>
</div>
<div class="section" id="data-displays">
<span id="cacefbde"></span><h2><a class="toc-backref" href="#id47">Data displays</a><a class="headerlink" href="#data-displays" title="Permalink to this headline">¶</a></h2>
<p>The MEG and EEG signals can be viewed in two ways:</p>
<ul class="simple">
<li><p>A selection of MEG or EEG channel is
shown in a topographical layout.</p></li>
<li><p>One representative channel can be selected to the Sample channel display by clicking on a channel in the
topographical display.</p></li>
</ul>
<p>In both the sample channel display and the topographical
display, current time point can be selected with a left mouse click.
In addition, time point of interest can be entered numerically in
the text box at the bottom left corner of the main display.</p>
<div class="section" id="the-topographical-display">
<span id="cachbjac"></span><h3><a class="toc-backref" href="#id48">The topographical display</a><a class="headerlink" href="#the-topographical-display" title="Permalink to this headline">¶</a></h3>
<p>A selection of channels is always shown in the right most
part of the main display. The topographical layout to use is selected
from Adjust/Select trace layout… ,
which brings up a window with a list of available layouts. The system-wide
layouts reside in $MNE_ROOT/share/mne_analyze/lout. In addition
any layout files residing in $HOME/.mne/lout are listed. The format
of the layout files and selection of the default layout is discussed
in <a class="reference internal" href="browse.html#cacfggcf"><span class="std std-ref">Full view layout</span></a>.</p>
<p>Several actions can be performed with the mouse in the topographical data
display:</p>
<p><strong>Left button click</strong></p>
<blockquote>
<div><p>Selects a time point of interest.</p>
</div></blockquote>
<p><strong>Left button click with control key</strong></p>
<blockquote>
<div><p>Selects a time point of interest and selects the channel under the pointer
to the sample channel display.</p>
</div></blockquote>
<p><strong>Left button drag with shift key</strong></p>
<blockquote>
<div><p>Enlarges the view to contain only channels in the selected area.</p>
</div></blockquote>
<p><strong>Middle button click or drag</strong></p>
<blockquote>
<div><p>Marks this channel as bad and clears all previously marked bad channel.
This action is only available if an inverse operator is <em>not</em> loaded.
An inverse operator dictates the selection of bad channels. The
current bad channel selection can be applied to the data from File/Save bad channel selection .</p>
</div></blockquote>
<p><strong>Middle button click or drag with control key</strong></p>
<blockquote>
<div><p>Extends the bad channel selection without clearing the previously active
bad channels.</p>
</div></blockquote>
<p><strong>Right button</strong></p>
<blockquote>
<div><p>Adjusts the channel selection used for dipole fitting in the same
way as the middle button selects bad channels. For more information
on channel selections, see <a class="reference internal" href="#cacibhci"><span class="std std-ref">Channel selections</span></a>.</p>
</div></blockquote>
</div>
<div class="section" id="the-sample-channel-display">
<span id="cacfghbj"></span><h3><a class="toc-backref" href="#id49">The sample channel display</a><a class="headerlink" href="#the-sample-channel-display" title="Permalink to this headline">¶</a></h3>
<p>The sample channel display shows one of the measurement channels
at the upper left corner of the mne_analyze user
interface. A time point can be selected with a left mouse click.
In addition, the following keyboard functions are associated with
the sample channel display:</p>
<p><strong>Down</strong></p>
<blockquote>
<div><p>Change the sample channel to the next channel in the scanning order.</p>
</div></blockquote>
<p><strong>Up</strong></p>
<blockquote>
<div><p>Change the sample channel to the previous channel in the scanning order.</p>
</div></blockquote>
<p><strong>Right</strong></p>
<blockquote>
<div><p>Move forward in time by 1 ms.</p>
</div></blockquote>
<p><strong>Control Right</strong></p>
<blockquote>
<div><p>Move forward in time by 5 ms.</p>
</div></blockquote>
<p><strong>Left</strong></p>
<blockquote>
<div><p>Move backward in time by 1 ms.</p>
</div></blockquote>
<p><strong>Control Left</strong></p>
<blockquote>
<div><p>Move backward in time by 5 ms.</p>
</div></blockquote>
</div>
<div class="section" id="scale-settings">
<h3><a class="toc-backref" href="#id50">Scale settings</a><a class="headerlink" href="#scale-settings" title="Permalink to this headline">¶</a></h3>
<p>The scales of the topographical and sample channel display
can be adjusted from the Scales dialog
which is invoked by selecting Adjust/Scales… from
the menus. The Scales dialog
shown in <a class="reference internal" href="#cacjjcgd"><span class="std std-ref">The Scales dialog.</span></a> has the following entries:</p>
<p><strong>Analyze range min [ms]</strong></p>
<blockquote>
<div><p>Specifies the lower limit of the time range of data to be shown.</p>
</div></blockquote>
<p><strong>Analyze range max [ms]</strong></p>
<blockquote>
<div><p>Specifies the upper limit of the time range of data to be shown.</p>
</div></blockquote>
<p><strong>Use full time range</strong></p>
<blockquote>
<div><p>If this box is checked, all data available in the data file will
be shown.</p>
</div></blockquote>
<p><strong>Baseline min [ms]</strong></p>
<blockquote>
<div><p>Specifies the lower time limit of the baseline.</p>
</div></blockquote>
<p><strong>Baseline max [ms]</strong></p>
<blockquote>
<div><p>Specifies the upper time limit of the baseline.</p>
</div></blockquote>
<p><strong>Baseline in use</strong></p>
<blockquote>
<div><p>Baseline subtraction can be switched on and off from this button.</p>
</div></blockquote>
<p><strong>MEG amp min [fT/cm]</strong></p>
<blockquote>
<div><p>Lower limit of the vertical scale of planar gradiometer MEG channels.</p>
</div></blockquote>
<p><strong>MEG amp max [fT/cm]</strong></p>
<blockquote>
<div><p>Upper limit of the vertical scale of planar gradiometer MEG channels.</p>
</div></blockquote>
<p><strong>MEG axmult [cm]</strong></p>
<blockquote>
<div><p>The vertical scale of MEG magnetometers and axial gradiometers will
be obtained by multiplying the planar gradiometer vertical scale
limits by this value, given in centimeters.</p>
</div></blockquote>
<p><strong>EEG amp min [muV]</strong></p>
<blockquote>
<div><p>Lower limit of the vertical scale of EEG channels.</p>
</div></blockquote>
<p><strong>EEG amp max [muV]</strong></p>
<blockquote>
<div><p>Upper limit of the vertical scale of EEG channels.</p>
</div></blockquote>
<p><strong>Show stimulus channel</strong></p>
<blockquote>
<div><p>Show the digital trigger channel data in the sample view together with
the sample channel.</p>
</div></blockquote>
<div class="figure align-default" id="id12">
<span id="cacjjcgd"></span><img alt="The Scales dialog" src="../../_images/scales_dialog.png" />
<p class="caption"><span class="caption-text">The Scales dialog.</span><a class="headerlink" href="#id12" title="Permalink to this image">¶</a></p>
</div>
</div>
</div>
<div class="section" id="the-surface-display">
<span id="cacfjicc"></span><h2><a class="toc-backref" href="#id51">The surface display</a><a class="headerlink" href="#the-surface-display" title="Permalink to this headline">¶</a></h2>
<p>In mne_analyze , the current
estimates are visualized on inflated or folded cortical surfaces.
There are two visualization displays: the surface display, which
is always visible, and the 3D viewer which is invoked from the Windows/Show viewer… menu selection, see <a class="reference internal" href="#caceffjf"><span class="std std-ref">The viewer</span></a>.</p>
<p>A total of eight surfaces or patches can be assigned to the
surface display:</p>
<ul class="simple">
<li><p>The left and right hemisphere cortical
surfaces for the subject whose data you are analyzing. These surfaces
can be the inflated, white-matter, or pial surfaces. They are loaded
through the File/Load surface… menu
selection,</p></li>
<li><p>The left and right hemisphere cortical surfaces of another
subject or an alternative representation of the cortical surface
of the actual subject. For example, you can switch between the inflated
and folded (pial or white matter) cortical surfaces very easily.
These surfaces are loaded from the File/Load morphing surface… menu selection.</p></li>
<li><p>Left and right hemisphere curved or flat cortical patches
for the subject you are analyzing. This patch is loaded from the File/Load surface patch… menu selection. The full cortical
surfaces must be loaded first before loading the patches.</p></li>
<li><p>Patches for an another subject or another pair of patches
for the same subject through the File/Load morphing surface patch… menu selection. Again, the full
cortical surfaces must have been loaded first.</p></li>
</ul>
<div class="section" id="the-surface-selection-dialog">
<span id="chdiffhj"></span><h3><a class="toc-backref" href="#id52">The surface selection dialog</a><a class="headerlink" href="#the-surface-selection-dialog" title="Permalink to this headline">¶</a></h3>
<p>When File/Load surface… or File/Load morphing surface… is invoked, the surface selection dialog
shown in <a class="reference internal" href="#cacdgjdc"><span class="std std-ref">The surface selection dialog.</span></a> appears.</p>
<div class="figure align-default" id="id13">
<span id="cacdgjdc"></span><img alt="The surface selection dialog" src="../../_images/surface_selection_dialog.png" />
<p class="caption"><span class="caption-text">The surface selection dialog.</span><a class="headerlink" href="#id13" title="Permalink to this image">¶</a></p>
</div>
<p>The dialog has the following components:</p>
<p><strong>List of subjects</strong></p>
<blockquote>
<div><p>This list contains the subjects available in the directory set with
the <code class="docutils literal notranslate"><span class="pre">SUBJECTS_DIR</span></code> environment variable.</p>
</div></blockquote>
<p><strong>List of available surfaces for the selected subject</strong></p>
<blockquote>
<div><p>Lists the surfaces available for the current subject. When you click on
an item in this list, it appears in the Selected surface text field.</p>
</div></blockquote>
<p><strong>x-rotation (deg)</strong></p>
<blockquote>
<div><p>Specifies the initial rotation of the surface around the <em>x</em> (left
to right) axis. Positive angle means a counterclockwise rotation
when the surface is looked at from the direction of the positive <em>x</em> axis.
Sometimes a more pleasing visualization is obtained when this rotations are
specified when the surface is loaded.</p>
</div></blockquote>
<p><strong>y-rotation (deg)</strong></p>
<blockquote>
<div><p>Specifies the initial rotation of the surface around the <em>y</em> (back
to front) axis.</p>
</div></blockquote>
<p><strong>z-rotation (deg)</strong></p>
<blockquote>
<div><p>Specifies the initial rotation of the surface around the <em>z</em> (bottom
to up) axis.</p>
</div></blockquote>
</div>
<div class="section" id="the-patch-selection-dialog">
<h3><a class="toc-backref" href="#id53">The patch selection dialog</a><a class="headerlink" href="#the-patch-selection-dialog" title="Permalink to this headline">¶</a></h3>
<p>The surface patches are loaded with help of the patch selection
dialog, which appears when File/Load surface patch… or File/Load morphing surface patch… is selected. This dialog,
shown in <a class="reference internal" href="#cacheejd"><span class="std std-ref">The patch selection dialog.</span></a>, contains a list of available patches
and the possibility to rotate the a flat patch counterclockwise
by the specified number of degrees from its original orientation.
The patch is automatically associated with the correct hemisphere
on the basis of the two first letters in the patch name (lh = left
hemisphere, rh = right hemisphere).</p>
<div class="figure align-default" id="id14">
<span id="cacheejd"></span><img alt="patch selection dialog" src="../../_images/patch_selection_dialog.png" />
<p class="caption"><span class="caption-text">The patch selection dialog.</span><a class="headerlink" href="#id14" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="controlling-the-surface-display">
<span id="caccabea"></span><h3><a class="toc-backref" href="#id54">Controlling the surface display</a><a class="headerlink" href="#controlling-the-surface-display" title="Permalink to this headline">¶</a></h3>
<p>The main surface display has a section called Adjust view , which has the controls shown in <a class="reference internal" href="#caccfcgj"><span class="std std-ref">Surface controls.</span></a>:</p>
<p><strong>L and R</strong></p>
<blockquote>
<div><p>Select the left or right hemisphere surface loaded through File/Load surface… .</p>
</div></blockquote>
<p><strong>B</strong></p>
<blockquote>
<div><p>Display the surfaces for both hemispheres.</p>
</div></blockquote>
<p><strong>M</strong></p>
<blockquote>
<div><p>Display the surfaces loaded File/Load morphing surface… according to the L, R, and B hemisphere
selectors</p>
</div></blockquote>
<p><strong>P</strong></p>
<blockquote>
<div><p>Select the patch associated with the currently selected surface. For this
to work, either L or R must be selected.</p>
</div></blockquote>
<p><strong>Option menu</strong></p>
<blockquote>
<div><p>Select one of the predefined view orientations, see <a class="reference internal" href="#cacccgdb"><span class="std std-ref">Defining viewing orientations</span></a>, below.</p>
</div></blockquote>
<p><strong>Arrow buttons</strong></p>
<blockquote>
<div><p>Rotate the surface by increments specified in degrees in the text
box next to the arrows.</p>
</div></blockquote>
<div class="figure align-default" id="id15">
<span id="caccfcgj"></span><img alt="Surface controls" src="../../_images/surface_controls.png" />
<p class="caption"><span class="caption-text">Surface controls.</span><a class="headerlink" href="#id15" title="Permalink to this image">¶</a></p>
</div>
<p>The display can be also adjusted
using keyboard shortcuts, which are available once you click in
the main surface display with the left mouse button to make it active:</p>
<p><strong>Arrow keys</strong></p>
<blockquote>
<div><p>Rotate the surface by increments specified in degrees in the Adjust View section.</p>
</div></blockquote>
<p><strong>+</strong></p>
<blockquote>
<div><p>Enlarge the image.</p>
</div></blockquote>
<p><strong>-</strong></p>
<blockquote>
<div><p>Reduce the image.</p>
</div></blockquote>
<p><strong>=</strong></p>
<blockquote>
<div><p>Return to the default size.</p>
</div></blockquote>
<p><strong>r</strong></p>
<blockquote>
<div><p>Rotate the image one full revolution around z axis using the currently
specified rotation step. This is useful for producing a sequence
of images when automatic image saving is on, see <a class="reference internal" href="#cacbebgc"><span class="std std-ref">Producing output files</span></a>.</p>
</div></blockquote>
<p><strong>s</strong></p>
<blockquote>
<div><p>Produces a raster image file which contains a snapshot of the currently
displayed image. For information on snapshot mode, see <a class="reference internal" href="#cacbebgc"><span class="std std-ref">Producing output files</span></a>.</p>
</div></blockquote>
<p><strong>.</strong></p>
<blockquote>
<div><p>Stops the rotation invoked with the ‘r’ key, see
above.</p>
</div></blockquote>
<p>In addition, the mouse wheel or trackball can be used to
rotate the image. If a trackball is available, <em>e.g.</em>,
with the Apple MightyMouse, the image can be rotated up and down
or left and right with the trackball. With a mouse wheel the image
will rotated up and down when the wheel is rotated. Image rotation
in the left-right direction is achieved by holding down the shift key
when rotating the wheel. The shift key
has the same effect on trackball operation.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The trackball and mouse wheel functionality    is dependent on your X server settings. On Mac OSX these settings    are normally correct by default but on a LINUX system some adjustments    to the X server settings maybe necessary. Consult your system administrator    or Google for details.</p>
</div>
</div>
<div class="section" id="selecting-vertices">
<span id="chdiehdh"></span><h3><a class="toc-backref" href="#id55">Selecting vertices</a><a class="headerlink" href="#selecting-vertices" title="Permalink to this headline">¶</a></h3>
<p>When you click on the surface with the left mouse button,
the corresponding vertex number and the associated value will be
displayed on the message line at the bottom of the display. In addition,
the time course at this vertex will be shown, see <a class="reference internal" href="#chdghdge"><span class="std std-ref">Timecourses at vertices</span></a>.
You can also select a vertex by entering the vertex number to the
text field at the bottom of the display. If the MRI viewer is displayed and Track surface location in MRI is selected in the MRI viewer control dialog, the cursor in the MRI slices
will also follow the vertex selection, see <a class="reference internal" href="#cacchcbf"><span class="std std-ref">Working with the MRI viewer</span></a>.</p>
<p>The View menu choice Show coordinates… brings up a window which shows
the coordinates of the selected vertex on the <em>white matter</em> surface, <em>i.e.</em>,
lh.white and rh.white FreeSurfer surfaces. If morphing surfaces
have been loaded, the coordinates of both the subject being analyzed
and those of the morphing subject will be shown. The Coordinates window
includes the following lines:</p>
<p><strong>MEG head</strong></p>
<blockquote>
<div><p>Indicates the vertex location in the <em>MEG head</em> coordinates.
This entry will be present only if MEG/EEG data have been loaded.</p>
</div></blockquote>
<p><strong>Surface RAS (MRI)</strong></p>
<blockquote>
<div><p>Indicates the vertex location in the <em>Surface RAS</em> coordinates.
This is the native coordinate system of the surfaces and this entry
will always be present.</p>
</div></blockquote>
<p><strong>MNI Talairach</strong></p>
<blockquote>
<div><p>Shows the location in MNI Talairach coordinates. To be present,
the MRI data of the subject must be in the mgz format (usually true with
any recent FreeSurfer version) and the Talairach transformation
must be appropriately defined during the <em>FreeSurfer</em> reconstruction
workflow.</p>
</div></blockquote>
<p><strong>Talairach</strong></p>
<blockquote>
<div><p>Shows the location in the <em>FreeSurfer</em> Talairach
coordinates which give a better match to the Talairach atlas.</p>
</div></blockquote>
<p>The above coordinate systems are discussed in detail in <a class="reference internal" href="../source_localization/forward.html#chdedfib"><span class="std std-ref">MEG/EEG and MRI coordinate systems</span></a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>By default, the tksurfer program,    part of the FreeSurfer package, shows    the vertex locations on the <em>orig</em> rather than <em>white</em> surfaces.    Therefore, the coordinates shown in mne_analyze and tksurfer are    by default slightly different (usually by &lt; 1 mm). To make the    two programs consistent, you can start tksurfer with    the <code class="docutils literal notranslate"><span class="pre">-orig</span> <span class="pre">white</span></code> option.</p>
</div>
</div>
<div class="section" id="defining-viewing-orientations">
<span id="cacccgdb"></span><h3><a class="toc-backref" href="#id56">Defining viewing orientations</a><a class="headerlink" href="#defining-viewing-orientations" title="Permalink to this headline">¶</a></h3>
<p>The list of viewing orientations available in the Adjust View section of the main surface display is controlled
by a text file. The system-wide defaults reside in <code class="docutils literal notranslate"><span class="pre">$MNE_ROOT/share/mne/mne_analyze/eyes</span></code> .
If the file <code class="docutils literal notranslate"><span class="pre">$HOME/.mne/eyes</span></code> exists, it is used instead.</p>
<p>All lines in the eyes file starting with # are comments.
The view orientation definition lines have the format:</p>
<p>&lt;<em>name</em>&gt;:&lt;<em>Left</em>&gt;:&lt;<em>Right</em>&gt;:&lt;<em>Left up</em>&gt;:&lt;<em>Right up</em>&gt; ,</p>
<p>where</p>
<p><strong>&lt;*name*&gt;</strong></p>
<blockquote>
<div><p>is the name of this viewing orientation,</p>
</div></blockquote>
<p><strong>&lt;*Left*&gt;</strong></p>
<blockquote>
<div><p>specifies the coordinates of the viewing ‘eye’ location
for the left hemisphere, separated by spaces,</p>
</div></blockquote>
<p><strong>&lt;*Right*&gt;</strong></p>
<blockquote>
<div><p>specifies the coordinates of the viewing location for the right
hemisphere,</p>
</div></blockquote>
<p><strong>&lt;*Left up*&gt;</strong></p>
<blockquote>
<div><p>specifies the direction which is pointing up in the image for left hemisphere,
and</p>
</div></blockquote>
<p><strong>&lt;*Right up*&gt;</strong></p>
<blockquote>
<div><p>is the corresponding up vector for the right hemisphere.</p>
</div></blockquote>
<p>All values are given in a coordinate system where positive <em>x</em> points
to the right, positive <em>y</em> to the front, and
positive <em>z</em> up. The lengths of the vectors specified
for each of the four items do not matter, since parallel projection is
used and the up vectors will be automatically normalized. The up
vectors are usually 0 0 1, <em>i.e.</em>, pointing to
the positive <em>z</em> direction unless the view is
directly from above or below or if some special effect is desired.</p>
<p>The names of viewing orientations should be less than 9 characters
long. Otherwise, the middle pane of the main display will not be
able to accommodate all the controls. The widths of the main window
panes can be adjusted from the squares at the vertical sashes separating
the panes.</p>
</div>
<div class="section" id="adjusting-lighting">
<h3><a class="toc-backref" href="#id57">Adjusting lighting</a><a class="headerlink" href="#adjusting-lighting" title="Permalink to this headline">¶</a></h3>
<p>The scenes shown in the main surface display and the viewer,
described in <a class="reference internal" href="#caceffjf"><span class="std std-ref">The viewer</span></a>, are lit by fixed diffuse ambient
lighting and a maximum of eight light sources. The states, locations,
and colors of these light sources can be adjusted from the lighting
adjustment dialog shown in <a class="reference internal" href="#cacddhai"><span class="std std-ref">The lighting adjustment dialog.</span></a>, which can be
accessed through the Adjust/Lights… menu
choice. The colors of the lights can be adjusted numerically or
using a color adjustment dialog accessible through the Color… buttons.</p>
<div class="figure align-default" id="id16">
<span id="cacddhai"></span><img alt="lighting adjustment dialog" src="../../_images/adjust_lights.png" />
<p class="caption"><span class="caption-text">The lighting adjustment dialog.</span><a class="headerlink" href="#id16" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="producing-output-files">
<span id="cacbebgc"></span><h3><a class="toc-backref" href="#id58">Producing output files</a><a class="headerlink" href="#producing-output-files" title="Permalink to this headline">¶</a></h3>
<div class="figure align-default" id="id17">
<span id="cacfbihd"></span><img alt="Graphics output controls" src="../../_images/hardcopy_controls.png" />
<p class="caption"><span class="caption-text">Graphics output controls.</span><a class="headerlink" href="#id17" title="Permalink to this image">¶</a></p>
</div>
<p>Three types of output files can be produced from the main
surface display using the graphics output buttons shown in <a class="reference internal" href="#cacfbihd"><span class="std std-ref">Graphics output controls.</span></a>:</p>
<p><strong>w files (w button)</strong></p>
<blockquote>
<div><p>These files are simple binary files, which contain a list of vertex numbers
on the cortical surface and their current data values. The w files
will be automatically tagged with <code class="docutils literal notranslate"><span class="pre">-lh.w</span></code> and <code class="docutils literal notranslate"><span class="pre">-rh.w</span></code> .
They will only contain vertices which currently have a nonzero value.</p>
</div></blockquote>
<p><strong>Graphics snapshots (img button)</strong></p>
<blockquote>
<div><p>These files will contain an exact copy of the image in tif or rgb
formats. The output format and the output mode is selected from
the image saving dialog shown in <a class="reference internal" href="#caccefgi"><span class="std std-ref">File type selection in the image saving dialog.</span></a>. For more
details, see <a class="reference internal" href="#cacijfii"><span class="std std-ref">Image output modes</span></a>. If snapshot or automatic image
saving mode is in effect, thee img button
terminates this mode.</p>
</div></blockquote>
<p><strong>QuickTime (TM) movies (mov button)</strong></p>
<blockquote>
<div><p>These files will contain a sequence of images as a QuickTime (TM) movie
file. The movie saving dialog shown in <a class="reference internal" href="#cacffbbd"><span class="std std-ref">The controls in the movie saving dialog.</span></a> specifies the
time range and the interval between the frames as well as the quality
of the movies, which is restricted to the range 25…100. The size
of the QuickTime file produced is approximately proportional to
the quality.</p>
</div></blockquote>
<div class="figure align-default" id="id18">
<span id="caccefgi"></span><img alt="File type selection in the image saving dialog" src="../../_images/image_dialog.png" />
<p class="caption"><span class="caption-text">File type selection in the image saving dialog.</span><a class="headerlink" href="#id18" title="Permalink to this image">¶</a></p>
</div>
<div class="figure align-default" id="id19">
<span id="cacffbbd"></span><img alt="The controls in the movie saving dialog" src="../../_images/movie_dialog.png" />
<p class="caption"><span class="caption-text">The controls in the movie saving dialog.</span><a class="headerlink" href="#id19" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="image-output-modes">
<span id="cacijfii"></span><h3><a class="toc-backref" href="#id59">Image output modes</a><a class="headerlink" href="#image-output-modes" title="Permalink to this headline">¶</a></h3>
<p>The image saving dialog shown in <a class="reference internal" href="#caccefgi"><span class="std std-ref">File type selection in the image saving dialog.</span></a> selects
the format of the image files produced and the image output mode.
The buttons associated with different image format change the file
name filter in the dialog to display files of desired type. However,
the final output format is defined by the ending of the file name
in the Selection text field as
follows:</p>
<p><strong>jpg</strong></p>
<blockquote>
<div><p>JPEG (Joint Photographic Experts Group) format. Best quality jpeg is
always produced.</p>
</div></blockquote>
<p><strong>tif or tiff</strong></p>
<blockquote>
<div><p>Uncompressed TIFF (Tagged Image File Format).</p>
</div></blockquote>
<p><strong>rgb</strong></p>
<blockquote>
<div><p>RGB format.</p>
</div></blockquote>
<p><strong>pdf</strong></p>
<blockquote>
<div><p>Portable Document File format.</p>
</div></blockquote>
<p><strong>png</strong></p>
<blockquote>
<div><p>Portable Network Graphics format.</p>
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Only TIFF and RGB output routines are compiled    into mne_analyze . For other output    formats to work, the following programs must be present in your    system: tifftopdf, tifftopnm, pnmtojpeg, and pnmtopng.</p>
</div>
<p>There are three image saving modes which can be selected
from the option menu labelled Output mode :</p>
<p><strong>Single</strong></p>
<blockquote>
<div><p>When OK is clicked one file containing
the present image is output.</p>
</div></blockquote>
<p><strong>Snapshot</strong></p>
<blockquote>
<div><p>A new image file is produced every time <code class="docutils literal notranslate"><span class="pre">s</span></code> is pressed
in the image window, see <a class="reference internal" href="#caccabea"><span class="std std-ref">Controlling the surface display</span></a> and <a class="reference internal" href="#cacfddcb"><span class="std std-ref">Overview</span></a>. The image file name is used as the stem of
the output files. For example, if the name is, <code class="docutils literal notranslate"><span class="pre">sample.jpg</span></code> ,
the output files will be <code class="docutils literal notranslate"><span class="pre">sample_shot_001.jpg</span></code> , <code class="docutils literal notranslate"><span class="pre">sample_shot_002.jpg</span></code> , <em>etc.</em></p>
</div></blockquote>
<p><strong>Automatic</strong></p>
<blockquote>
<div><p>A new image file is produced every time the image window changes.
The image file name is used as the stem of the output files. For
example, if the name is, <code class="docutils literal notranslate"><span class="pre">sample.jpg</span></code> , the output files
will be <code class="docutils literal notranslate"><span class="pre">sample_001.jpg</span></code> , <code class="docutils literal notranslate"><span class="pre">sample_002.jpg</span></code> , <em>etc.</em></p>
</div></blockquote>
</div>
</div>
<div class="section" id="morphing">
<span id="cacgbeib"></span><h2><a class="toc-backref" href="#id60">Morphing</a><a class="headerlink" href="#morphing" title="Permalink to this headline">¶</a></h2>
<p>The displayed surface distributions can be morphed to another
subject’s brain using the spherical morphing procedure,
see <a class="reference internal" href="../source_localization/c_morph.html#c-legacy-ch-morph"><span class="std std-ref">Morphing and averaging</span></a>. In addition to the morphing surfaces loaded
through File/Load morphing surface… surface
patches for the same subject can be loaded through File/Load morphing surface patch… . Switching between main and morphing
surfaces is discussed in <a class="reference internal" href="#caccabea"><span class="std std-ref">Controlling the surface display</span></a>.</p>
<p>Any labels displayed are visible on any of the surfaces displayed
in the main surface display. Time points can be picked in any of
the surfaces. As a result, the corresponding timecourses will be
shown in the MNE amplitude window, see <a class="reference internal" href="#cacccfhh"><span class="std std-ref">Inquiring timecourses</span></a>.</p>
</div>
<div class="section" id="the-viewer">
<span id="caceffjf"></span><h2><a class="toc-backref" href="#id61">The viewer</a><a class="headerlink" href="#the-viewer" title="Permalink to this headline">¶</a></h2>
<div class="section" id="cacfddcb">
<span id="id1"></span><h3><a class="toc-backref" href="#id62">Overview</a><a class="headerlink" href="#cacfddcb" title="Permalink to this headline">¶</a></h3>
<div class="figure align-default" id="id20">
<span id="cacjdffh"></span><img alt="viewer window" src="../../_images/viewer.png" />
<p class="caption"><span class="caption-text">The viewer window with a visualization of MEG and EEG contour maps.</span><a class="headerlink" href="#id20" title="Permalink to this image">¶</a></p>
</div>
<p>When Windows/Show viewer… is
selected, the following additional surfaces will be loaded:</p>
<ul class="simple">
<li><p>The left and right hemisphere pial surfaces,</p></li>
<li><p>The surface representing the inner helmet shaped wall of the
dewar on which the MEG sensors are located,</p></li>
<li><p>The scalp surface, and</p></li>
<li><p>The BEM surfaces.</p></li>
</ul>
<p>The scalp surface is loaded from the file <code class="docutils literal notranslate"><span class="pre">bem/</span></code> &lt;<em>subject</em>&gt;``-head.fif`` under
the subject’s FreeSurfer directory. This surface is automatically
prepared if you use the watershed algorithm as described in <a class="reference internal" href="../appendix/bem_model.html#babbdhag"><span class="std std-ref">Using the watershed algorithm</span></a>.
If you have another source for the head triangulation you can use
the utility mne_surf2bem to create
the fif format scalp surface file, see <a class="reference internal" href="../source_localization/c_forward.html#c-legacy-behcaccj"><span class="std std-ref">Creating the BEM meshes</span></a>.</p>
<p>If a file called <code class="docutils literal notranslate"><span class="pre">bem/</span></code> &lt;<em>subject</em>&gt;``-bem.fif`` under
the subject’s FreeSurfer directory is present, mne_analyze tries
to load the BEM surface triangulations from there. This file can
be a symbolic link to one of the <code class="docutils literal notranslate"><span class="pre">-bem.files</span></code> created
by mne_prepare_bem_model , see <a class="reference internal" href="../source_localization/c_forward.html#c-legacy-chdjfheb"><span class="std std-ref">Computing the BEM geometry data</span></a>.
If the BEM file contains a head surface triangulation, it will be
used instead of the one present in the <code class="docutils literal notranslate"><span class="pre">bem/</span></code> &lt;<em>subject</em>&gt;``-head.fif`` file.</p>
<p>Once all required surfaces have been loaded, the viewer window
shown in <a class="reference internal" href="#cacjdffh"><span class="std std-ref">The viewer window with a visualization of MEG and EEG contour maps.</span></a> pops up. In addition to the display
canvas, the viewer has Adjust view controls
similar to the main surface display and options for graphics output.
The Adjust view controls do not
have the option menu for standard viewpoints and has two additional
buttons:</p>
<p>The output options only include graphics output as snapshots
(img ) or as movies (mov ).</p>
<p><strong>Options…</strong></p>
<blockquote>
<div><p>This button pops up the viewer options window which controls the appearance
of the viewer window.</p>
</div></blockquote>
<p><strong>Rescale</strong></p>
<blockquote>
<div><p>This button adjusts the contour level spacing in the magnetic field and
electric potential contour maps so that the number of contour lines
is reasonable.</p>
</div></blockquote>
<p><strong>Reload</strong></p>
<blockquote>
<div><p>Checks the modification dates of the surface files loaded to viewer and
reloads the data if the files have been changed. This is useful, <em>e.g.</em>,
for display of different BEM tessellations.</p>
</div></blockquote>
<p>The display can be also adjusted
using keyboard shortcuts, which are available once you click in
the viewer display with the left mouse button:</p>
<p><strong>Arrow keys</strong></p>
<blockquote>
<div><p>Rotate the surface by increments specified in degrees in the Adjust View section.</p>
</div></blockquote>
<p><strong>+</strong></p>
<blockquote>
<div><p>Enlarge the image.</p>
</div></blockquote>
<p><strong>-</strong></p>
<blockquote>
<div><p>Reduce the image.</p>
</div></blockquote>
<p><strong>=</strong></p>
<blockquote>
<div><p>Return to the default size.</p>
</div></blockquote>
<p><strong>r</strong></p>
<blockquote>
<div><p>Rotate the image one full revolution around z axis using the currently
specified rotation step. This is useful for producing a sequence
of images when automatic image saving is on, see <a class="reference internal" href="#cacbebgc"><span class="std std-ref">Producing output files</span></a>.</p>
</div></blockquote>
<p><strong>s</strong></p>
<blockquote>
<div><p>Produces a image file which contains a snapshot of the currently displayed
image. For information on snapshot mode, see <a class="reference internal" href="#cacbebgc"><span class="std std-ref">Producing output files</span></a>.</p>
</div></blockquote>
<p><strong>.</strong></p>
<blockquote>
<div><p>Stops the rotation invoked with the ‘r’ key, see
above.</p>
</div></blockquote>
<p>The left mouse button can be also used to inquire estimated
magnetic field potential values on the helmet and head surfaces
if the corresponding maps have been calculated and displayed.</p>
<p>In addition, the mouse wheel or trackball can be used to
rotate the image. If a trackball is available, <em>e.g.</em>,
with the Apple MightyMouse, the image can be rotated up and down
or left and right with the trackball. With a mouse wheel the image
will rotated up and down when the wheel is rotated. Image rotation
in the left-right direction is achieved by holding down the shift key
when rotating the wheel. The shift key
has the same effect on trackball operation.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The trackball and mouse wheel functionality    is dependent on your X server settings. On Mac OSX these settings    are normally correct by default but on a LINUX system some adjustments    to the X server settings maybe necessary. Consult your system administrator    or Google for details.</p>
</div>
</div>
<div class="section" id="viewer-options">
<span id="cachgdea"></span><h3><a class="toc-backref" href="#id63">Viewer options</a><a class="headerlink" href="#viewer-options" title="Permalink to this headline">¶</a></h3>
<div class="figure align-default" id="id21">
<img alt="viewer options" src="../../_images/viewer_options.png" />
<p class="caption"><span class="caption-text">The viewer options window</span><a class="headerlink" href="#id21" title="Permalink to this image">¶</a></p>
</div>
<p>The viewer options window shown above contains three main
sections to control the appearance of the viewer:</p>
<ul class="simple">
<li><p>Selectors for various items to show,</p></li>
<li><p>Options for some of the items, and</p></li>
<li><p>Control of the color and transparency of the items, if applicable.
The color can be adjusted either by entering numeric values in the
range 0…1 or with help of a color editor which appears from the Color… button.
The transparency value has the same range as the other color components,
zero indicating a fully transparent (invisible) surface and one a
fully opaque one.</p></li>
</ul>
<p>The available items are:</p>
<p><strong>Left hemi</strong></p>
<blockquote>
<div><p>The pial surface of the left hemisphere. This surface can be made transparent.
Naturally, this surface will only be visible if the scalp is made
transparent.</p>
</div></blockquote>
<p><strong>Right hemi</strong></p>
<blockquote>
<div><p>The pial surface of the right hemisphere.</p>
</div></blockquote>
<p><strong>Inner skull</strong></p>
<blockquote>
<div><p>The inner skull surface. This surface can be made transparent. If parts
of the pial surface are outside of the inner skull surface, they will
be visible, indicating that the inner skull surface is obviously inside
the inner skull. Note that this criterion is more conservative than
the one imposed during the computation of the forward solution since
the source space points are located on the white matter surface
rather than on the pial surface. This surface can be displayed only
if the BEM file is present, see <a class="reference internal" href="#cacfddcb"><span class="std std-ref">Overview</span></a>.</p>
</div></blockquote>
<p><strong>Outer skull</strong></p>
<blockquote>
<div><p>The outer skull surface. This surface can be made transparent. This surface can
be displayed only if the BEM file is present and contains the outer
skull surface, see <a class="reference internal" href="#cacfddcb"><span class="std std-ref">Overview</span></a>.</p>
</div></blockquote>
<p><strong>Scalp</strong></p>
<blockquote>
<div><p>The scalp surface. This surface can be made transparent. The display
of this surface requires that the scalp triangulation file is present,
see <a class="reference internal" href="#cacfddcb"><span class="std std-ref">Overview</span></a>.</p>
</div></blockquote>
<p><strong>Digitizer data</strong></p>
<blockquote>
<div><p>The 3D digitizer data collected before the MEG/EEG acquisition. These
data are loaded from File/Load digitizer data… .
The display can be restricted to HPI coil locations and cardinal
landmarks with the option. The digitizer points are shown as disks
whose radius is equal to the distance of the corresponding point
from the scalp surface. Points outside the scalp are shown in red
and those inside in blue. Distinct shades of cold and warm colors
are used for the fiducial landmarks. The HPI coils are shown in
green. Further information on these data and their use in coordinate
system alignment is given in <a class="reference internal" href="#cacehgcd"><span class="std std-ref">Coordinate frame alignment</span></a>.</p>
</div></blockquote>
<p><strong>Helmet</strong></p>
<blockquote>
<div><p>The MEG measurement surface, <em>i.e.</em>, inner surface
of the dewar.</p>
</div></blockquote>
<p><strong>EEG electrodes</strong></p>
<blockquote>
<div><p>The EEG electrode locations. These will be only available if your data
set contains EEG channels.</p>
</div></blockquote>
<p><strong>MEG sensors</strong></p>
<blockquote>
<div><p>Outlines of MEG sensors.</p>
</div></blockquote>
<p><strong>MEG field map</strong></p>
<blockquote>
<div><p>Estimated contour map of the magnetic field component normal to the
helmet surface or normal to the scalp, see <a class="reference internal" href="#cacicdga"><span class="std std-ref">Magnetic field and electric potential maps</span></a>.</p>
</div></blockquote>
<p><strong>EEG potential map</strong></p>
<blockquote>
<div><p>Interpolated EEG potential map on the scalp surface, see <a class="reference internal" href="#cacicdga"><span class="std std-ref">Magnetic field and electric potential maps</span></a>.</p>
</div></blockquote>
<p><strong>Activity estimates</strong></p>
<blockquote>
<div><p>Current estimates on the pial surface.</p>
</div></blockquote>
</div>
</div>
<div class="section" id="magnetic-field-and-electric-potential-maps">
<span id="cacicdga"></span><h2><a class="toc-backref" href="#id64">Magnetic field and electric potential maps</a><a class="headerlink" href="#magnetic-field-and-electric-potential-maps" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id2">
<h3><a class="toc-backref" href="#id65">Overview</a><a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<p>In mne_analyze , the magnetic
field and potential maps displayed in the viewer window are computed
using an MNE-based interpolation technique. This approach involves
the following steps:</p>
<ul class="simple">
<li><p>Establish an inverse operator to compute
a minimum norm solution on a spherical surface using a spherically
symmetric forward model. Instead of assuming a discrete grid of
sources, a continuous distribution of tangential currents is employed.
In this case the lead field dot products can be computed in closed
form. Separate solutions are computed for MEG and EEG.</p></li>
<li><p>The normal component of the magnetic field or the electric
potential on the helmet or head surface is computed from the MEG-based
and EEG-based MNE. Since the MNE predicts the original measurements
accurately, it can also interpolate and extrapolate the data reliably.
The grid of interpolation or extrapolation points can be located
on the helmet or scalp surface for MEG and on the scalp surface
for EEG.</p></li>
</ul>
<p>The magnetic field and potential maps appear automatically
whenever they are enabled from the viewer options, see <a class="reference internal" href="#cachgdea"><span class="std std-ref">Viewer options</span></a>.</p>
</div>
<div class="section" id="technical-description">
<span id="cacgfbci"></span><h3><a class="toc-backref" href="#id66">Technical description</a><a class="headerlink" href="#technical-description" title="Permalink to this headline">¶</a></h3>
<p>Let <span class="math notranslate nohighlight">\(x_k\)</span> be an MEG or an EEG
signal at channel <span class="math notranslate nohighlight">\(k = 1 \dotso N\)</span>. This signal
is related to the primary current distribution <span class="math notranslate nohighlight">\(J^p(r)\)</span> through
the lead field <span class="math notranslate nohighlight">\(L_k(r)\)</span>:</p>
<div class="math notranslate nohighlight">
\[x_k = \int_G {L_k(r) \cdot J^p(r)}\,dG\ ,\]</div>
<p>where the integration space <span class="math notranslate nohighlight">\(G\)</span> in
our case is a spherical surface. The oblique boldface characters
denote three-component locations vectors and vector fields.</p>
<p>The inner product of two leadfields is defined as:</p>
<div class="math notranslate nohighlight">
\[\langle L_j \mid L_k \rangle = \int_G {L_j(r) \cdot L_k(r)}\,dG\ ,\]</div>
<p>These products constitute the Gram matrix <span class="math notranslate nohighlight">\(\Gamma_{jk} = \langle L_j \mid L_k \rangle\)</span>.
The minimum -norm estimate can be expressed as a weighted sum of
the lead fields:</p>
<div class="math notranslate nohighlight">
\[J^* = w^T L\ ,\]</div>
<p>where <span class="math notranslate nohighlight">\(w\)</span> is a weight vector
and <span class="math notranslate nohighlight">\(L\)</span> is a vector composed of the
continuous lead-field functions. The weights are determined by the
requirement</p>
<div class="math notranslate nohighlight">
\[x = \langle L \mid J^* \rangle = \Gamma w\ ,\]</div>
<p>i.e., the estimate must predict the measured signals. Hence,</p>
<div class="math notranslate nohighlight">
\[w = \Gamma^{-1} x\ .\]</div>
<p>However, the Gram matrix is ill conditioned and regularization
must be employed to yield a stable solution. With help of the SVD</p>
<div class="math notranslate nohighlight">
\[\Gamma = U \Lambda V^T\]</div>
<p>a regularized minimum-norm can now found by replacing the
data matching condition by</p>
<div class="math notranslate nohighlight">
\[x^{(p)} = \Gamma^{(p)} w^{(p)}\ ,\]</div>
<p>where</p>
<div class="math notranslate nohighlight">
\[x^{(p)} = (U^{(p)})^T x \text{  and  } \Gamma^{(p)} = (U^{(p)})^T \Gamma\ ,\]</div>
<p>respectively. In the above, the columns of <span class="math notranslate nohighlight">\(U^{(p)}\)</span> are
the first <em>k</em> left singular vectors of <span class="math notranslate nohighlight">\(\Gamma\)</span>.
The weights of the regularized estimate are</p>
<div class="math notranslate nohighlight">
\[w^{(p)} = V \Lambda^{(p)} U^T x\ ,\]</div>
<p>where <span class="math notranslate nohighlight">\(\Lambda^{(p)}\)</span> is diagonal with</p>
<div class="math notranslate nohighlight">
\[\begin{split}\Lambda_{jj}^{(p)} = \Bigg\{ \begin{array}{l}
    1/{\lambda_j},j \leq p\\
    \text{otherwise}
\end{array}\end{split}\]</div>
<p><span class="math notranslate nohighlight">\(\lambda_j\)</span> being the <span class="math notranslate nohighlight">\(j\)</span> th singular
value of <span class="math notranslate nohighlight">\(\Gamma\)</span>. The truncation point <span class="math notranslate nohighlight">\(p\)</span> is
selected in mne_analyze by specifying
a tolerance <span class="math notranslate nohighlight">\(\varepsilon\)</span>, which is used to
determine <span class="math notranslate nohighlight">\(p\)</span> such that</p>
<div class="math notranslate nohighlight">
\[1 - \frac{\sum_{j = 1}^p {\lambda_j}}{\sum_{j = 1}^N {\lambda_j}} &lt; \varepsilon\]</div>
<p>The extrapolated and interpolated magnetic field or potential
distribution estimates <span class="math notranslate nohighlight">\(\hat{x'}\)</span> in a virtual
grid of sensors can be now easily computed from the regularized
minimum-norm estimate. With</p>
<div class="math notranslate nohighlight">
\[\Gamma_{jk}' = \langle L_j' \mid L_k \rangle\ ,\]</div>
<p>where <span class="math notranslate nohighlight">\(L_j'\)</span> are the lead fields
of the virtual sensors,</p>
<div class="math notranslate nohighlight">
\[\hat{x'} = \Gamma' w^{(k)}\ .\]</div>
</div>
<div class="section" id="field-mapping-preferences">
<h3><a class="toc-backref" href="#id67">Field mapping preferences</a><a class="headerlink" href="#field-mapping-preferences" title="Permalink to this headline">¶</a></h3>
<p>The parameters of the field maps can be adjusted from the Field mapping preferences dialog shown in <a class="reference internal" href="#cacgdcga"><span class="std std-ref">Field mapping preferences dialog.</span></a> which is accessed through the Adjust/Field mapping… menu item.</p>
<div class="figure align-default" id="id22">
<span id="cacgdcga"></span><img alt="Field mapping preferences dialog" src="../../_images/field_mapping_pref.png" />
<p class="caption"><span class="caption-text">Field mapping preferences dialog.</span><a class="headerlink" href="#id22" title="Permalink to this image">¶</a></p>
</div>
<p>The Field mapping preferences dialog
has the following controls, arranged in MEG , EEG ,
and common sections:</p>
<p><strong>SVD truncation at</strong></p>
<blockquote>
<div><p>Adjusts the smoothing of the field and potential patterns. This parameter
specifies the eigenvalue truncation point as described in <a class="reference internal" href="#cacgfbci"><span class="std std-ref">Technical description</span></a>. Smaller values correspond to noisier field
patterns with less smoothing.</p>
</div></blockquote>
<p><strong>Use default origin</strong></p>
<blockquote>
<div><p>The location of the origin of the spherical head model used in these computations
defaults to (0 0 40) mm. If this box is unchecked the origin coordinate
fields are enabled to enter a custom origin location. Usually the
default origin is appropriate.</p>
</div></blockquote>
<p><strong>Downsampling grade</strong></p>
<blockquote>
<div><p>This option only applies to EEG potential maps and MEG field maps
extrapolated to the head surface and controls the number of virtual
electrodes or point magnetometers used in the interpolation. Allowed
values are: 2 (162 locations), 3 (642 locations), and 4 (2562 locations).
Usually the default value 3 is appropriate.</p>
</div></blockquote>
<p><strong>Number of smoothsteps</strong></p>
<blockquote>
<div><p>This option controls how much smoothing, see <a class="reference internal" href="../source_localization/c_morph.html#chdebahh"><span class="std std-ref">About smoothing</span></a>,
is applied to the interpolated data before computing the contours.
Usually the default value is appropriate.</p>
</div></blockquote>
<p><strong>Reconstruction surface radius</strong></p>
<blockquote>
<div><p>Distance of the spherical reconstruction surface from the sphere model
origin. Usually default value is appropriate. For children it may
be necessary to make this value smaller.</p>
</div></blockquote>
</div>
</div>
<div class="section" id="working-with-current-estimates">
<span id="cacbhdbf"></span><h2><a class="toc-backref" href="#id68">Working with current estimates</a><a class="headerlink" href="#working-with-current-estimates" title="Permalink to this headline">¶</a></h2>
<div class="section" id="preferences">
<span id="cachffij"></span><h3><a class="toc-backref" href="#id69">Preferences</a><a class="headerlink" href="#preferences" title="Permalink to this headline">¶</a></h3>
<p>The characteristics of the current estimates displayed are
controlled from the MNE preferences dialog
which pops up from Adjust/Estimates… .</p>
<p>This dialog, shown in <a class="reference internal" href="#cacjgcdh"><span class="std std-ref">Estimate preferences dialog.</span></a>, has the following
controls:</p>
<p><strong>SNR estimate</strong></p>
<blockquote>
<div><p>This controls the regularization of the estimate, i.e., the amount
of allowed mismatch between the measured data and those predicted by
the estimated current distribution. Smaller SNR means larger allowed
mismatch. Typical range of SNR values is 1…7. As discussed in <a class="reference internal" href="../source_localization/inverse.html#cbbdjfbj"><span class="std std-ref">Minimum-norm estimates</span></a>,
the SNR value can be translated to the current variance values expressed
in the source-covariance matrix R. This translation is presented
as the equivalent current standard-deviation value</p>
</div></blockquote>
<p><strong>Show</strong></p>
<blockquote>
<div><p>This radio button box selects the quantity to display. MNE is
the minimum norm estimate (estimated value of the current), dSPM is the
noise-normalized MNE, and sLORETA is
another version of the noise-normalized solution which is claimed
to have a smaller location bias than the dSPM.</p>
</div></blockquote>
<p><strong>Mask with</strong></p>
<blockquote>
<div><p>If MNE is selected in the Show radio
button box, it is possible to mask the solution with one of the
statistical maps. The masking map is thresholded at the value given
in the Threshold text field and
the MNE is only shown in areas with statistical values above this threshold.</p>
</div></blockquote>
<p><strong>Value histogram</strong></p>
<blockquote>
<div><p>This part of the dialog shows the distribution of the currently
shown estimate values over the surface. The histogram is colored
to reflect the current scale settings. The fthresh , fmid ,
and fmax values are indicated
with vertical bars. The histogram is updated when the dialog is
popped up and when the estimate type to show changes, not at every
new time point selection. The Refresh button
makes the histogram current at any time.</p>
</div></blockquote>
<p><strong>Color scale</strong></p>
<blockquote>
<div><p>These text fields control the color scale as described in <a class="reference internal" href="#cacggici"><span class="std std-ref">The color scale parameters.</span></a>.</p>
</div></blockquote>
<p><strong>Options</strong></p>
<blockquote>
<div><p>Various options controlling the estimates.</p>
</div></blockquote>
<span id="cacggici"></span><table class="docutils align-default" id="id23">
<caption><span class="caption-text">The color scale parameters.</span><a class="headerlink" href="#id23" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 17%" />
<col style="width: 83%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Parameter</p></th>
<th class="head"><p>Meaning</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>fthresh</p></td>
<td><p>If the value is below this level, it will not be shown.</p></td>
</tr>
<tr class="row-odd"><td><p>fmid</p></td>
<td><p>Positive values at this level will show as red.
Negative values will be dark blue.</p></td>
</tr>
<tr class="row-even"><td><p>fmax</p></td>
<td><p>Positive values at and above this level will be bright
yellow. Negative values will be bright blue.</p></td>
</tr>
<tr class="row-odd"><td><p>fmult</p></td>
<td><p>Apply this multiplier to the above thresholds. Default
is <span class="math notranslate nohighlight">\(1\)</span> for statistical maps and <span class="math notranslate nohighlight">\(1^{-10}\)</span>
for currents (MNE). The vertical bar locations in the
histogram take this multiplier into account but the
values indicated are the threshold parameters without
the multiplier.</p></td>
</tr>
<tr class="row-even"><td><p>tcmult</p></td>
<td><p>The upper limit of the timecourse vertical scale will
be <span class="math notranslate nohighlight">\(tc_{mult}f_{mult}f_{max}\)</span>.</p></td>
</tr>
</tbody>
</table>
<div class="figure align-default" id="id24">
<span id="cacjgcdh"></span><img alt="MNE estimate preferences" src="../../_images/MNE_preferences.png" />
<p class="caption"><span class="caption-text">Estimate preferences dialog.</span><a class="headerlink" href="#id24" title="Permalink to this image">¶</a></p>
</div>
<p>The optional parameters are:</p>
<p><strong>Retain sign</strong></p>
<blockquote>
<div><p>With this option, the sign of the dot product between the current direction
and the cortical surface normal will be used as the sign of the
values to be displayed. This option yields meaningful data only if
a strict or a loose orientation constraint was used in the computation
of the inverse operator decomposition.</p>
</div></blockquote>
<p><strong>Retain normal component only</strong></p>
<blockquote>
<div><p>Consider only the current component normal to the cortical mantle. This
option is not meaningful with completely free source orientations.</p>
</div></blockquote>
<p><strong>Show scale bar</strong></p>
<blockquote>
<div><p>Show the color scale bar at the lower right corner of the display.</p>
</div></blockquote>
<p><strong>Show comments</strong></p>
<blockquote>
<div><p>Show the standard comments at the lower left corner of the display.</p>
</div></blockquote>
<p><strong>Time integr. (ms)</strong></p>
<blockquote>
<div><p>Integration time for each frame (<span class="math notranslate nohighlight">\(\Delta t\)</span>).
Before computing the estimates time integration will be performed
on sensor data. If the time specified for a frame is <span class="math notranslate nohighlight">\(t_0\)</span>,
the integration range will be <span class="math notranslate nohighlight">\(t_0 - ^{\Delta t}/_2 \leq t \leq t_0 + ^{\Delta t}/_2\)</span>.</p>
</div></blockquote>
<p><strong># of smooth steps</strong></p>
<blockquote>
<div><p>Before display, the data will be smoothed using this number of steps,
see <a class="reference internal" href="../source_localization/c_morph.html#chdebahh"><span class="std std-ref">About smoothing</span></a>.</p>
</div></blockquote>
<p><strong>Opacity</strong></p>
<blockquote>
<div><p>The range of this parameter is 0…1. The default value 1 means
that the map overlaid on the cortical surface is completely opaque.
With lower opacities the color of the cortical surface will be visible
to facilitate understanding the underlying folding pattern from
the curvature data displayed.</p>
</div></blockquote>
</div>
<div class="section" id="the-snr-display">
<span id="cacjffee"></span><h3><a class="toc-backref" href="#id70">The SNR display</a><a class="headerlink" href="#the-snr-display" title="Permalink to this headline">¶</a></h3>
<p>The SNR estimate display
shows the SNR estimated from the whitened data in red and the apparent
SNR inferred from the mismatch between the measured and predicted
data in green.</p>
<p>The SNR estimate is computed from the whitened data <span class="math notranslate nohighlight">\(\tilde{x}(t)\)</span>,
related to the measured data <span class="math notranslate nohighlight">\(x(t)\)</span> by</p>
<div class="math notranslate nohighlight">
\[\tilde{x}(t) = C^{-^1/_2} x(t)\ ,\]</div>
<p>where <span class="math notranslate nohighlight">\(C^{-^1/_2}\)</span> is the whitening
operator, introduced in <a class="reference internal" href="../source_localization/inverse.html#chddhage"><span class="std std-ref">Whitening and scaling</span></a>.</p>
<p>The computation of the apparent SNR will be explained in
future revisions of this manual.</p>
</div>
</div>
<div class="section" id="inquiring-timecourses">
<span id="cacccfhh"></span><h2><a class="toc-backref" href="#id71">Inquiring timecourses</a><a class="headerlink" href="#inquiring-timecourses" title="Permalink to this headline">¶</a></h2>
<div class="section" id="timecourses-at-vertices">
<span id="chdghdge"></span><h3><a class="toc-backref" href="#id72">Timecourses at vertices</a><a class="headerlink" href="#timecourses-at-vertices" title="Permalink to this headline">¶</a></h3>
<p>Timecourses at individual vertices can be inquired by clicking
on a desired point on the surface with the left mouse button. If
the control key was down at the time of a click, the timecourse
will be added to the timecourse manager but left off. With both
control and shift down, the timecourse will be added to the timecourse
manager and switched on. For more information on the timecourse
manager, see <a class="reference internal" href="#cacdiaad"><span class="std std-ref">The timecourse manager</span></a>.</p>
<p>The timecourses are be affected by the Retain sign and Retain normal component only settings in the MNE preferences dialog , see <a class="reference internal" href="#cachffij"><span class="std std-ref">Preferences</span></a>.</p>
</div>
<div class="section" id="timecourses-at-labels">
<h3><a class="toc-backref" href="#id73">Timecourses at labels</a><a class="headerlink" href="#timecourses-at-labels" title="Permalink to this headline">¶</a></h3>
<p>The labels provide means to interrogate timecourse information
from ROIs. The label files can be created in mne_analyze ,
see <a class="reference internal" href="#cacjcfjj"><span class="std std-ref">Creating new label files</span></a> or in tksurfer ,
which is part of the FreeSurfer software. For mne_analyze left-hemisphere
and right-hemisphere label files should be named &lt;<em>name</em>&gt; <code class="docutils literal notranslate"><span class="pre">-lh.label</span></code> and &lt;<em>name</em>&gt; <code class="docutils literal notranslate"><span class="pre">-rh.label</span></code> ,
respectively.</p>
<p>Individual label files can be loaded from Labels/Load label… . All label files in a directory can be
loaded from Labels/Load all labels… .
Once labels are loaded, the label list shown in <a class="reference internal" href="#cacjjgef"><span class="std std-ref">The label list.</span></a> appears. Each
time a new label is added to the list, the names will be reordered
to alphabetical order. This list can be also brought up from Labels/Show label list . The list can be cleared from Labels/Discard all labels .</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Because of the format of the label    files mne_analyze can not certify    that the label files loaded belong to the cortical surfaces of the present    subject.</p>
</div>
<p>When a label is selected from the label list, the corresponding
timecourse appears. The Keep button
stores the timecourse to the timecourse manager, <a class="reference internal" href="#cacdiaad"><span class="std std-ref">The timecourse manager</span></a>.</p>
<div class="figure align-default" id="id25">
<span id="cacjjgef"></span><img alt="label list" src="../../_images/label_list.png" />
<p class="caption"><span class="caption-text">The label list.</span><a class="headerlink" href="#id25" title="Permalink to this image">¶</a></p>
</div>
<p>The timecourse shown in the MNE amplitude window
is a compound measure of all timecourses within a label. Two measures
are available:</p>
<p><strong>Average</strong></p>
<blockquote>
<div><p>Compute the average over all label vertices at each time point.</p>
</div></blockquote>
<p><strong>Maximum</strong></p>
<blockquote>
<div><p>Compute the maximum absolute value over all vertices at each time point.
If the data are signed, the value is assigned the sign of the value
at the maximum vertex. This may make the timecourse jump from positive
to negative abruptly if vertices with different signs are included
in the label.</p>
</div></blockquote>
<p><strong>L2 norm (sample by sample)</strong></p>
<blockquote>
<div><p>Compute the <span class="math notranslate nohighlight">\(l_2\)</span> norm over the values
in the vertices at each time point.</p>
</div></blockquote>
<p><strong>Pick vertex with largest L2 norm over time</strong></p>
<blockquote>
<div><p>Compute the <span class="math notranslate nohighlight">\(l_2\)</span> norm over time in
each vertex and show the time course at the vertex with the largest
norm.</p>
</div></blockquote>
</div>
<div class="section" id="the-timecourse-manager">
<span id="cacdiaad"></span><h3><a class="toc-backref" href="#id74">The timecourse manager</a><a class="headerlink" href="#the-timecourse-manager" title="Permalink to this headline">¶</a></h3>
<p>The timecourse manager shown in <a class="reference internal" href="#cacedeji"><span class="std std-ref">The timecourse manager.</span></a> has
the following controls for each timecourse stored:</p>
<div class="figure align-default" id="id26">
<span id="cacedeji"></span><img alt="timecourse manager" src="../../_images/timecourse_manager.png" />
<p class="caption"><span class="caption-text">The timecourse manager.</span><a class="headerlink" href="#id26" title="Permalink to this image">¶</a></p>
</div>
<p><strong>Numbered checkbox</strong></p>
<blockquote>
<div><p>Switches the display of this timecourse on and off.</p>
</div></blockquote>
<p><strong>Color…</strong></p>
<blockquote>
<div><p>This button shows the color of the timecourse curve. The color can be
adjusted from the color editor which appears when the button is pressed.</p>
</div></blockquote>
<p><strong>Save…</strong></p>
<blockquote>
<div><p>Saves the timecourse. If a single vertex is selected, the time course file
will contain some comment lines starting with the the percent sign,
one row of time point values in seconds and another with the data
values. The format of the timecourse data is explained in <a class="reference internal" href="#cacjjgfa"><span class="std std-ref">Label timecourse files</span></a>, below.</p>
</div></blockquote>
<p><strong>Forget</strong></p>
<blockquote>
<div><p>Delete this timecourse from memory.</p>
</div></blockquote>
<div class="section" id="label-timecourse-files">
<span id="cacjjgfa"></span><h4>Label timecourse files<a class="headerlink" href="#label-timecourse-files" title="Permalink to this headline">¶</a></h4>
<p>When timecourse corresponding to a label is saved, the default
is to save the displayed single timecourse in a format identical
to the vertex timecourses. If Save all timecourses within the label is selected, the Time-by-time output output changes the output to be listed
time by time rather than vertex by vertex, Include coordinates adds the vertex location information to
the output file, and Include vertex numbers adds
the indices of picked vertices to the output, see <a class="reference internal" href="#cachbbfd"><span class="std std-ref">Label timecourse saving options.</span></a>.
The vertex-by-vertex output formats is summarized in <a class="reference internal" href="#cacefhij"><span class="std std-ref">Vertex-by-vertex output format. n_p is the number of vertices, n_t is the number of time points, n_{com} is the number of comment lines, t_1 \dotso t_{n_t} indicate the times in milliseconds, p is a vertex number, x_p y_p z_p are the coordinates of vertex p in millimeters, and v_p^{(1)} \dotso v_p^{(n_t)} are the values at vertex p.  Items in brackets are only included if Include coordinates is active. In the time-by-time output format the data portion of the file is transposed.</span></a>.</p>
<div class="figure align-default" id="id27">
<span id="cachbbfd"></span><img alt="Label timecourse saving options" src="../../_images/save_label_timecourse.png" />
<p class="caption"><span class="caption-text">Label timecourse saving options.</span><a class="headerlink" href="#id27" title="Permalink to this image">¶</a></p>
</div>
<span id="cacefhij"></span><table class="docutils align-default" id="id28">
<caption><span class="caption-text">Vertex-by-vertex output format. <span class="math notranslate nohighlight">\(n_p\)</span> is the number of vertices, <span class="math notranslate nohighlight">\(n_t\)</span> is the number of time points, <span class="math notranslate nohighlight">\(n_{com}\)</span> is the number of comment lines, <span class="math notranslate nohighlight">\(t_1 \dotso t_{n_t}\)</span> indicate the times in milliseconds, <span class="math notranslate nohighlight">\(p\)</span> is a vertex number, <span class="math notranslate nohighlight">\(x_p y_p z_p\)</span> are the coordinates of vertex <span class="math notranslate nohighlight">\(p\)</span> in millimeters, and <span class="math notranslate nohighlight">\(v_p^{(1)} \dotso v_p^{(n_t)}\)</span> are the values at vertex <span class="math notranslate nohighlight">\(p\)</span>.  Items in brackets are only included if <em>Include coordinates</em> is active. In the time-by-time output format the data portion of the file is transposed.</span><a class="headerlink" href="#id28" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 39%" />
<col style="width: 61%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Line</p></th>
<th class="head"><p>Contents</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="math notranslate nohighlight">\(1-n_{com}\)</span></p></td>
<td><p>Comment lines beginning with %</p></td>
</tr>
<tr class="row-odd"><td><p><span class="math notranslate nohighlight">\(n_{com}+1\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(\{0.0\}[0.0\ 0.0\ 0.0] t_1 \dotso t_{n_t}\)</span></p></td>
</tr>
<tr class="row-even"><td><p><span class="math notranslate nohighlight">\((n_{com}+1)-(n_p+n_{com}+1)\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(\{p\}[x_p y_p z_p]v_p^{(1)} \dotso v_p^{(n_t)}\)</span></p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="creating-new-label-files">
<span id="cacjcfjj"></span><h3><a class="toc-backref" href="#id75">Creating new label files</a><a class="headerlink" href="#creating-new-label-files" title="Permalink to this headline">¶</a></h3>
<p>It is easy to create new label files in mne_analyze.
For this purpose, an inflated surface should be visible in the main
display. Follow these steps:</p>
<ul class="simple">
<li><p>Clear all previously selected vertices
either by choosing Labels/Clear marked vertices or
do a right button click on the surface display with the shift key
down.</p></li>
<li><p>Mark vertices on the surface with right button click or by
right button drag. The vertices should be defined in the desired
order on the new label outline. The outline will follow the shortest
path along the surface. The shortest path will be calculated along
the white matter surface.Note that sometimes the shortest paths
appear to be un-intuitive on the inflated surface.</p></li>
<li><p>Do a right button click with control key down inside the label.
The outline will be completed and shown as a yellow line. The inside
of the label will be filled and shown in green. A file selection
box will appear to save the label. Enter the stem of the file name
here. The file name will be augmented with <code class="docutils literal notranslate"><span class="pre">-lh.label</span></code> or <code class="docutils literal notranslate"><span class="pre">-rh.label</span></code> ,
depending on the hemisphere on which the label is specified.</p></li>
</ul>
</div>
</div>
<div class="section" id="overlays">
<span id="cacfchec"></span><h2><a class="toc-backref" href="#id76">Overlays</a><a class="headerlink" href="#overlays" title="Permalink to this headline">¶</a></h2>
<div class="figure align-default" id="id29">
<span id="cacighej"></span><img alt="The overlay management dialog" src="../../_images/overlay_management.png" />
<p class="caption"><span class="caption-text">The overlay management dialog.</span><a class="headerlink" href="#id29" title="Permalink to this image">¶</a></p>
</div>
<p>In addition to source estimates derived from MEG and EEG
data, mne_analyze can be used
to display other surface-based data. These overlay data can be imported
from w and stc files containing single time slice (static) and dynamic
data (movies), respectively. These data files can be produced by mne_make_movie ,
FreeSurfer software, and custom programs or Matlab scripts.</p>
<p>The names of the files to be imported should end with <code class="docutils literal notranslate"><span class="pre">-</span></code> &lt;<em>hemi</em>&gt; .&lt;<em>type</em>&gt; , where &lt;<em>hemi</em>&gt; indicates
the hemisphere (<code class="docutils literal notranslate"><span class="pre">lh</span></code> or <code class="docutils literal notranslate"><span class="pre">rh</span></code> and &lt;<em>type</em>&gt; is <code class="docutils literal notranslate"><span class="pre">w</span></code> or <code class="docutils literal notranslate"><span class="pre">stc</span></code> .</p>
<p>Overlays are managed from the dialog shown in <a class="reference internal" href="#cacighej"><span class="std std-ref">The overlay management dialog.</span></a> which is invoked from File/Manage overlays… .</p>
<p>This dialog contains the following
controls:</p>
<p><strong>List of overlays loaded</strong></p>
<blockquote>
<div><p>Lists the names of the overlays loaded so far.</p>
</div></blockquote>
<p><strong>Load w…</strong></p>
<blockquote>
<div><p>Load a static overlay from a w file. In the open dialog it is possible to
specify whether this file contains data for the cortical surface
or for scalp. Scalp overlays can be viewed in the viewer window.</p>
</div></blockquote>
<p><strong>Load stc…</strong></p>
<blockquote>
<div><p>Load a dynamic overlay from an stc file. In the open dialog it is
possible to specify whether this file contains data for the cortical
surface or for scalp. Scalp overlays can be viewed in the viewer window.</p>
</div></blockquote>
<p><strong>Delete</strong></p>
<blockquote>
<div><p>Delete the selected overlay from memory.</p>
</div></blockquote>
<p><strong>Time scale slider</strong></p>
<blockquote>
<div><p>Will be activated if a dynamic overlay is selected. Changes the
current time point.</p>
</div></blockquote>
<p><strong>Overlay type is</strong></p>
<blockquote>
<div><p>Selects the type of the data in the current overlay. Different default color
scales are provided each overlay type.</p>
</div></blockquote>
<p><strong>Value histogram</strong></p>
<blockquote>
<div><p>Shows the distribution of the values in the current overlay. For
large stc files this may take a while to compute since all time
points are included. The histogram is colored to reflect the current
scale settings. The fthresh , fmid ,
and fmax values are indicated
with vertical bars.</p>
</div></blockquote>
<p><strong>Color scale</strong></p>
<blockquote>
<div><p>Sets the color scale of the current overlay. To activate the values, press Show .
For information on color scale settings, see <a class="reference internal" href="#cacggici"><span class="std std-ref">The color scale parameters.</span></a>.</p>
</div></blockquote>
<p><strong>Options</strong></p>
<blockquote>
<div><p>Display options. This a subset of the options in the MNE preferences dialog. For details, see <a class="reference internal" href="#cachffij"><span class="std std-ref">Preferences</span></a>.</p>
</div></blockquote>
<p><strong>Show</strong></p>
<blockquote>
<div><p>Show the selected overlay and assign the settings to the current overlay.</p>
</div></blockquote>
<p><strong>Apply to all</strong></p>
<blockquote>
<div><p>Apply the current settings to all loaded overlays.</p>
</div></blockquote>
<p>It is also possible to inquire timecourses of vertices and
labels from dynamic (stc) cortical overlays in the same way as from
original data and store the results in text files. If a static overlay
(w file) or a scalp overlay is selected, the timecourses are picked
from the data loaded, if available.</p>
</div>
<div class="section" id="fitting-current-dipoles">
<span id="chdghijj"></span><h2><a class="toc-backref" href="#id77">Fitting current dipoles</a><a class="headerlink" href="#fitting-current-dipoles" title="Permalink to this headline">¶</a></h2>
<p>Starting from MNE software version 2.6, mne_analyze includes
routines for fitting current dipoles to the data. At present mne_analyze is
limited to fitting single equivalent current dipole (ECD) at one
time point. The parameters affecting the dipole fitting procedure
are described in <a class="reference internal" href="#cacedega"><span class="std std-ref">Dipole fitting parameters</span></a>. The results are shown in
the dipole list (<a class="reference internal" href="#cacggaia"><span class="std std-ref">The dipole list</span></a>). The selection of channels
included can be adjusted interactively or by predefined selections
as described in <a class="reference internal" href="#cacibhci"><span class="std std-ref">Channel selections</span></a>.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The current dipole fitting has been    added recently and has not been tested comprehensively. Especially    fitting dipoles to EEG data may be unreliable.</p>
</div>
<div class="section" id="dipole-fitting-parameters">
<span id="cacedega"></span><h3><a class="toc-backref" href="#id78">Dipole fitting parameters</a><a class="headerlink" href="#dipole-fitting-parameters" title="Permalink to this headline">¶</a></h3>
<p>Prior to fitting current dipoles, the fitting parameters
must be set with the Dipole fitting preferences dialog
shown in <a class="reference internal" href="#cacfedej"><span class="std std-ref">The dipole fitting preferences dialog.</span></a>. The dialog is brought up from the Setup fitting… choice in the Dipoles menu.
This dialog contains three sections: Forward model , Modalities ,
and Noise estimate .</p>
<p>The Forward model section
specifies the forward model to be used:</p>
<p><strong>Sphere model origin x/y/z [mm]</strong></p>
<blockquote>
<div><p>Specifies the origin of the spherically symmetric conductor model in
MEG/EEG head coordinates, see <a class="reference internal" href="../source_localization/forward.html#bjebibai"><span class="std std-ref">The head and device coordinate systems</span></a>.</p>
</div></blockquote>
<p><strong>EEG scalp radius [mm]</strong></p>
<blockquote>
<div><p>Specifies the radius of the outermost shell in the EEG sphere model. For
details, see <a class="reference internal" href="../source_localization/forward.html#chdiafig"><span class="std std-ref">EEG forward solution in the sphere model</span></a>.</p>
</div></blockquote>
<p><strong>EEG sphere model name</strong></p>
<blockquote>
<div><p>Specifies the name of the EEG sphere model to use. For details,
see <a class="reference internal" href="../source_localization/forward.html#chdiafig"><span class="std std-ref">EEG forward solution in the sphere model</span></a>.</p>
</div></blockquote>
<p><strong>BEM model</strong></p>
<blockquote>
<div><p>Selects the boundary-element model to use. The button labeled with … brings
up a file-selection dialog to select the BEM file. An existing selection
can be cleared with the Unset button.
If EEG data are included in fitting, this must be a three-compartment
model. Note that the sphere model is used even with a BEM model
in effect, see <a class="reference internal" href="#chdfgiei"><span class="std std-ref">The dipole fitting algorithm</span></a>.</p>
</div></blockquote>
<p><strong>Accurate field calculation</strong></p>
<blockquote>
<div><p>Switches on the more accurate geometry definition of MEG coils, see <a class="reference internal" href="../source_localization/forward.html#bjeiaeie"><span class="std std-ref">Coil geometry information</span></a>.
In dipole fitting, there is very little difference between the <em>accurate</em> and <em>normal</em> coil
geometry definitions.</p>
</div></blockquote>
<p>The Modalities section
defines which kind of data (MEG/EEG) are used in fitting. If an
inverse operator is loaded with the data, this section is fixed and
greyed out. You can further restrict the selection of channels used
in dipole fitting with help of channel selections discussed in <a class="reference internal" href="#cacibhci"><span class="std std-ref">Channel selections</span></a>.</p>
<p>The Noise estimate section
of the dialog contains the following items:</p>
<p><strong>Noise covariance</strong></p>
<blockquote>
<div><p>Selects the file containing the noise-covariance matrix. If an inverse operator
is loaded, the default is the inverse operator file. The button labeled
with … brings up a file-selection
dialog to select the noise covariance matrix file. An existing selection
can be cleared with the Unset button.</p>
</div></blockquote>
<p><strong>Omit off-diagonal terms</strong></p>
<blockquote>
<div><p>If a noise covariance matrix is selected, this choice omits the
off-diagonal terms from it. This means that individual noise estimates for
each channel are used but correlations among channels are not taken
into account.</p>
</div></blockquote>
<p><strong>Regularization</strong></p>
<blockquote>
<div><p>Regularize the noise covariance before using it in whitening by
adding a multiple of an identity matrix to the diagonal. This is
discussed in more detail in <a class="reference internal" href="../source_localization/inverse.html#cov-regularization"><span class="std std-ref">Regularization of the noise-covariance matrix</span></a>. Especially if
EEG is included in fitting it is advisable to enter a non-zero value
(around 0.1) here.</p>
</div></blockquote>
<p><strong>Planar fixed [fT/cm]</strong></p>
<blockquote>
<div><p>In the absence of a noise covariance matrix selection, a diagonal noise
covariance with fixed values on the diagonal is used. This entry
specifies the fixed value of the planar gradiometers.</p>
</div></blockquote>
<p><strong>Axial fixed [fT]</strong></p>
<blockquote>
<div><p>If a noise covariance matrix file is not specified, this entry specifies a
fixed diagonal noise covariance matrix value for axial gradiometers
and magnetometers.</p>
</div></blockquote>
<p><strong>EEG fixed [muV]</strong></p>
<blockquote>
<div><p>If a noise covariance matrix file is not specified, this entry specifies a
fixed diagonal noise covariance matrix value for axial gradiometers
and magnetometers..</p>
</div></blockquote>
<div class="figure align-default" id="id30">
<span id="cacfedej"></span><img alt="The dipole fitting preferences dialog" src="../../_images/dipole_parameters.png" />
<p class="caption"><span class="caption-text">The dipole fitting preferences dialog.</span><a class="headerlink" href="#id30" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="the-dipole-fitting-algorithm">
<span id="chdfgiei"></span><h3><a class="toc-backref" href="#id79">The dipole fitting algorithm</a><a class="headerlink" href="#the-dipole-fitting-algorithm" title="Permalink to this headline">¶</a></h3>
<p>When the dipole fitting preferences dialog is closed and
the values have been modified the following preparatory calculations
take place:</p>
<ul class="simple">
<li><p>If EEG data are included in fitting
present, the EEG sphere model specification corresponding to EEG sphere model name is loaded and scaled to the
the EEG scalp radius .</p></li>
<li><p>If a boundary-element model is used, the additional data depending
on the sensor locations are computed.</p></li>
<li><p>The noise covariance matrix is composed according to the specifications
in the Dipole fitting preferences dialog.</p></li>
<li><p>The spatially whitened forward solution is computed in a grid
of locations to establish the initial guess when a dipole is fitted.
If a BEM is in use, the grid will be confined to the inner skull
volume. For a sphere model, a spherical volume with an 80-mm radius,
centered at the sphere model origin, will be employed. The dipole
grid will be rectangular with a 10-mm spacing between the closest
dipole locations. Any locations closer than 20 mm to the center
of mass of the grid volume will be excluded as well as those closer
than 10 mm to the surface. Note that this guess grid is only used
for establishing the initial guess; the actual dipole fitting procedure
does not constrain the solution to this grid.</p></li>
</ul>
<p>When the Fit ECD button
in the tool bar is clicked with a time point selected from the the
response, the optimal Equivalent Current Dipole parameters (location,
orientation, and amplitude) are determined using the following algorithm:</p>
<ul class="simple">
<li><p>An initial guess for the location of
the dipole is determined using the grid of locations determined
in step 4., above. At each guess dipole location, the least squares
error between the measured data and a dipole at that location is
evaluated and the location corresponding to the smallest error is
used as the initial guess location. In this process, the dipole
amplitude parameters do not need to be explicitly calculated.</p></li>
<li><p>Using the Nelder-Mead simplex optimization algorithm, an optimal dipole
location is determined with the sphere model used as the forward
model. Again, the dipole amplitude parameters are not explicitly present
in the fitting procedure.</p></li>
<li><p>A second optimization iteration using the boundary-element
model (if available) or the sphere model as the forward model is
conducted. The reason for repeating the optimization even with the
sphere model is to reduce the likelihood of having been stuck in
a local minimum of the least squares error criterion.</p></li>
<li><p>The optimal dipole amplitude parameters are determined for
the optimal dipole location obtained in steps 2. and 3.</p></li>
<li><p>The dipole parameters are reported in the dipole list discussed
in <a class="reference internal" href="#cacggaia"><span class="std std-ref">The dipole list</span></a>.</p></li>
</ul>
<p>Additional notes:</p>
<ul class="simple">
<li><p>The noise covariance matrix is always
applied to the data and the forward solution as appropriate to correctly
weight the different types of MEG channels and EEG. Depending on
the dipole fitting settings, the noise covariance may be either
a diagonal matrix or a full matrix including the correlations.</p></li>
<li><p>Using the SVD of the whitened gain matrix of three dipole
components at a given location, the component producing the weakest
signal amplitude is omitted if the ratio of the smallest and largest
singular values is less than 0.2.</p></li>
<li><p>The present MNE software package also contains a batch-mode
dipole fitting program called mne_dipole_fit .
This piece of software is not yet documented here. However, <code class="docutils literal notranslate"><span class="pre">mne_dipole_fit</span> <span class="pre">--help</span></code> lists the command-line options which have direct correspondence
to the interactive dipole fitting options discussed here.</p></li>
</ul>
</div>
<div class="section" id="the-dipole-list">
<span id="cacggaia"></span><h3><a class="toc-backref" href="#id80">The dipole list</a><a class="headerlink" href="#the-dipole-list" title="Permalink to this headline">¶</a></h3>
<div class="figure align-default" id="id31">
<span id="cacggfej"></span><img alt="dipole list" src="../../_images/dipole_list.png" />
<p class="caption"><span class="caption-text">The dipole list.</span><a class="headerlink" href="#id31" title="Permalink to this image">¶</a></p>
</div>
<p>The dipole list dialog shown in <a class="reference internal" href="#cacggfej"><span class="std std-ref">The dipole list.</span></a> contains
the parameters of the dipoles fitted. In addition, it is possible
to import current dipole locations from the Neuromag source modelling
program xfit to mne_analyze . Dipoles
can be imported in two ways:</p>
<ul class="simple">
<li><p>Bring up the dipole list window from Windows/Show dipole list… . Drag and drop selected dipoles
from one of the xfit dipole list
to this list using the middle mouse button.</p></li>
<li><p>Drag and drop dipoles from one of the xfit dipole
lists over the main surface display. The dipole list will appear
and contain the dropped dipoles.</p></li>
</ul>
<p>The buttons at the bottom of the dialog perform the following
functions:</p>
<p><strong>Done</strong></p>
<blockquote>
<div><p>Hide
the dialog.</p>
</div></blockquote>
<p><strong>Show</strong></p>
<blockquote>
<div><p>Show
the currently selected dipoles as specified in Display options ,
see below.</p>
</div></blockquote>
<p><strong>Save</strong></p>
<blockquote>
<div><p>Save the selected (or all) dipoles.
If the file name specified in the file selection dialog that pops
up ends with <code class="docutils literal notranslate"><span class="pre">.bdip</span></code> , the dipole data will be saved in
the binary bdip format compatible with
the Neuromag xfit software, otherwise,
a text format output will be used. In the text file, comments will
be included on lines starting with the percent sign so that the
text format can be easily loaded into Matlab.</p>
</div></blockquote>
<p><strong>Clear</strong></p>
<blockquote>
<div><p>Clear
the selected dipoles from the list.</p>
</div></blockquote>
<p>When you double click on one of the dipoles or select several
dipoles and click Show points
on the surface displayed in the vicinity of the dipoles will be
painted according to the specifications given in the Options section of
the dialog:</p>
<p><strong>Color</strong></p>
<blockquote>
<div><p>By the default, the dipoles are marked in green with transparency (alpha)
set to 0.5. I you click on one of the dipoles, you can adjust the
color of this dipole by editing the color values or from the color editor
appearing when you click Color… .
When you click Apply , the new
color values are attached to the selected dipole.</p>
</div></blockquote>
<p><strong>Max. distance for dipoles to show (mm)</strong></p>
<blockquote>
<div><p>If this option is on, only dipoles which are closer to the surface
than the distance specified in the adjacent text field are displayed.</p>
</div></blockquote>
<p><strong>Paint all point closer than (mm)</strong></p>
<blockquote>
<div><p>Instead of indicating the point closest to the dipole all points
closer than the distance given in the text field will be painted
if this option is on. This choice is useful for understanding the
shape of the neighborhood of a dipole on the cortical surface.</p>
</div></blockquote>
<p><strong>Number of smooth steps</strong></p>
<blockquote>
<div><p>This option spreads out the dipole marking by the given number of smooth
steps to make the dipoles more clearly visible. A suitable choice
is 3 or 4.</p>
</div></blockquote>
<p><strong>Keep previous dipoles</strong></p>
<blockquote>
<div><p>If this option is on, previously marked dipoles are not cleared
from the display before new ones are shown.</p>
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The surface must be loaded to display dipole    locations. To calculate the distance from the dipoles to the white    matter surface, the white matter tessellation is loaded as needed.    Depending on the precise location of the fitted dipole, the spot    indicating the dipole site may easily appear on a different wall    of a fissure than could be expected. The fissural walls can be far    apart from each other in the inflated view of the cortex even if    they are physically separated by just a few millimeters. The size    of the spots indicating the dipole locations do not relate to the    dipole strengths or their confidence limits in any way.</p>
</div>
</div>
<div class="section" id="channel-selections">
<span id="cacibhci"></span><h3><a class="toc-backref" href="#id81">Channel selections</a><a class="headerlink" href="#channel-selections" title="Permalink to this headline">¶</a></h3>
<p>As mentioned in <a class="reference internal" href="#cachbjac"><span class="std std-ref">The topographical display</span></a>, the right mouse button
in the topographical display of channels can be used to restrict
the selection of channels taken into account in dipole fitting.
In addition, the channel selections can be manipulated in the channel
selection window, which pops up from Dipoles/Manage channel selections… . Initially this dialog contains
the selections defined in or $HOME/.mne/mne_analyze.sel or $MNE_ROOT/share/mne/mne_analyze/mne_analyze.sel,
the personal file taking precedence over the system wide default.
The Save button in this dialog
save the current set of channel selections to the personal selection
file. The format of this file is identical to the channel selection
file in mne_browse_raw .</p>
<p>When a channel selection file is in effect. the variances
of the unselected channels are increased by a factor of 900. This
means that unselected channels receive virtually no weight in the
least-squares error function or, equivalently, that they are considered
to be 30 times more noisy than their true noise value. Since this
implementation of channel selections requires recomputation of the
initial guess candidate data discussed in <a class="reference internal" href="#chdfgiei"><span class="std std-ref">The dipole fitting algorithm</span></a>,
above, changing the selection may take a finite amount of time,
especially if a BEM is used for the forward calculation.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Please note that when making a channel    selection in the topographical displays, the channels not present    in a particular layout are also affected. For example, if you select    channels in a layout showing the Vectorview planar gradiometers,    the magnetometer channels and EEG channels will be unselected.</p>
</div>
</div>
</div>
<div class="section" id="coordinate-frame-alignment">
<span id="cacehgcd"></span><h2><a class="toc-backref" href="#id82">Coordinate frame alignment</a><a class="headerlink" href="#coordinate-frame-alignment" title="Permalink to this headline">¶</a></h2>
<p>The MRI-MEG coordinate frame alignment tools included in mne_analyze utilized
the 3D digitizer (Polhemus) data acquired in the beginning of each
MEG/EEG session and the scalp surface triangulation shown in the
viewer window. To access the coordinate frame alignment tools:</p>
<ul class="simple">
<li><p>Load digitizer data. You can either
load a data set containing digitizer information or load digitizer
data from a file through the File/Load digitizer data… menu choice.</p></li>
<li><p>Set up the viewer window and make it visible, see <a class="reference internal" href="#caceffjf"><span class="std std-ref">The viewer</span></a>. The viewer options should be set to show the
digitizer data, see <a class="reference internal" href="#cachgdea"><span class="std std-ref">Viewer options</span></a>.</p></li>
<li><p>Bring up the Adjust coordinate alignment dialog from Adjust/Coordinate alignment… .</p></li>
</ul>
<div class="figure align-default" id="id32">
<img alt="The coordinate frame alignment dialog" src="../../_images/adjust_alignment.png" />
<p class="caption"><span class="caption-text">The coordinate frame alignment dialog.</span><a class="headerlink" href="#id32" title="Permalink to this image">¶</a></p>
</div>
<p>The coordinate frame alignment dialog contains the following
sections:</p>
<ul class="simple">
<li><p>Buttons for picking the fiducial points
from the scalp surface and one for setting an initial alignment
using these points. When one of the fiducials is selected, the viewer
display automatically rotates to a suitable orientation to make
the corresponding fiducial accessible.</p></li>
<li><p>Controls for fine tuning the alignment. These include movements
along the three orthogonal coordinate axes and rotations around
them. The buttons marked L and R indicate
rotations in counterclockwise and clockwise directions, respectively.
The amount of movement (mm) or rotation (degrees) is given in the
text fields next to the adjustment buttons.</p></li>
<li><p>Access to an automatic alignment procedure, which employs
the Iterative Closest Point (ICP) algorithm.</p></li>
<li><p>Listing of the current coordinate transformation.</p></li>
<li><p>Buttons for discarding outlier points (Discard… ), and for
saving and loading the coordinate transformation.</p></li>
</ul>
<p>The saving and loading choices are:</p>
<p><strong>Save default</strong></p>
<blockquote>
<div><p>Saves a file which contains the MEG/MRI coordinate transformation
only. The file name is generated from the name of the file from which
the digitization data were loaded by replacing the ending <code class="docutils literal notranslate"><span class="pre">.fif</span></code> with <code class="docutils literal notranslate"><span class="pre">-trans.fif</span></code> .
If this file already exists, it will be overwritten without any
questions asked.</p>
</div></blockquote>
<p><strong>Save MRI set</strong></p>
<blockquote>
<div><p>This option searches for a file called COR.fif in $SUBJECTS_DIR/$SUBJECT/mri/T1-neuromag/sets.
The file is copied to COR-&lt;<em>username</em>&gt;-&lt;<em>date</em>&gt;-&lt;<em>time</em>&gt;.fif
and the current MEG/MRI coordinate transformation as well as the
fiducial locations in MRI coordinates are inserted.</p>
</div></blockquote>
<p><strong>Save…</strong></p>
<blockquote>
<div><p>Saves a file which contains the MEG/MRI coordinate transformation
only. The ending <code class="docutils literal notranslate"><span class="pre">-trans.fif</span></code> is recommended. The file name
selection dialog as a button to overwrite.</p>
</div></blockquote>
<p><strong>Load…</strong></p>
<blockquote>
<div><p>Loads the MEG/MRI coordinate transformation from the file specified.</p>
</div></blockquote>
<p>The MEG/MRI coordinate transformation files are employed
in the forward calculations. The convenience script mne_do_forward solution described in <a class="reference internal" href="../cookbook.html#babchejd"><span class="std std-ref">Computing the forward solution</span></a> uses
a search sequence which is compatible with the file naming conventions
described above. It is recommended that -trans.fif file
saved with the Save default and Save… options
in the mne_analyze alignment
dialog are used because then the $SUBJECTS_DIR/$SUBJECT directory
will be composed of files which are dependent on the subjects’s
anatomy only, not on the MEG/EEG data to be analyzed.</p>
<p>Each iteration step of the Iterative Closest Point (ICP) algorithm consists of
two matching procedures:</p>
<ul class="simple">
<li><p>For each digitizer point, transformed
from MEG to the MRI coordinate frame using the current coordinate
transformation, the closest point on the triangulated surface is
determined.</p></li>
<li><p>The best coordinate transformation aligning the digitizer
points with the closest points on the head surface is computed.</p></li>
</ul>
<p>These two steps are iterated the designated number of times.
If the Try to keep nasion in place option
is on, the present location of the nasion receives a strong weight
in the second part of each iteration step so that nasion movements
are discouraged.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>One possible practical approach to coordinate frame alignment is discussed in <a class="reference internal" href="../sample_dataset.html#chdijbig"><span class="std std-ref">MEG-MRI coordinate system alignment</span></a>.</p>
</div>
<div class="section" id="using-a-high-resolution-head-surface-tessellations">
<span id="chdcghif"></span><h3><a class="toc-backref" href="#id83">Using a high-resolution head surface tessellations</a><a class="headerlink" href="#using-a-high-resolution-head-surface-tessellations" title="Permalink to this headline">¶</a></h3>
<p>The newest version of FreeSurfer contains a script called mkheadsurf which
can be used for coordinate alignment purposes. For more information,
try <code class="docutils literal notranslate"><span class="pre">mkheadsurf</span> <span class="pre">--help</span></code> . This script produces a file
called <code class="docutils literal notranslate"><span class="pre">surf/lh.smseghead</span></code> , which can be converted into
a fif file using mne_surf2bem.</p>
<p>Suggested usage:</p>
<ul class="simple">
<li><p>Set the SUBJECTS_DIR correctly.</p></li>
<li><p>Run mkheadsurf: <code class="docutils literal notranslate"><span class="pre">mkheadsurf</span> <span class="pre">-subjid</span></code> &lt;<em>subject</em>&gt; .</p></li>
<li><p>Goto the directory <code class="docutils literal notranslate"><span class="pre">$SUBJECTS_DIR/</span></code> &lt;<em>subject</em>&gt; <code class="docutils literal notranslate"><span class="pre">/bem</span></code> .</p></li>
<li><p>Convert the head surface file: <code class="docutils literal notranslate"><span class="pre">mne_surf2bem</span> <span class="pre">--surf</span> <span class="pre">../surf/lh.smseghead</span> <span class="pre">--id</span> <span class="pre">4</span> <span class="pre">--check</span> <span class="pre">--fif</span></code> &lt;<em>subject</em>&gt; <code class="docutils literal notranslate"><span class="pre">-head-dense.fif</span></code></p></li>
<li><p>Rename the existing head surface file to &lt;<em>subject</em>&gt; <code class="docutils literal notranslate"><span class="pre">-head-sparse.fif</span></code></p></li>
<li><p>Copy &lt;<em>subject</em>&gt; <code class="docutils literal notranslate"><span class="pre">-head-dense.fif</span></code> to &lt;<em>subject</em>&gt; <code class="docutils literal notranslate"><span class="pre">-head.fif</span></code></p></li>
<li><p>Click Reload in the viewer
window.</p></li>
</ul>
<p>After this you can switch between the dense and smooth head
surface tessellations by copying either &lt;<em>subject</em>&gt; <code class="docutils literal notranslate"><span class="pre">-head-dense.fif</span></code> or &lt;<em>subject</em>&gt; <code class="docutils literal notranslate"><span class="pre">-head-sparse.fif</span></code> to &lt;<em>subject</em>&gt; <code class="docutils literal notranslate"><span class="pre">-head.fif</span></code> .</p>
<p>If you have Matlab software available on your system, you
can also benefit from the script mne_make_scalp_surfaces .
This script invokes mkheadsurf and
subsequently decimates it using the mne_reduce_surface function
in the MNE Matlab toolbox, which in turn invokes the reducepatch
Matlab function. As a result, the $SUBJECTS_DIR/$SUBJECT/bem directory
will contain ‘dense’, ‘medium’,
and ‘sparse’ scalp surface tessellations. The
dense tessellation contains the output of mkheadsurf while
the medium and sparse tessellations comprise 30,000 and 2,500 triangles,
respectively. You can then make a symbolic link of one of these
to &lt;<em>subject</em>&gt; <code class="docutils literal notranslate"><span class="pre">-head.fif</span></code> .
The medium grade tessellation is an excellent compromise between
geometric accuracy and speed in the coordinate system alignment.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>While the dense head surface tessellation    may help in coordinate frame alignment, it will slow down the operation    of the viewer window considerably. Furthermore, it cannot be used    in forward modelling due to the huge number of triangles. For the    BEM, the dense tessellation does not provide much benefit because    the potential distributions are quite smooth and widespread on the    scalp.</p>
</div>
</div>
<div class="section" id="using-fiducial-points-identified-by-other-software">
<span id="cacjjbgf"></span><h3><a class="toc-backref" href="#id84">Using fiducial points identified by other software</a><a class="headerlink" href="#using-fiducial-points-identified-by-other-software" title="Permalink to this headline">¶</a></h3>
<p>If you have identified the three fiducial points in software
outside mne_analyze , it is possible
to display this information on the head surface visualization. To
do this, you need to copy the file containing the fiducial location
information in MRI (surface RAS) coordinates to $SUBJECTS_DIR/$SUBJECT/bem/$SUBJECT-fiducials.fif.
There a three supported ways to create this file:</p>
<ul class="simple">
<li><p>Use the mne_make_fiducial_file.m Matlab
function (not yet written) to create this file.</p></li>
<li><p>Copy a MRI description file with the MEG-MRI coordinate transformation
created with MRIlab (typically $SUBJECTS_DIR/$SUBJECT/mri/T1-neuromag/sets/COR-&lt;<em>date</em>&gt;.fif
to $SUBJECTS_DIR/$SUBJECT/bem/$SUBJECT-fiducials.fif.</p></li>
<li><p>For the average subject, fsaverage ,
copy the fsaverage-fiducials.fif file provided with mne_analyze
in place, see <a class="reference internal" href="#cacgeafi"><span class="std std-ref">Working with the average brain</span></a>.</p></li>
</ul>
</div>
</div>
<div class="section" id="viewing-continuous-hpi-data">
<span id="caciadai"></span><h2><a class="toc-backref" href="#id85">Viewing continuous HPI data</a><a class="headerlink" href="#viewing-continuous-hpi-data" title="Permalink to this headline">¶</a></h2>
<div class="figure align-default" id="id33">
<span id="cacfhfgj"></span><img alt="Continuous HPI data overview" src="../../_images/cont_hpi_data.png" />
<p class="caption"><span class="caption-text">Continuous HPI data overview.</span><a class="headerlink" href="#id33" title="Permalink to this image">¶</a></p>
</div>
<p>The newest versions of Neuromag software allow continuous
acquisition of signals from the HPI coils. On the basis of these
data the relative position of the dewar and the head can be computed
a few times per second. The resulting location data, expressed in
the form of unit quaternions (see <a class="reference external" href="http://en.wikipedia.org/wiki/Quaternion">http://en.wikipedia.org/wiki/Quaternion</a>)
and a translation.</p>
<p>The continuous HPI data can be through the File/View continuous HPI data… menu item, which pops up
a standard file selection dialog. If the file specified ends with <code class="docutils literal notranslate"><span class="pre">.fif</span></code> a
fif file containing the continuous coordinate transformation information
is expected. Otherwise, a text log file is read. Both files are
produced by the Neuromag maxfilter software.</p>
<p>Once the data have been successfully loaded, the dialog shown
in <a class="reference internal" href="#cacfhfgj"><span class="std std-ref">Continuous HPI data overview.</span></a> appears. It contains the following information:</p>
<ul class="simple">
<li><p>Currently selected time point and overview
of the data at the current time point,</p></li>
<li><p>MEG device to MEG head coordinate transformation at the current time
point and the incremental transformation from the initial timepoint
to the current file.</p></li>
<li><p>Graphical display of the data.</p></li>
<li><p>Controls for the graphical display.</p></li>
</ul>
<p>The overview items are:</p>
<p><strong>GOF</strong></p>
<blockquote>
<div><p>Geometric mean of the goodness of fit values of the HPI coils at
this time point.</p>
</div></blockquote>
<p><strong>Origin movement</strong></p>
<blockquote>
<div><p>The distance between the head coordinate origins at the first and current
time points.</p>
</div></blockquote>
<p><strong>Angular velocity</strong></p>
<blockquote>
<div><p>Estimated current angular velocity of the head.</p>
</div></blockquote>
<p><strong>Coil movements</strong></p>
<blockquote>
<div><p>Comparison of the sensor locations between the first and current time
points. The minimum, maximum, average, and median sensor movements
are listed.</p>
</div></blockquote>
<p>The graphical display contains the following data:</p>
<ul class="simple">
<li><p>The geometric mean of the HPI coil goodness
of fits (red curve). The scale for this curve is always 0.9…1.0.</p></li>
<li><p>The average coil (sensor) movement value (blue curve). The
scale is adjustable from the buttons below the display.</p></li>
<li><p>The estimated angular velocity (deg/s, green curve). The scale
is adjustable from the buttons below the display.</p></li>
<li><p>The current time point indicated with a black cursor.</p></li>
</ul>
<p>The slider below the display can be used to select the time
point. If you click on the slider, the current time can be adjusted
with the arrow keys. The current head position with respect to the
sensor array is show in the viewer window if it is visible, see <a class="reference internal" href="#caceffjf"><span class="std std-ref">The viewer</span></a>. Note that a complete set of items listed above
is only available if a data file has been previously loaded, see <a class="reference internal" href="#cacbachb"><span class="std std-ref">Loading data</span></a>.</p>
</div>
<div class="section" id="working-with-the-mri-viewer">
<span id="cacchcbf"></span><h2><a class="toc-backref" href="#id86">Working with the MRI viewer</a><a class="headerlink" href="#working-with-the-mri-viewer" title="Permalink to this headline">¶</a></h2>
<div class="figure align-default" id="id34">
<span id="chdegehe"></span><img alt="MRI viewer window" src="../../_images/mri_viewer.png" />
<p class="caption"><span class="caption-text">The MRI viewer control window.</span><a class="headerlink" href="#id34" title="Permalink to this image">¶</a></p>
</div>
<p>Selecting Show MRI viewer… from
the View menu starts the FreeSurfer MRI
viewer program tkmedit to work
in conjunction with mne_analyze . After
a few moments, both tkmedit with
the current subject’s T1 MRI data shown and the MRI viewer
control window shown in <a class="reference internal" href="#chdegehe"><span class="std std-ref">The MRI viewer control window.</span></a> appear. Note that
the tkmedit user interface is
initially hidden. The surfaces of a subject must be loaded before
starting the MRI viewer.</p>
<p>The MRI viewer control window contains
the following items:</p>
<p><strong>Show MRI viewer user interface</strong></p>
<blockquote>
<div><p>If this item is checked, the tkmedit user
interface window will be show.</p>
</div></blockquote>
<p><strong>Track surface location in MRI</strong></p>
<blockquote>
<div><p>With this item checked, the cursor in the MRI data window follows the
current (clicked) location in surface display or viewer. Note that for
the <em>viewer</em> window the surface location will
inquired from the surface closest to the viewer. The MEG helmet
surface will not be considered. For example, if you click at an
EEG electrode location with the scalp surface displayed, the location
of that electrode on the scalp will be shown. The cortical surface
locations are inquired from the white matter surface.</p>
</div></blockquote>
<p><strong>Show dipole locations in MRI</strong></p>
<blockquote>
<div><p>If this option is selected, whenever a dipole is displayed in the
surface view using the dipole list dialog discussed in <a class="reference internal" href="#cacggaia"><span class="std std-ref">The dipole list</span></a> the cursor will also move to the same location
in the MRI data window.</p>
</div></blockquote>
<p><strong>Show digitizer data in MRI</strong></p>
<blockquote>
<div><p>If digitizer data are loaded, this option shows the locations with green
diamonds in the MRI data.</p>
</div></blockquote>
<p><strong>Interpolate voxels</strong></p>
<blockquote>
<div><p>Toggles trilinear interpolation in the MRI data on and off.</p>
</div></blockquote>
<p><strong>Max. intensity projection</strong></p>
<blockquote>
<div><p>Shows a maximum-intensity projection of the MRI data. This is useful
in conjunction with the Show digitizer data in MRI option to evaluate the MEG/MRI coordinate
alignment</p>
</div></blockquote>
<p><strong>Recenter MRI display</strong></p>
<blockquote>
<div><p>Brings the cursor to the center of the MRI data.</p>
</div></blockquote>
<p><strong>Show surface data in MRI</strong></p>
<blockquote>
<div><p>This button creates an MRI data set containing the surface data
displayed and overlays in with the MRI slices shown in the MRI viewer.</p>
</div></blockquote>
<p><strong>Show segmentation data in MRI</strong></p>
<blockquote>
<div><p>If available, the standard automatically generated segmentation
volume (mri/aparc+aseg) is overlaid on the MRI using the standard FreeSurfer
color lookup table ($FREESURFER_HOME/FreeSurferColorLUT.txt). As
a result, the name of the brain structure or region of corex at
the current location of the cursor will be reported if the tkmedit user
interface is visible. After the segmentation is loaded this button
toggles the display of the segmentation on and off.</p>
</div></blockquote>
<p><strong>Show command input and output</strong></p>
<blockquote>
<div><p>Allows sending tcl commands to tkmedit and
shows the responses received. The tkmedit tcl scripting
commands are discussed at <a class="reference external" href="https://surfer.nmr.mgh.harvard.edu/fswiki/TkMeditGuide/TkMeditReference/TkMeditScripting">https://surfer.nmr.mgh.harvard.edu/fswiki/TkMeditGuide/TkMeditReference/TkMeditScripting</a>.</p>
</div></blockquote>
</div>
<div class="section" id="working-with-the-average-brain">
<span id="cacgeafi"></span><h2><a class="toc-backref" href="#id87">Working with the average brain</a><a class="headerlink" href="#working-with-the-average-brain" title="Permalink to this headline">¶</a></h2>
<p>The FreeSurfer software includes an average subject (fsaverage)
with a cortical surface reconstruction. In some cases, the average
subject can be used as a surrogate if the MRIs of a subject are
not available.</p>
<p>The MNE software comes with additional files which facilitate
the use of the average subject in conjunction with mne_analyze .
These files are located in the directory $MNE_ROOT/mne/setup/mne_analyze/fsaverage:</p>
<p><strong>fsaverage_head.fif</strong></p>
<blockquote>
<div><p>The approximate head surface triangulation for fsaverage.</p>
</div></blockquote>
<p><strong>fsaverage_inner_skull-bem.fif</strong></p>
<blockquote>
<div><p>The approximate inner skull surface for fsaverage.</p>
</div></blockquote>
<p><strong>fsaverage-fiducials.fif</strong></p>
<blockquote>
<div><p>The locations of the fiducial points (LPA, RPA, and nasion) in MRI coordinates,
see <a class="reference internal" href="#cacjjbgf"><span class="std std-ref">Using fiducial points identified by other software</span></a>.</p>
</div></blockquote>
<p><strong>fsaverage-trans.fif</strong></p>
<blockquote>
<div><p>Contains a default MEG-MRI coordinate transformation suitable for fsaverage.
For details of using the default transformation, see <a class="reference internal" href="#cacbachb"><span class="std std-ref">Loading data</span></a>.</p>
</div></blockquote>
</div>
<div class="section" id="compatibility-with-cliplab">
<span id="cacjefai"></span><h2><a class="toc-backref" href="#id88">Compatibility with cliplab</a><a class="headerlink" href="#compatibility-with-cliplab" title="Permalink to this headline">¶</a></h2>
<p>The following graphics displays are compatible with the Elekta-Neuromag
report composer cliplab :</p>
<ul class="simple">
<li><p>The main surface display area in the
main window, see <a class="reference internal" href="#cacfjicc"><span class="std std-ref">The surface display</span></a>.</p></li>
<li><p>The viewer, see <a class="reference internal" href="#caceffjf"><span class="std std-ref">The viewer</span></a>.</p></li>
<li><p>The sample channel display, see <a class="reference internal" href="#cacfghbj"><span class="std std-ref">The sample channel display</span></a>.</p></li>
<li><p>The topographical data display, see <a class="reference internal" href="#cachbjac"><span class="std std-ref">The topographical display</span></a>.</p></li>
<li><p>The SNR time course display, see <a class="reference internal" href="#cacjffee"><span class="std std-ref">The SNR display</span></a>.</p></li>
<li><p>The source time course display, see:ref:<em class="xref py py-obj">CACCCFHH</em></p></li>
</ul>
<p>The graphics can be dragged and dropped from these windows
to one of the cliplab view areas
using the middle mouse button. Because the topographical display
area has another function (bed channel selection) tied to the middle
mouse button, the graphics is transferred by doing a middle mouse
button drag and drop from the label showing the current time underneath
the display area itself.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The cliplab drag-and-drop    functionality requires that you have the proprietary Elekta-Neuromag    analysis software installed. mne_analyze is compatible    with cliplab versions 1.2.13    and later.</p>
</div>
</div>
<div class="section" id="visualizing-the-head-position">
<span id="chdedfae"></span><h2><a class="toc-backref" href="#id89">Visualizing the head position</a><a class="headerlink" href="#visualizing-the-head-position" title="Permalink to this headline">¶</a></h2>
<p>When mne_analyze is invoked
with the <code class="docutils literal notranslate"><span class="pre">--visualizehpi</span></code> option, a simplified user interface shown
in <a class="reference internal" href="#chdjjgii"><span class="std std-ref">Snapshot of mne_analyze in the head position visualization mode.</span></a> is displayed. This interface consists only
of the viewer window. This <em>head position visualization</em> mode
can be used with existing data files but is most useful for showing
immediate feedback of the head position during experiments with
an Elekta-Neuromag MEG system.</p>
<div class="figure align-default" id="id35">
<span id="chdjjgii"></span><img alt="Snapshot of mne_analyze in the head position visualization mode" src="../../_images/visualize_hpi.png" />
<p class="caption"><span class="caption-text">Snapshot of mne_analyze in the head position visualization mode.</span><a class="headerlink" href="#id35" title="Permalink to this image">¶</a></p>
</div>
<p>As described in <a class="reference internal" href="../c_reference.html#mne-analyze"><span class="std std-ref">mne_analyze</span></a>, the head position
visualization mode can be customized with the –dig, –hpi, –scalehead,
and –rthelmet options. For this mode to be useful, the –dig and
–hpi options are mandatory. If existing saved data are viewed,
both of these can point to a average or raw data file. For on-line
operation with the Elekta-Neuromag systems, the following files
in should be used:</p>
<p><code class="docutils literal notranslate"><span class="pre">--dig</span> <span class="pre">/neuro/dacq/meas_info/isotrak</span> <span class="pre">--hpi</span> <span class="pre">/neuro/dacq/meas_info/hpi_result</span></code></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Since MNE software runs only on LINUX and Mac    OS X platforms, one usually needs to NFS mount the volume containing    /neuro directory to another system and access these files remotely.    However, Neuromag has indicated that future versions of their acquisition    software will run on the LINUX platform as well and the complication    of remote operation can then be avoided.</p>
</div>
<p>When mne_analyze starts
in the head position visualization mode and the –dig and –hpi
options have been specified, the following sequence operations takes
place:</p>
<ul class="simple">
<li><p>The digitizer data, the coordinate transformation
between the MEG device and head coordinate frames, as well as the
average head surface provided with the MNE software are loaded.</p></li>
<li><p>If the <code class="docutils literal notranslate"><span class="pre">--scalehead</span></code> option is invoked, the average head surface
is scaled to the approximate size of the subject’s head
by fitting a sphere to the digitizer and to the head surface points
lying above the plane of the fiducial landmarks, respectively. The
standard head surface is then scaled by the ration of the radiuses
of these two best-fitting spheres. Without –scalehead, the standard
head surface is used as is without scaling.</p></li>
<li><p>The known positions of (scaled) fiducial landmarks are matched
with those available in the digitizer data. This initial alignment
is then refined using the ICP algorithm, see <a class="reference internal" href="#cacehgcd"><span class="std std-ref">Coordinate frame alignment</span></a>.
This automatic procedure is found to be accurate enough for the
visualization purposes.</p></li>
<li><p>Using the coordinate transformation thus established between
the coordinate system of the scalp surface (MRI coordinates) and
the MEG head coordinates together with the coordinate transformation
between the MEG head and device coordinate frames established with
HPI, the position of the MEG helmet surface is shown in the viewer
window.</p></li>
</ul>
<p>If the <code class="docutils literal notranslate"><span class="pre">--rthelmet</span></code> option was present, the room-temperature
helmet surface is shown instead of the MEG sensor surface. The digitizer
and HPI data files are reloaded and the above steps 1. - 4. are
repeated when the Reload HPI button
is pressed. The comment lines in the viewer window show information
about the digitizer and HPI data files as well as the location of the
MEG device coordinate origin in the MEG head coordinate system.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The appearance of the viewer visualization can    be customized using the Options… button,    see <a class="reference internal" href="#cachgdea"><span class="std std-ref">Viewer options</span></a>. Since only the scalp and MEG device    surfaces are loaded, only a limited number of options is active.    The display can also be saved as an image from the img button,    see <a class="reference internal" href="#cacbebgc"><span class="std std-ref">Producing output files</span></a>.</p>
</div>
</div>
</div>


    </div>
    
  </div>
</div>
<footer class="footer">
  <div class="container institutions">
    <a href="https://www.massgeneral.org/"><img class="institution_lg" src="../../_static/institution_logos/MGH.svg" title="Massachusetts General Hospital" alt="Massachusetts General Hospital"/></a>
    <a href="https://martinos.org/"><img class="institution_lg" src="../../_static/institution_logos/Martinos.png" title="Athinoula A. Martinos Center for Biomedical Imaging" alt="Athinoula A. Martinos Center for Biomedical Imaging"/></a>
    <a href="https://hms.harvard.edu/"><img class="institution_lg" src="../../_static/institution_logos/Harvard.png" title="Harvard Medical School" alt="Harvard Medical School"/></a>
    <a href="https://web.mit.edu/"><img class="institution_sm" src="../../_static/institution_logos/MIT.svg" title="Massachusetts Institute of Technology" alt="Massachusetts Institute of Technology"/></a>
    <a href="https://www.nyu.edu/"><img class="institution_md" src="../../_static/institution_logos/NYU.png" title="New York University" alt="New York University"/></a>
    <a href="http://www.cea.fr/"><img class="institution_md" src="../../_static/institution_logos/CEA.png" title="Commissariat à l´énergie atomique et aux énergies alternatives" alt="Commissariat à l´énergie atomique et aux énergies alternatives"/></a>
    <a href="https://sci.aalto.fi/"><img class="institution_md" src="../../_static/institution_logos/Aalto.svg" title="Aalto-yliopiston perustieteiden korkeakoulu" alt="Aalto-yliopiston perustieteiden korkeakoulu"/></a>
    <a href="https://www.telecom-paris.fr/"><img class="institution_md" src="../../_static/institution_logos/Telecom_Paris_Tech.png" title="Télécom ParisTech" alt="Télécom ParisTech"/></a>
    <a href="https://www.washington.edu/"><img class="institution_sm" src="../../_static/institution_logos/Washington.png" title="University of Washington" alt="University of Washington"/></a>
    <a href="https://icm-institute.org/"><img class="institution_lg" src="../../_static/institution_logos/ICM.jpg" title="Institut du Cerveau et de la Moelle épinière" alt="Institut du Cerveau et de la Moelle épinière"/></a>
    <a href="https://www.bu.edu/"><img class="institution_sm" src="../../_static/institution_logos/BU.svg" title="Boston University" alt="Boston University"/></a>
    <a href="https://www.inserm.fr/"><img class="institution_xs" src="../../_static/institution_logos/Inserm.svg" title="Institut national de la santé et de la recherche médicale" alt="Institut national de la santé et de la recherche médicale"/></a>
    <a href="https://www.fz-juelich.de/"><img class="institution_sm" src="../../_static/institution_logos/Julich.svg" title="Forschungszentrum Jülich" alt="Forschungszentrum Jülich"/></a>
    <a href="https://www.tu-ilmenau.de/"><img class="institution_sm" src="../../_static/institution_logos/Ilmenau.gif" title="Technische Universität Ilmenau" alt="Technische Universität Ilmenau"/></a>
    <a href="https://bids.berkeley.edu/"><img class="institution_md" src="../../_static/institution_logos/BIDS.png" title="Berkeley Institute for Data Science" alt="Berkeley Institute for Data Science"/></a>
    <a href="https://www.inria.fr/"><img class="institution_sm" src="../../_static/institution_logos/inria.png" title="Institut national de recherche en informatique et en automatique" alt="Institut national de recherche en informatique et en automatique"/></a>
    <a href="https://www.au.dk/"><img class="institution_sm" src="../../_static/institution_logos/Aarhus.png" title="Aarhus Universitet" alt="Aarhus Universitet"/></a>
    <a href="https://www.uni-graz.at/"><img class="institution_md" src="../../_static/institution_logos/Graz.jpg" title="Karl-Franzens-Universität Graz" alt="Karl-Franzens-Universität Graz"/></a>
  </div>
  <div class="container">
    <ul class="list-inline">
      <li><a href="https://github.com/mne-tools/mne-python">GitHub</a></li>
      <li>·</li>
      <li><a href="https://mail.nmr.mgh.harvard.edu/mailman/listinfo/mne_analysis">Mailing list</a></li>
      <li>·</li>
      <li><a href="https://gitter.im/mne-tools/mne-python">Gitter</a></li>
      <li>·</li>
      <li><a href="whats_new.html">What's new</a></li>
      <li>·</li>
      <li><a href="faq.html#cite">Cite MNE</a></li>
      <li class="pull-right"><a href="#">Back to top</a></li>
    </ul>
    <p>&copy; Copyright 2012-2019, MNE Developers. Last updated on 2019-07-11.</p>
  </div>
</footer>
  </body>
</html>