<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Miscellaneous utilities &mdash; MNE 0.9.dev0 documentation</title>
    
    <link rel="stylesheet" href="../_static/navy.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.9.dev0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="MNE 0.9.dev0 documentation" href="../index.html" />
    <link rel="up" title="Manual" href="../manual.html" />
    <link rel="next" title="The sample data set" href="sampledata.html" />
    <link rel="prev" title="The Matlab toolbox" href="matlab.html" />

    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-37225609-1']);
    _gaq.push(['_trackPageview']);

    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
    </script>



    <script type="text/javascript">
    !function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);
    js.id=id;js.src="http://platform.twitter.com/widgets.js";
    fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");
    </script>



    <script type="text/javascript">
    (function() {
    var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
    po.src = 'https://apis.google.com/js/plusone.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
    })();
    </script>


  </head>
  <body>

<div style="background-color: white; text-align: left; padding: 10px 7px 15px 15px; min-width: 910px">
<div style="float: left">
<a href="../index.html"><img src="../_static/mne_logo.png" border="0" alt="py4sci"/></a>
</div>

<div style="float: right">
<a href="../index.html"><img src="../_static/institutions.png" border="0" alt="py4sci"/></a>
</div>
<br style="clear:both"/>
</div>

    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../np-modindex.html" title="Python Module Index"
             >modules</a></li>
        <li class="right" >
          <a href="sampledata.html" title="The sample data set"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="matlab.html" title="The Matlab toolbox"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">Home</a>&nbsp;|&nbsp;</li>
        <li><a href="../manual.html">Manual</a>&nbsp;|&nbsp;</li>
        <li><a href="../mne-python.html">Python</a>&nbsp;|&nbsp;</li>
        <li><a href="../cite.html">Cite MNE</a>&nbsp;|&nbsp;</li>
        <!-- <li><a href="../search.html">Search</a></li> -->

          <li><a href="../manual.html" accesskey="U">Manual</a> &raquo;</li> 
      </ul>
    </div>

      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
<h3><a href="../index.html">Table Of Contents</a></h3>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../manual.html">Manual</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="intro.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="list.html">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="cookbook.html">The Cookbook</a></li>
<li class="toctree-l2"><a class="reference internal" href="browse.html">Processing raw data</a></li>
<li class="toctree-l2"><a class="reference internal" href="forward.html">The forward solution</a></li>
<li class="toctree-l2"><a class="reference internal" href="mne.html">The current estimates</a></li>
<li class="toctree-l2"><a class="reference internal" href="analyze.html">Interactive analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="morph.html">Morphing and averaging</a></li>
<li class="toctree-l2"><a class="reference internal" href="convert.html">Data conversion</a></li>
<li class="toctree-l2"><a class="reference internal" href="matlab.html">The Matlab toolbox</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">Miscellaneous utilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="sampledata.html">The sample data set</a></li>
<li class="toctree-l2"><a class="reference internal" href="reading.html">Related publications</a></li>
<li class="toctree-l2"><a class="reference internal" href="AppA.html">Creating the BEM meshes</a></li>
<li class="toctree-l2"><a class="reference internal" href="AppB.html">Setup at the Martinos Center</a></li>
<li class="toctree-l2"><a class="reference internal" href="AppInstall.html">Installation and configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="AppReleaseNotes.html">Release notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="AppEULA.html">Licence agreement</a></li>
<li class="toctree-l2"><a class="reference internal" href="../command_line_tutorial.html">Getting started with MNE command line</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../mne-python.html">MNE with Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mne-cpp.html">MNE with CPP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cite.html">Cite MNE and MNE-Python</a></li>
</ul>

<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script><h3>Versions</h3>
<ul class="current">
    <li class="toctree-l1"><a href=http://martinos.org/mne/stable>Stable</a></li>
    <li class="toctree-l1"><a href=http://martinos.org/mne/dev>Development</a></li>
</ul>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="miscellaneous-utilities">
<span id="ch-misc"></span><h1>Miscellaneous utilities<a class="headerlink" href="#miscellaneous-utilities" title="Permalink to this headline">¶</a></h1>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>This Chapter describes various utility programs included
with the MNE software. Each utility documentation consists of a
brief description of the purpose followed by the specification of
command-line options.</p>
</div>
<div class="section" id="finding-software-versions">
<span id="chdfigbg"></span><h2>Finding software versions<a class="headerlink" href="#finding-software-versions" title="Permalink to this headline">¶</a></h2>
<p>The utility mne_list_versions lists
version numbers and compilation dates of all software modules that
provide this information. This administration utility is located
in <tt class="docutils literal"><span class="pre">$MNE_ROOT/bin/admin</span></tt> , The output from mne_list_versions or
output of individual modules with <tt class="docutils literal"><span class="pre">--version</span></tt> option
is useful when bugs are reported to the developers of MNE software.</p>
</div>
<div class="section" id="listing-contents-of-a-fif-file">
<span id="chdhedef"></span><h2>Listing contents of a fif file<a class="headerlink" href="#listing-contents-of-a-fif-file" title="Permalink to this headline">¶</a></h2>
<p>Using the utility mne_show_fiff it
is possible to display information about the contents of a fif file
to the standard output. The command line options for mne_show_fiff are:</p>
<p><strong>&#8212;version</strong></p>
<blockquote>
<div>Show the program version and compilation date.</div></blockquote>
<p><strong>&#8212;help</strong></p>
<blockquote>
<div>List the command-line options.</div></blockquote>
<p><strong>&#8212;in  &lt;*name*&gt;</strong></p>
<blockquote>
<div>Specifies the fif file whose contents will be listed.</div></blockquote>
<p><strong>&#8212;verbose</strong></p>
<blockquote>
<div>Produce a verbose output. The data of most tags is included in the output.
This excludes matrices and vectors. Only the first 80 characters
of strings are listed unless the <tt class="docutils literal"><span class="pre">--long</span></tt> option is present.</div></blockquote>
<p><strong>&#8212;blocks</strong></p>
<blockquote>
<div>Only list the blocks (the tree structure) of the file. The tags
within each block are not listed.</div></blockquote>
<p><strong>&#8212;indent  &lt;*number*&gt;</strong></p>
<blockquote>
<div>Number of spaces for indentation for each deeper level in the tree structure
of the fif files. The default indentation is 3 spaces in terse and
no spaces in verbose listing mode.</div></blockquote>
<p><strong>&#8212;long</strong></p>
<blockquote>
<div>List all data from string tags instead of the first 80 characters.
This options has no effect unless the <tt class="docutils literal"><span class="pre">--verbose</span></tt> option
is also present.</div></blockquote>
<p><strong>&#8212;tag  &lt;*number*&gt;</strong></p>
<blockquote>
<div>List only tags of this kind. Multiple <tt class="docutils literal"><span class="pre">--tag</span></tt> options
can be specified to list several different kinds of data.</div></blockquote>
<p>mne_show_fiff reads the
explanations of tag kinds, block kinds, and units from <tt class="docutils literal"><span class="pre">$MNE_ROOT/share/mne/fiff_explanations.txt</span></tt> .</p>
</div>
<div class="section" id="data-file-modification-utilities">
<h2>Data file modification utilities<a class="headerlink" href="#data-file-modification-utilities" title="Permalink to this headline">¶</a></h2>
<p>This section contains utilities which can be used to add
information or fix existing information in MEG/EEG data fif files.
Unless otherwise noted these utilities can be applied to both raw
and evoked data files.</p>
<div class="section" id="designating-bad-channels-mne-mark-bad-channels">
<span id="chddhbee"></span><h3>Designating bad channels: mne_mark_bad_channels<a class="headerlink" href="#designating-bad-channels-mne-mark-bad-channels" title="Permalink to this headline">¶</a></h3>
<p>This utility adds or replaces information about unusable
(bad) channels. The command line options are:</p>
<p><strong>&#8212;version</strong></p>
<blockquote>
<div>Show the program version and compilation date.</div></blockquote>
<p><strong>&#8212;help</strong></p>
<blockquote>
<div>List the command-line options.</div></blockquote>
<p><strong>&#8212;bad  &lt;*filename*&gt;</strong></p>
<blockquote>
<div>Specify a text file containing the names of the bad channels, one channel
name per line. The names of the channels in this file must match
those in the data file exactly. If this option is missing, the bad channel
information is cleared.</div></blockquote>
<p>** &lt;<em>data file name</em>&gt;**</p>
<blockquote>
<div>The remaining arguments are taken as data file names to be modified.</div></blockquote>
</div>
<div class="section" id="fixing-the-encoding-of-the-trigger-channel-mne-fix-stim14">
<span id="chdbfdic"></span><h3>Fixing the encoding of the trigger channel: mne_fix_stim14<a class="headerlink" href="#fixing-the-encoding-of-the-trigger-channel-mne-fix-stim14" title="Permalink to this headline">¶</a></h3>
<p>Some earlier versions of the Neuromag acquisition software
had a problem with the encoding of the eighth bit on the digital
stimulus channel STI 014. This problem has been now fixed. Old data
files can be fixed with mne_fix_stim14 ,
which takes raw data file names as arguments. mne_fix_stim14 also
changes the calibration of STI 014 to unity. If the encoding of
STI 014 is already correct, running mne_fix_stim14 will
not have any effect on the raw data.</p>
<p>In newer Neuromag Vectorview systems with 16-bit digital
inputs the upper two bytes of the samples may be incorrectly set
when stimulus input 16 is used and the data are acquired in the
32-bit  mode. This problem can be fixed by running mne_fix_stim14 on
a raw data file with the <tt class="docutils literal"><span class="pre">--32</span></tt> option:</p>
<p><tt class="docutils literal"><span class="pre">mne_fix_stim14</span> <span class="pre">--32</span></tt>  &lt;<em>raw data file</em>&gt;</p>
<p>In this case, the correction will be applied to the stimulus
channels &#8216;STI101&#8217; and &#8216;STI201&#8217;.</p>
</div>
<div class="section" id="updating-eeg-location-info-mne-check-eeg-locations">
<span id="chdjgggc"></span><h3>Updating EEG location info: mne_check_eeg_locations<a class="headerlink" href="#updating-eeg-location-info-mne-check-eeg-locations" title="Permalink to this headline">¶</a></h3>
<p>Some versions of the Neuromag acquisition software did not
copy the EEG channel location information properly from the Polhemus
digitizer information data block to the EEG channel information
records if the number of EEG channels exceeds 60. The purpose of mne_check_eeg_locations is
to detect this problem and fix it, if requested. The command-line
options are:</p>
<p><strong>&#8212;version</strong></p>
<blockquote>
<div>Show the program version and compilation date.</div></blockquote>
<p><strong>&#8212;help</strong></p>
<blockquote>
<div>List the command-line options.</div></blockquote>
<p><strong>&#8212;file  &lt;*name*&gt;</strong></p>
<blockquote>
<div>Specify the measurement data file to be checked or modified.</div></blockquote>
<p><strong>&#8212;dig  &lt;*name*&gt;</strong></p>
<blockquote>
<div>Name of the file containing the Polhemus digitizer information. Default
is the data file name.</div></blockquote>
<p><strong>&#8212;fix</strong></p>
<blockquote>
<div>By default mne_check_eeg_locations only
checks for missing EEG locations (locations close to the origin).
With &#8211;fix mne_check_eeg_locations reads
the Polhemus data from the specified file and copies the EEG electrode
location information to the channel information records in the measurement
file. There is no harm running mne_check_eeg_locations on
a data file even if the EEG channel locations were correct in the
first place.</div></blockquote>
</div>
<div class="section" id="updating-magnetometer-coil-types-mne-fix-mag-coil-types">
<span id="chdgaajc"></span><h3>Updating magnetometer coil types: mne_fix_mag_coil_types<a class="headerlink" href="#updating-magnetometer-coil-types-mne-fix-mag-coil-types" title="Permalink to this headline">¶</a></h3>
<p>The purpose of mne_fix_mag_coil_types is
to change coil type 3022 to 3024 in the MEG channel definition records
in the data files specified on the command line.</p>
<p>As shown in Tables 5.2 and 5.3, the Neuromag Vectorview systems
can contain magnetometers with two different coil sizes (coil types
3022 and 3023 vs. 3024). The systems incorporating coils of type
3024 were introduced last. At some sites the data files have still
defined the magnetometers to be of type 3022 to ensure compatibility
with older versions of Neuromag software. In the MNE software as
well as in the present version of Neuromag software coil type 3024
is fully supported. Therefore, it is now safe to upgrade the data
files to use the true coil type.</p>
<p>If the <tt class="docutils literal"><span class="pre">--magnes</span></tt> option is specified, the 4D
Magnes magnetometer coil type (4001) is changed to 4D Magnes gradiometer
coil type (4002). Use this option always and <em>only
if</em> your Magnes data comes from a system with axial gradiometers
instead of magnetometers. The fif converter included with the Magnes
system does not assign the gradiometer coil type correctly.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The effect of the difference between the coil    sizes of magnetometer types 3022 and 3024 on the current estimates    computed by the MNE software is very small. Therefore the use of mne_fix_mag_coil_types is    not mandatory.</p>
</div>
</div>
<div class="section" id="modifying-channel-names-and-types-mne-rename-channels">
<span id="chdcfeaj"></span><h3>Modifying channel names and types: mne_rename_channels<a class="headerlink" href="#modifying-channel-names-and-types-mne-rename-channels" title="Permalink to this headline">¶</a></h3>
<p>Sometimes it is necessary to change the names types of channels
in MEG/EEG data files. Such situations include:</p>
<ul class="simple">
<li>Designating an EEG as an EOG channel.
For example, the EOG channels are not recognized as such in the
fif files converted from CTF data files.</li>
<li>Changing the name of the digital trigger channel of interest
to STI 014 so that mne_browse_raw and mne_process_raw will
recognize the correct channel without the need to specify the <tt class="docutils literal"><span class="pre">--digtrig</span></tt>
option or the MNE_TRIGGER_CH_NAME environment variable every time a
data file is loaded.</li>
</ul>
<p>The utility mne_rename_channels was
designed to meet the above needs. It recognizes the following command-line
options:</p>
<p><strong>&#8212;version</strong></p>
<blockquote>
<div>Show the program version and compilation date.</div></blockquote>
<p><strong>&#8212;help</strong></p>
<blockquote>
<div>List the command-line options.</div></blockquote>
<p><strong>&#8212;fif  &lt;*name*&gt;</strong></p>
<blockquote>
<div>Specifies the name of the data file to modify.</div></blockquote>
<p><strong>&#8212;alias  &lt;*name*&gt;</strong></p>
<blockquote>
<div>Specifies the text file which contains the modifications to be applied,
see below.</div></blockquote>
<p><strong>&#8212;revert</strong></p>
<blockquote>
<div>Reverse the roles of old and new channel names in the alias file.</div></blockquote>
<p>Each line in the alias file contains the old name and new
name for a channel, separated by a colon. The old name is a name
of one of the channels presently in the file and the new name is
the name to be assigned to it. The old name must match an existing
channel name in the file exactly. The new name may be followed by
another colon and a number which is the channel type to be assigned
to this channel. The channel type options are listed in <a class="reference internal" href="#chdfhgca"><em>Channel types.</em></a>.</p>
<table border="1" class="docutils" id="chdfhgca">
<caption>Channel types.</caption>
<colgroup>
<col width="39%" />
<col width="61%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Channel type</th>
<th class="head">Corresponding number</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>MEG</td>
<td>1</td>
</tr>
<tr class="row-odd"><td>MCG</td>
<td>201</td>
</tr>
<tr class="row-even"><td>EEG</td>
<td>2</td>
</tr>
<tr class="row-odd"><td>EOG</td>
<td>202</td>
</tr>
<tr class="row-even"><td>EMG</td>
<td>302</td>
</tr>
<tr class="row-odd"><td>ECG</td>
<td>402</td>
</tr>
<tr class="row-even"><td>MISC</td>
<td>502</td>
</tr>
<tr class="row-odd"><td>STIM</td>
<td>3</td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Do not attempt to designate MEG channels    to EEG channels or vice versa. This may result in strange errors    during source estimation.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You might consider renaming the EEG channels    with descriptive labels related to the standard 10-20 system. This    allows you to use standard EEG channel names when defining derivations,    see <a class="reference internal" href="#chdhjabj"><em>Creating a derivation file</em></a> and <a class="reference internal" href="browse.html#cacfhafh"><em>Load derivations</em></a>, as well as in the    channel selection files used in mne_browse_raw ,    see <a class="reference internal" href="browse.html#caccjejd"><em>Selection</em></a>.</p>
</div>
</div>
<div class="section" id="modifying-trigger-channel-data-mne-add-triggers">
<span id="chdbdddf"></span><h3>Modifying trigger channel data: mne_add_triggers<a class="headerlink" href="#modifying-trigger-channel-data-mne-add-triggers" title="Permalink to this headline">¶</a></h3>
<div class="section" id="purpose">
<h4>Purpose<a class="headerlink" href="#purpose" title="Permalink to this headline">¶</a></h4>
<p>The utility mne_add_triggers modifies
the digital trigger channel (STI 014) in raw data files
to include additional transitions. Since the raw data file is modified,
it is possible to make irreversible changes. Use this utility with
caution. It is recommended that you never run mne_add_triggers on
an original raw data file.</p>
</div>
<div class="section" id="command-line-options">
<h4>Command line options<a class="headerlink" href="#command-line-options" title="Permalink to this headline">¶</a></h4>
<p>mne_add_triggers accepts
the following command-line options:</p>
<p><strong>&#8212;version</strong></p>
<blockquote>
<div>Show the program version and compilation date.</div></blockquote>
<p><strong>&#8212;help</strong></p>
<blockquote>
<div>List the command-line options.</div></blockquote>
<p><strong>&#8212;raw  &lt;*name*&gt;</strong></p>
<blockquote>
<div>Specifies the raw data file to be modified.</div></blockquote>
<p><strong>&#8212;trg  &lt;*name*&gt;</strong></p>
<blockquote>
<div>Specifies the trigger line modification list. This text file should
contain two entries per line: the sample number and the trigger
number to be added into the file. The number of the first sample
in the file is zero. It is recommended that trigger numbers whose
binary equivalent has lower eight bits equal to zero are used to
avoid conflicts with the ordinary triggers occurring in the file.</div></blockquote>
<p><strong>&#8212;delete</strong></p>
<blockquote>
<div>Delete the triggers defined by the trigger file instead of adding
them. This enables changing the file to its original state, provided
that the trigger file is preserved.</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Since mne_browse_raw and mne_process_raw can    employ an event file which effectively adds new trigger instants, mne_add_triggers is    for the most part obsolete but it has been retained in the MNE software    suite for backward compatibility.</p>
</div>
</div>
</div>
<div class="section" id="removing-identifying-information">
<span id="chdijhic"></span><h3>Removing identifying information<a class="headerlink" href="#removing-identifying-information" title="Permalink to this headline">¶</a></h3>
<p>Depending no the settings during acquisition in the Elekta-Neuromag EEG/MEG
systems the data files may contain subject identifying information
in unencrypted form. The utility mne_anonymize was
written to clear tags containing such information from a fif file.
Specifically, this utility removes the following tags from the fif
file:</p>
<table border="1" class="docutils" id="chdehbcg">
<caption>Tags cleared by mne_anonymize .</caption>
<colgroup>
<col width="34%" />
<col width="66%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Tag</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>FIFF_SUBJ_FIRST_NAME</td>
<td>First name of the subject</td>
</tr>
<tr class="row-odd"><td>FIFF_SUBJ_MIDDLE_NAME</td>
<td>Middle name of the subject</td>
</tr>
<tr class="row-even"><td>FIFF_SUBJ_LAST_NAME</td>
<td>Last name of the subject</td>
</tr>
<tr class="row-odd"><td>FIFF_SUBJ_BIRTH_DAY</td>
<td>Birthday of the subject (Julian day number)</td>
</tr>
<tr class="row-even"><td>FIFF_SUBJ_SEX</td>
<td>The sex of the subject</td>
</tr>
<tr class="row-odd"><td>FIFF_SUBJ_HAND</td>
<td>Handedness of the subject</td>
</tr>
<tr class="row-even"><td>FIFF_SUBJ_WEIGHT</td>
<td>Weight of the subject in kg</td>
</tr>
<tr class="row-odd"><td>FIFF_SUBJ_HEIGHT</td>
<td>Height of the subject in m</td>
</tr>
<tr class="row-even"><td>FIFF_SUBJ_COMMENT</td>
<td>Comment about the subject</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">mne_anonymize normally    keeps the FIFF_SUBJ_HIS_ID tag which can be used to identify the    subjects uniquely after the information listed in <a class="reference internal" href="#chdehbcg"><em>Tags cleared by mne_anonymize .</em></a> have    been removed. If the <tt class="docutils literal"><span class="pre">--his</span></tt> option is specified on the command line,    the FIFF_SUBJ_HIS_ID tag will be removed as well. The data of the    tags listed in <a class="reference internal" href="#chdehbcg"><em>Tags cleared by mne_anonymize .</em></a> and the optional FIFF_SUBJ_HIS_ID    tag are overwritten with zeros and the space claimed by omitting    these tags is added to the free space list of the file. Therefore, after mne_anonymize has    processed a data file there is no way to recover the removed information.    Use this utility with caution.</p>
</div>
<p>mne_anonymize recognizes
the following command-line options:</p>
<p><strong>&#8212;version</strong></p>
<blockquote>
<div>Show the program version and compilation date.</div></blockquote>
<p><strong>&#8212;help</strong></p>
<blockquote>
<div>List the command-line options.</div></blockquote>
<p><strong>&#8212;his</strong></p>
<blockquote>
<div>Remove the FIFF_SUBJ_HIS_ID tag as well, see above.</div></blockquote>
<p><strong>&#8212;file  &lt;*name*&gt;</strong></p>
<blockquote>
<div>Specifies the name of the file to be modified.</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You need write permission to the file to be    processed.</p>
</div>
</div>
<div class="section" id="copying-the-processing-history">
<span id="cjacecah"></span><h3>Copying the processing history<a class="headerlink" href="#copying-the-processing-history" title="Permalink to this headline">¶</a></h3>
<p>In order for the inverse operator calculation to work correctly
with data processed with the Elekta-Neuromag Maxfilter (TM) software,
the so-called <em>processing history</em> block must
be included in data files. Previous versions of the MNE Matlab functions
did not copy processing history to files saved. As of March 30,
2009, the Matlab toolbox routines fiff_start_writing_raw and fiff_write_evoked have
been enchanced to include these data to the output file as appropriate.
If you have older raw data files created in Matlab from input which
has been processed Maxfilter, it is necessary to copy the <em>processing
history</em> block from the original to modified raw data
file using the mne_copy_processing_history utility described
below. The raw data processing programs mne_browse_raw and mne_process_raw have
handled copying of the processing history since revision 2.5 of
the MNE software.</p>
<p>mne_copy_processing_history is
simple to use:</p>
<p><tt class="docutils literal"><span class="pre">mne_copy_processing_history</span> <span class="pre">--from</span></tt>  &lt;<em>from</em>&gt; <tt class="docutils literal"><span class="pre">--to</span></tt>  &lt;<em>to</em>&gt; ,</p>
<p>where  &lt;<em>from</em>&gt; is an
original raw data file containing the processing history and  &lt;<em>to</em>&gt; is
a file output with older MNE Matlab routines. Be careful: this operation
cannot be undone. If the  &lt;<em>from</em>&gt; file
does not have the processing history block or the  &lt;<em>to</em>&gt; file
already has it, the destination file remains unchanged.</p>
</div>
</div>
<div class="section" id="creating-a-derivation-file">
<span id="chdhjabj"></span><h2>Creating a derivation file<a class="headerlink" href="#creating-a-derivation-file" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id1">
<h3>Purpose<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<p>In mne_browse_raw , channel
derivations are defined as linear combinations of real channels
existing in the data files. The utility mne_make_derivations reads
derivation data from a suitably formatted text file and produces
a fif file containing the weights of derived channels as a sparse
matrix. Two input file formats are accepted:</p>
<ul class="simple">
<li>A file containing arithmetic expressions
defining the derivations and</li>
<li>A file containing a matrix which specifies the weights of
the channels in each derivation.</li>
</ul>
<p>Both of these formats are described in</p>
</div>
<div class="section" id="id2">
<h3>Command-line options<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<p>mne_make_derivations recognizes
the following command-line options:</p>
<p><strong>&#8212;version</strong></p>
<blockquote>
<div>Show the program version and compilation date.</div></blockquote>
<p><strong>&#8212;help</strong></p>
<blockquote>
<div>List the command-line options.</div></blockquote>
<p><strong>&#8212;in  &lt;*name*&gt;</strong></p>
<blockquote>
<div>Specifies a measurement file which contains the EEG electrode locations.
This file is not modified.</div></blockquote>
<p><strong>&#8212;inmat  &lt;*name*&gt;</strong></p>
<blockquote>
<div>Specifies the output file where the layout is stored. Suffix <tt class="docutils literal"><span class="pre">.lout</span></tt> is recommended
for layout files. mne_analyze and mne_browse_raw look
for the custom layout files from the directory <tt class="docutils literal"><span class="pre">$HOME/.mne/lout</span></tt> .</div></blockquote>
<p><strong>&#8212;trans</strong></p>
<blockquote>
<div>Indicates that the file specified with the <tt class="docutils literal"><span class="pre">--inmat</span></tt> option
contains a transpose of the derivation matrix.</div></blockquote>
<p><strong>&#8212;thresh  &lt;*value*&gt;</strong></p>
<blockquote>
<div>Specifies the threshold between values to be considered zero and non-zero
in the input file specified with the <tt class="docutils literal"><span class="pre">--inmat</span></tt> option.
The default threshold is <img class="math" src="../_images/math/269435a5d5273bd7237630944032e7b2e8f9ac59.png" alt="10^{-6}"/>.</div></blockquote>
<p><strong>&#8212;out  &lt;*name*&gt;</strong></p>
<blockquote>
<div>Specifies output fif file to contain the derivation data. The recommended
name of the derivation file has the format  &lt;<img class="math" src="../_images/math/97d7f01d861102fc5779e5c68c780334cadc9d51.png" alt="name"/>&gt; <tt class="docutils literal"><span class="pre">-deriv.fif</span></tt> .</div></blockquote>
<p><strong>&#8212;list  &lt;*name*&gt;</strong></p>
<blockquote>
<div>List the contents of a derivation file to standard output. If this
option is missing and <tt class="docutils literal"><span class="pre">--out</span></tt> is specified, the content
of the output file will be listed once it is complete. If neither <tt class="docutils literal"><span class="pre">--list</span></tt> nor <tt class="docutils literal"><span class="pre">--out</span></tt> is present,
and <tt class="docutils literal"><span class="pre">--in</span></tt> or <tt class="docutils literal"><span class="pre">--inmat</span></tt> is specified, the
interpreted contents of the input file is listed.</div></blockquote>
</div>
<div class="section" id="derivation-file-formats">
<h3>Derivation file formats<a class="headerlink" href="#derivation-file-formats" title="Permalink to this headline">¶</a></h3>
<p>All lines in the input files starting with the pound sign
(#) are considered to be comments. The format of a derivation in
a arithmetic input file is:</p>
<div class="math">
<p><img src="../_images/math/e77a466ef7df761235169cedeed4cb81705bffaa.png" alt="\langle name \rangle = [\langle w_1 \rangle *] \langle name_1 \rangle + [\langle w_2 \rangle *] \langle name_2 \rangle \dotso"/></p>
</div><p>where &lt;<img class="math" src="../_images/math/97d7f01d861102fc5779e5c68c780334cadc9d51.png" alt="name"/>&gt; is the
name of the derived channel, <img class="math" src="../_images/math/91ff926c8493998ba803939e16f180036d73c00f.png" alt="name_k"/> are
the names of the channels comprising the derivation, and <img class="math" src="../_images/math/0ee6286648e37df7b74c51a73871491a98fd9a88.png" alt="w_k"/> are
their weights. Note that spaces are necessary between the items.
Channel names containing spaces must be put in quotes. For example,</p>
<p><tt class="docutils literal"><span class="pre">EEG-diff</span> <span class="pre">=</span> <span class="pre">&quot;EEG</span> <span class="pre">003&quot;</span> <span class="pre">-</span> <span class="pre">&quot;EEG</span> <span class="pre">002&quot;</span></tt></p>
<p>defines a channel <tt class="docutils literal"><span class="pre">EEG-diff</span></tt> which is a difference
between <tt class="docutils literal"><span class="pre">EEG</span> <span class="pre">003</span></tt> and <tt class="docutils literal"><span class="pre">EEG</span> <span class="pre">002</span></tt> . Similarly,</p>
<p><tt class="docutils literal"><span class="pre">EEG-der</span> <span class="pre">=</span> <span class="pre">3</span> <span class="pre">*</span> <span class="pre">&quot;EEG</span> <span class="pre">010&quot;</span> <span class="pre">-</span> <span class="pre">2</span> <span class="pre">*</span> <span class="pre">&quot;EEG</span> <span class="pre">002&quot;</span></tt></p>
<p>defines a channel which is three times <tt class="docutils literal"><span class="pre">EEG</span> <span class="pre">010</span></tt> minus
two times <tt class="docutils literal"><span class="pre">EEG</span> <span class="pre">002</span></tt> .</p>
<p>The format of a matrix derivation file is:</p>
<div class="math">
<p><img src="../_images/math/16791e8baed965187401c44aa1fbd608753268c0.png" alt="\langle nrow \rangle \langle ncol \rangle \langle names\ of\ the\ input\ channels \rangle \langle name_1 \rangle \langle weights \rangle \dotso"/></p>
</div><p>The combination of the two arithmetic examples, above can
be thus represented as:</p>
<p><tt class="docutils literal"><span class="pre">2</span> <span class="pre">3</span> <span class="pre">&quot;EEG</span> <span class="pre">002&quot;</span> <span class="pre">&quot;EEG</span> <span class="pre">003&quot;</span> <span class="pre">&quot;EEG</span> <span class="pre">010&quot;</span> <span class="pre">EEG-diff</span> <span class="pre">-1</span> <span class="pre">1</span>&nbsp; <span class="pre">0</span> <span class="pre">EEG-der</span> <span class="pre">-2</span> <span class="pre">0</span>&nbsp; <span class="pre">3</span></tt></p>
<p>Before a derivation is accepted to use by mne_browse_raw ,
the following criteria have to be met:</p>
<ul class="simple">
<li>All channels to be combined into a single
derivation must have identical units of measure.</li>
<li>All channels in a single derivation have to be of the same
kind, <em>e.g.</em>, MEG channels or EEG channels.</li>
<li>All channels specified in a derivation have to be present
in the currently loaded data set.</li>
</ul>
<p>The validity check is done when a derivation file is loaded
into mne_browse_raw , see <a class="reference internal" href="browse.html#cacfhafh"><em>Load derivations</em></a>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You might consider renaming the EEG channels    with descriptive labels related to the standard 10-20 system using    the mne_rename_channels utility,    see <a class="reference internal" href="#chdcfeaj"><em>Modifying channel names and types: mne_rename_channels</em></a>. This allows you to use standard EEG    channel names in the derivations you define as well as in the channel    selection files used in mne_browse_raw ,    see <a class="reference internal" href="browse.html#caccjejd"><em>Selection</em></a>.</p>
</div>
</div>
</div>
<div class="section" id="creating-a-custom-eeg-layout">
<span id="chddgdja"></span><h2>Creating a custom EEG layout<a class="headerlink" href="#creating-a-custom-eeg-layout" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id3">
<h3>Purpose<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<p>Both MNE software (mne_analyze and mne_browse_raw)
and Neuromag software (xplotter and xfit)
employ text layout files to create topographical displays of MEG
and EEG data. While the MEG channel layout is fixed, the EEG layout
varies from experiment to experiment, depending on the number of
electrodes used and the electrode cap configuration. The utility mne_make_eeg_layout was
created to produce custom EEG layout files based on the EEG electrode
location information included in the channel description records.</p>
<p>mne_make_eeg_layout uses
azimuthal equidistant projection to map the EEG channel locations
onto a plane. The mapping consists of the following steps:</p>
<ul class="simple">
<li>A sphere is fitted to the electrode
locations and the locations are translated by the location of the
origin of the best-fitting sphere.</li>
<li>The spherical coordinates (<img class="math" src="../_images/math/c6d83f44e641552ebc20f736bbca0a9423098e78.png" alt="r_k"/>, <img class="math" src="../_images/math/1d560e817881bebd81c5666d54058db8840da516.png" alt="\theta_k"/>, and <img class="math" src="../_images/math/34ea3b8fe46ef695984759103d7bcdecd553f321.png" alt="\phi_k"/>)
corresponding to each translated electrode location are computed.</li>
<li>The projected locations <img class="math" src="../_images/math/957955ba156ab28c1dfd72294ab0368cab522fe5.png" alt="u_k = R \theta_k \cos{\phi_k}"/> and <img class="math" src="../_images/math/acf36714d626a6d0049f67462d35dd2f9368cea6.png" alt="v_k = R \theta_k \sin{\phi_k}"/> are
computed. By default, <img class="math" src="../_images/math/1d1f41c3ce6beb1be04bcad3ff5a882fa51af187.png" alt="R = 20/{^{\pi}/_2}"/>, <em>i.e.</em> at
the equator (<img class="math" src="../_images/math/e19a98f7b2b8d7971e37a34b9ef1d0804032c95d.png" alt="\theta = ^{\pi}/_2"/>) the multiplier is
20. This projection radius can be adjusted with the <tt class="docutils literal"><span class="pre">--prad</span></tt> option.
Increasing or decreasing <img class="math" src="../_images/math/9d86170e7de539c0ff999de09621ee0c7b6c8ed0.png" alt="R"/> makes
the spacing between the channel viewports larger or smaller, respectively.</li>
<li>A viewport with width 5 and height 4 is placed centered at
the projected location. The width and height of the viewport can
be adjusted with the <tt class="docutils literal"><span class="pre">--width</span></tt> and <tt class="docutils literal"><span class="pre">--height</span></tt> options</li>
</ul>
<p>The command-line options are:</p>
<p><strong>&#8212;version</strong></p>
<blockquote>
<div>Show the program version and compilation date.</div></blockquote>
<p><strong>&#8212;help</strong></p>
<blockquote>
<div>List the command-line options.</div></blockquote>
<p><strong>&#8212;lout  &lt;*name*&gt;</strong></p>
<blockquote>
<div>Specifies the name of the layout file to be output.</div></blockquote>
<p><strong>&#8212;nofit</strong></p>
<blockquote>
<div>Do not fit a sphere to the electrode locations but use a standard sphere
center (<img class="math" src="../_images/math/23a30c379ebd22f732c3809382e40b9c0732b8d8.png" alt="x = y = 0"/>, and <img class="math" src="../_images/math/4154c36e54ab24fd620c897d71ca0c8170c3186e.png" alt="z = 40"/> mm) instead.</div></blockquote>
<p><strong>&#8212;prad  &lt;*value*&gt;</strong></p>
<blockquote>
<div>Specifies a non-standard projection radius <img class="math" src="../_images/math/9d86170e7de539c0ff999de09621ee0c7b6c8ed0.png" alt="R"/>,
see above.</div></blockquote>
<p><strong>&#8212;width  &lt;*value*&gt;</strong></p>
<blockquote>
<div>Specifies the width of the viewports. Default value = 5.</div></blockquote>
<p><strong>&#8212;height  &lt;*value*&gt;</strong></p>
<blockquote>
<div>Specifies the height of the viewports. Default value = 4.</div></blockquote>
</div>
</div>
<div class="section" id="adding-neighborhood-topology-information-to-source-spaces">
<span id="behcbcgg"></span><h2>Adding neighborhood/topology information to source spaces<a class="headerlink" href="#adding-neighborhood-topology-information-to-source-spaces" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id4">
<h3>Purpose<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h3>
<p>The utility mne_add_patch_info uses
the detailed cortical surface geometry information to add data about
cortical patches corresponding to each source space point. A new
copy of the source space(s) included in the input file is created
with the patch information included. In addition to the patch information, mne_add_patch_info can
optionally calculate distances, along the cortical surface, between
the vertices selected to the source space.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Depending on the speed of your computer and the options selected, mne_add_patch_info takes 5 - 30 minutes to run.</p>
</div>
</div>
<div class="section" id="cjagcdcc">
<span id="id5"></span><h3>Command line options<a class="headerlink" href="#cjagcdcc" title="Permalink to this headline">¶</a></h3>
<p>mne_add_patch_info accepts
the following command-line options:</p>
<p><strong>&#8212;version</strong></p>
<blockquote>
<div>Show the program version and compilation date.</div></blockquote>
<p><strong>&#8212;help</strong></p>
<blockquote>
<div>List the command-line options.</div></blockquote>
<p><strong>&#8212;verbose</strong></p>
<blockquote>
<div>Provide verbose output during the calculations.</div></blockquote>
<p><strong>&#8212;dist  &lt;*dist/mm*&gt;</strong></p>
<blockquote>
<div>Invokes the calculation of distances between vertices included in
the source space along the cortical surface. Only pairs whose distance in
the three-dimensional volume is less than the specified distance are
considered. For details, see <a class="reference internal" href="#cjaifjdd"><em>Computational details</em></a>, below.</div></blockquote>
<p><strong>&#8212;src  &lt;*name*&gt;</strong></p>
<blockquote>
<div>The input source space file. The source space files usually end
with <tt class="docutils literal"><span class="pre">-src.fif</span></tt> .</div></blockquote>
<p><strong>&#8212;srcp  &lt;*name*&gt;</strong></p>
<blockquote>
<div>The output source space file which will contain the patch information.
If the file exists it will overwritten without asking for permission.
A recommended naming convention is to add the letter <tt class="docutils literal"><span class="pre">p</span></tt> after the
source spacing included in the file name. For example, if the input
file is <tt class="docutils literal"><span class="pre">mh-7-src.fif</span></tt> , a recommended output file name
is <tt class="docutils literal"><span class="pre">mh-7p-src.fif</span></tt> .</div></blockquote>
<p><strong>&#8212;w  &lt;*name*&gt;</strong></p>
<blockquote>
<div>Name of a w file, which will contain the patch area information. Two
files will be created:  &lt;<em>name</em>&gt; <tt class="docutils literal"><span class="pre">-lh.w</span></tt> and  &lt;<em>name</em>&gt; <tt class="docutils literal"><span class="pre">-rh.w</span></tt> .
The numbers in the files are patch areas in <img class="math" src="../_images/math/775f9a47cab13160d45565c66ddff2c49eafed75.png" alt="\text{mm}^2"/>.
The source space vertices are marked with value 150.</div></blockquote>
<p><strong>&#8212;labeldir  &lt;*directory*&gt;</strong></p>
<blockquote>
<div>Create a label file corresponding to each of the patches in the
given directory. The directory must be created before running mne_add_patch_info .</div></blockquote>
</div>
<div class="section" id="computational-details">
<span id="cjaifjdd"></span><h3>Computational details<a class="headerlink" href="#computational-details" title="Permalink to this headline">¶</a></h3>
<p>By default, mne_add_patch_info creates
a copy of the source space(s) with the following additional information
for each vertex in the original dense triangulation of the cortex:</p>
<ul class="simple">
<li>The number of the closest active source
space vertex and</li>
<li>The distance to this vertex.</li>
</ul>
<p>This information can be used to determine, <em>e.g.</em>,
the sizes of the patches, their average normals, and the standard
deviation of the normal directions. This information is also returned
by the mne_read_source_space Matlab function as described in Table 10.28.</p>
<p>The <tt class="docutils literal"><span class="pre">--dist</span></tt> option to mne_add_patch_info invokes
the calculation of inter-vertex distances. These distances are computed
along the the cortical surface (usually the white matter) on which
the source space vertices are located.</p>
<p>Since the calculation of all possible distances would take
a very long time, the distance given with the <tt class="docutils literal"><span class="pre">--dist</span></tt> option allows
restriction to the neighborhood of each source space vertex. This
neighborhood is defined as the sphere around each source space vertex,
with radius given by the <tt class="docutils literal"><span class="pre">--dist</span></tt> option. Because the distance calculation
is done along the folded cortical surface whose details are given
by the dense triangulation of the cortical surface produced by FreeSurfer,
some of the distances computed will be larger than the value give
with &#8211;dist.</p>
</div>
</div>
<div class="section" id="converting-covariance-data-into-an-ssp-operator">
<h2>Converting covariance data into an SSP operator<a class="headerlink" href="#converting-covariance-data-into-an-ssp-operator" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id6">
<h3>Purpose<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h3>
<p>The utility mne_cov2proj picks
eigenvectors from a covariance matrix and outputs them as a signal-space
projection (SSP) file.</p>
</div>
<div class="section" id="id7">
<h3>Command line options<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h3>
<p>mne_cov2proj accepts the
following command-line options:</p>
<p><strong>&#8212;version</strong></p>
<blockquote>
<div>Show the program version and compilation date.</div></blockquote>
<p><strong>&#8212;help</strong></p>
<blockquote>
<div>List the command-line options.</div></blockquote>
<p><strong>&#8212;cov  &lt;*name*&gt;</strong></p>
<blockquote>
<div>The covariance matrix file to be used a source. The covariance matrix
files usually end with <tt class="docutils literal"><span class="pre">-cov.fif</span></tt> .</div></blockquote>
<p><strong>&#8212;proj  &lt;*name*&gt;</strong></p>
<blockquote>
<div>The output file to contain the projection. It is recommended that
the file name ends with <tt class="docutils literal"><span class="pre">-proj.fif</span></tt> .</div></blockquote>
<p><strong>&#8212;bad  &lt;*name*&gt;</strong></p>
<blockquote>
<div>Specify channels not to be included when an eigenvalue decomposition
of the covariance matrix is computed.</div></blockquote>
<p><strong>&#8212;include  &lt;*val1*&gt; [: &lt;*val2*&gt; ]</strong></p>
<blockquote>
<div>Select an eigenvector or a range of eigenvectors to include. It
is recommended that magnetometers, gradiometers, and EEG data are handled
separately with help of the <tt class="docutils literal"><span class="pre">--bad</span></tt> , <tt class="docutils literal"><span class="pre">--meg</span></tt> , <tt class="docutils literal"><span class="pre">--megmag</span></tt> , <tt class="docutils literal"><span class="pre">--meggrad</span></tt> ,
and <tt class="docutils literal"><span class="pre">--eeg</span></tt> options.</div></blockquote>
<p><strong>&#8212;meg</strong></p>
<blockquote>
<div>After loading the covariance matrix, modify it so that only elements corresponding
to MEG channels are included.</div></blockquote>
<p><strong>&#8212;eeg</strong></p>
<blockquote>
<div>After loading the covariance matrix, modify it so that only elements corresponding
to EEG channels are included.</div></blockquote>
<p><strong>&#8212;megmag</strong></p>
<blockquote>
<div>After loading the covariance matrix, modify it so that only elements corresponding
to MEG magnetometer channels are included.</div></blockquote>
<p><strong>&#8212;meggrad</strong></p>
<blockquote>
<div>After loading the covariance matrix, modify it so that only elements corresponding
to MEG planar gradiometer channels are included.</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The <tt class="docutils literal"><span class="pre">--megmag</span></tt> and <tt class="docutils literal"><span class="pre">--meggrad</span></tt> employ    the Vectorview channel numbering scheme to recognize MEG magnetometers    (channel names ending with &#8216;1&#8217;) and planar gradiometers    (other channels). Therefore, these options are only meaningful in    conjunction with data acquired with a Neuromag Vectorview system.</p>
</div>
</div>
</div>
<div class="section" id="fitting-a-sphere-to-a-surface">
<span id="chdechbf"></span><h2>Fitting a sphere to a surface<a class="headerlink" href="#fitting-a-sphere-to-a-surface" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id8">
<h3>Purpose<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h3>
<p>The utility mne_fit_sphere_to_surf finds
the sphere which best fits a given surface.</p>
</div>
<div class="section" id="id9">
<h3>Command line options<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h3>
<p>mne_fit_sphere_to_surf accepts
the following command-line options:</p>
<p><strong>&#8212;version</strong></p>
<blockquote>
<div>Show the program version and compilation date.</div></blockquote>
<p><strong>&#8212;help</strong></p>
<blockquote>
<div>List the command-line options.</div></blockquote>
<p><strong>&#8212;bem  &lt;*name*&gt;</strong></p>
<blockquote>
<div>A BEM file to use. The names of these files usually end with <tt class="docutils literal"><span class="pre">bem.fif</span></tt> or <tt class="docutils literal"><span class="pre">bem-sol.fif</span></tt> .</div></blockquote>
<p><strong>&#8212;surf  &lt;*name*&gt;</strong></p>
<blockquote>
<div>A FreeSurfer surface file to read. This is an alternative to using
a surface from the BEM file.</div></blockquote>
<p><strong>&#8212;scalp</strong></p>
<blockquote>
<div>Use the scalp surface instead of the inner skull surface in sphere
fitting. If the surface is specified with the <tt class="docutils literal"><span class="pre">--surf</span></tt> option,
this one is irrelevant.</div></blockquote>
<p><strong>&#8212;mritrans  &lt;*name*&gt;</strong></p>
<blockquote>
<div>A file containing a transformation matrix between the MEG head coordinates
and MRI coordinates. With this option, the sphere origin will be
output in MEG head coordinates. Otherwise the output will be in MRI
coordinates.</div></blockquote>
</div>
</div>
<div class="section" id="computing-sensitivity-maps">
<span id="chddcbgi"></span><h2>Computing sensitivity maps<a class="headerlink" href="#computing-sensitivity-maps" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id10">
<h3>Purpose<a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h3>
<p>mne_sensitivity_map computes
the size of the columns of the forward operator and outputs the
result in w files.</p>
</div>
<div class="section" id="id11">
<h3>Command line options<a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h3>
<p>mne_sensitivity_map accepts
the following command-line options:</p>
<p><strong>&#8212;version</strong></p>
<blockquote>
<div>Show the program version and compilation date.</div></blockquote>
<p><strong>&#8212;help</strong></p>
<blockquote>
<div>List the command-line options.</div></blockquote>
<p><strong>&#8212;fwd  &lt;*name*&gt;</strong></p>
<blockquote>
<div>Specifies a forward solution file to analyze. By default the MEG
forward solution is considered.</div></blockquote>
<p><strong>&#8212;proj  &lt;*name*&gt;</strong></p>
<blockquote>
<div>Specifies a file containing an SSP operator to be applied. If necessary,
multiple <tt class="docutils literal"><span class="pre">--proj</span></tt> options can be specified. For map types 1 - 4 (see
below), SSP is applied to the forward model data. For map types
5 and 6, the effects of SSP are evaluated against the unmodified
forward model.</div></blockquote>
<p><strong>&#8212;eeg</strong></p>
<blockquote>
<div>Use the EEG forward solution instead of the MEG one. It does not make
sense to consider a combination because of the different units of
measure. For the same reason, gradiometers and magnetometers have
to be handled separately, see <tt class="docutils literal"><span class="pre">--mag</span></tt> option below. By
default MEG gradiometers are included.</div></blockquote>
<p><strong>&#8212;mag</strong></p>
<blockquote>
<div>Include MEG magnetometers instead of gradiometers</div></blockquote>
<p><strong>&#8212;w  &lt;*name*&gt;</strong></p>
<blockquote>
<div>Specifies the stem of the output w files. To obtain the final output file
names, <tt class="docutils literal"><span class="pre">-lh.w</span></tt> and <tt class="docutils literal"><span class="pre">-rh.w</span></tt> is appended for
the left and right hemisphere, respectively.</div></blockquote>
<p><strong>&#8212;smooth  &lt;*number*&gt;</strong></p>
<blockquote>
<div>Specifies the number of smooth steps to apply to the resulting w files.
Default: no smoothing.</div></blockquote>
<p><strong>&#8212;map  &lt;*number*&gt;</strong></p>
<blockquote>
<div>Select the type of a sensitivity map to compute. At present, valid numbers
are 1 - 6. For details, see <a class="reference internal" href="#chdcdjij"><em>Available sensitivity maps</em></a>, below.</div></blockquote>
</div>
<div class="section" id="available-sensitivity-maps">
<span id="chdcdjij"></span><h3>Available sensitivity maps<a class="headerlink" href="#available-sensitivity-maps" title="Permalink to this headline">¶</a></h3>
<p>In the following, let</p>
<div class="math">
<p><img src="../_images/math/9c6a6b6e0d4af95bbaa9288eab78dc2bb1668e2d.png" alt="G_k = [g_{xk} g_{yk} g_{zk}]"/></p>
</div><p>denote the three consecutive columns of the gain matrix <img class="math" src="../_images/math/b92c09a649305a0aef3239729d93cdf941e0e5cf.png" alt="G"/> corresponding to
the fields of three orthogonal dipoles at source space location <img class="math" src="../_images/math/e9203da50e1059455123460d4e716c9c7f440cc3.png" alt="k"/>.
Further, lets assume that the source coordinate system has been
selected so that the <img class="math" src="../_images/math/84d7271dd9e78c1e05d6c3c6ecb60309ef7dfc73.png" alt="z"/> -axis points
to the cortical normal direction and the <img class="math" src="../_images/math/ba433fb15d4a342407ac3a29f01c1fbef83bd6e4.png" alt="xy"/> plane
is thus the tangent plane of the cortex at the source space location <img class="math" src="../_images/math/e9203da50e1059455123460d4e716c9c7f440cc3.png" alt="k"/>
Next, compute the SVD</p>
<div class="math">
<p><img src="../_images/math/3f5954c6bf1c8520f246c2f038d79ddff4301b4c.png" alt="G_k = U_k \Lambda_k V_k"/></p>
</div><p>and let <img class="math" src="../_images/math/1d29273408b695b84ac8371d165a5ab858d83b63.png" alt="g_{1k} = u_{1k} \lambda_{1k}"/>, where <img class="math" src="../_images/math/d9872edc094196082f37ce6f350006aab16073a5.png" alt="\lambda_{1k}"/> and <img class="math" src="../_images/math/cfa3e0d403eebe15c0585bf50cd7957beca7c4e6.png" alt="u_{1k}"/> are
the largest singular value and the corresponding left singular vector
of <img class="math" src="../_images/math/d2ae20311858ad773565107668f2ddee3f4baf81.png" alt="G_k"/>, respectively. It is easy to see
that <img class="math" src="../_images/math/ea3b2d6e3ff0eb2c9ddd760368e6ced92969744a.png" alt="g_{1k}"/> is has the largest power
among the signal distributions produced by unit dipoles at source
space location <img class="math" src="../_images/math/e9203da50e1059455123460d4e716c9c7f440cc3.png" alt="k"/>.</p>
<p>Furthermore, assume that the colums orthogonal matrix <img class="math" src="../_images/math/238651ed570dfe596d40dad4080e13f746bc0ce1.png" alt="U_P"/> (<img class="math" src="../_images/math/1fdd870ffa4d6e810e9fa5a297ac574dcfb9a04c.png" alt="U_P^T U_P = I"/>) contain
the orthogonal basis of the noise subspace corresponding to the signal
space projection (SSP) operator <img class="math" src="../_images/math/f48b617185733d8dd6712643f1ab17c736661a06.png" alt="P"/> specified
with one or more <tt class="docutils literal"><span class="pre">--proj</span></tt> options so that <img class="math" src="../_images/math/4865e50d3671e2000b8fe5406825e6228d0473eb.png" alt="P = I - U_P U_P^T"/>.
For more information on SSP, see <a class="reference internal" href="browse.html#cacchabi"><em>The Signal-Space Projection (SSP) method</em></a>.</p>
<p>With these definitions the map selections defined with the <tt class="docutils literal"><span class="pre">--map</span></tt> option correspond
to the following</p>
<p><strong>&#8212;map 1</strong></p>
<blockquote>
<div>Compute <img class="math" src="../_images/math/c31d23e20d14b63829a5704e48374e9140b3ab22.png" alt="\sqrt{g_{1k}^T g_{1k}} = \lambda_{1k}"/> at each source space point.
Normalize the result so that the maximum values equals one.</div></blockquote>
<p><strong>&#8212;map 2</strong></p>
<blockquote>
<div>Compute <img class="math" src="../_images/math/49c01d4aa346bed468af0116602259e0c0080ee0.png" alt="\sqrt{g_z^T g_z}"/> at each source space point.
Normalize the result so that the maximum values equals one. This
is the amplitude of the signals produced by unit dipoles normal
to the cortical surface.</div></blockquote>
<p><strong>&#8212;map 3</strong></p>
<blockquote>
<div>Compute <img class="math" src="../_images/math/a06d197bbecfa1239058a7874c6dc226f4a1c0cf.png" alt="\sqrt{g_z^T g_z / g_{1k}^T g_{1k}}"/> at each source space point.</div></blockquote>
<p><strong>&#8212;map 4</strong></p>
<blockquote>
<div>Compute <img class="math" src="../_images/math/4626af9698221a88b3a51b8b16f56044e53af48f.png" alt="1 - \sqrt{g_z^T g_z / g_{1k}^T g_{1k}}"/> at each source space point.
This could be called the <em>radiality index</em>.</div></blockquote>
<p><strong>&#8212;map 5</strong></p>
<blockquote>
<div>Compute the subspace correlation between <img class="math" src="../_images/math/a871bf501251d2d4fb9a0c881480f31493c80051.png" alt="g_z"/> and <img class="math" src="../_images/math/238651ed570dfe596d40dad4080e13f746bc0ce1.png" alt="U_P"/>: <img class="math" src="../_images/math/4358a687e6fddb7dd125fe4a04646672a541de70.png" alt="\text{subcorr}^2(g_z , U_P) = (g_z^T U_P U_P^T g_z)/(g_z^T g_z)"/>.
This index equals zero, if <img class="math" src="../_images/math/a871bf501251d2d4fb9a0c881480f31493c80051.png" alt="g_z"/> is
orthogonal to <img class="math" src="../_images/math/238651ed570dfe596d40dad4080e13f746bc0ce1.png" alt="U_P"/> and one if <img class="math" src="../_images/math/a871bf501251d2d4fb9a0c881480f31493c80051.png" alt="g_z"/> lies
in the subspace defined by <img class="math" src="../_images/math/238651ed570dfe596d40dad4080e13f746bc0ce1.png" alt="U_P"/>. This
map shows how close the field pattern of a dipole oriented perpendicular
to the cortex at each cortical location is to the subspace removed
by the SSP.</div></blockquote>
<p><strong>&#8212;map 6</strong></p>
<blockquote>
<div>Compute <img class="math" src="../_images/math/47e1e54b173c163237268577489bccb475854d17.png" alt="\sqrt{g_z^T P g_z / g_z^T g_z}"/>, which is the fraction
of the field pattern of a dipole oriented perpendicular to the cortex
at each cortical location remaining after applying the SSP a dipole
remaining</div></blockquote>
</div>
</div>
<div class="section" id="transforming-locations">
<span id="chdddjca"></span><h2>Transforming locations<a class="headerlink" href="#transforming-locations" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id12">
<h3>Purpose<a class="headerlink" href="#id12" title="Permalink to this headline">¶</a></h3>
<p>mne_transform_points applies
the coordinate transformation relating the MEG head coordinates
and the MRI coordinates to a set of locations listed in a text file.</p>
</div>
<div class="section" id="id13">
<h3>Command line options<a class="headerlink" href="#id13" title="Permalink to this headline">¶</a></h3>
<p>mne_transform_points accepts
the following command-line options:</p>
<p><strong>&#8212;version</strong></p>
<blockquote>
<div>Show the program version and compilation date.</div></blockquote>
<p><strong>&#8212;help</strong></p>
<blockquote>
<div>List the command-line options.</div></blockquote>
<p><strong>&#8212;in  &lt;*name*&gt;</strong></p>
<blockquote>
<div>Specifies the input file. The file must contain three numbers on
each line which are the <em>x</em>, <em>y</em>,
and <em>z</em> coordinates of point in space. By default,
the input is in millimeters.</div></blockquote>
<p><strong>&#8212;iso  &lt;*name*&gt;</strong></p>
<blockquote>
<div>Specifies a name of a fif file containing Isotrak data. If this
option is present file will be used as the input instead of the
text file specified with the <tt class="docutils literal"><span class="pre">--in</span></tt> option.</div></blockquote>
<p><strong>&#8212;trans  &lt;*name*&gt;</strong></p>
<blockquote>
<div>Specifies the name of a fif file containing the coordinate transformation
between the MEG head coordinates and MRI coordinates. If this file
is not present, the transformation will be replaced by a unit transform.</div></blockquote>
<p><strong>&#8212;out  &lt;*name*&gt;</strong></p>
<blockquote>
<div>Specifies the output file. This file has the same format as the
input file.</div></blockquote>
<p><strong>&#8212;hpts</strong></p>
<blockquote>
<div>Output the data in the head points (hpts)
format accepted by tkmedit . In
this format, the coordinates are preceded by a point category (hpi,
cardinal or fiducial, eeg, extra) and a sequence number, see <a class="reference internal" href="convert.html#cjadjebh"><em>The hpts format</em></a>.</div></blockquote>
<p><strong>&#8212;meters</strong></p>
<blockquote>
<div>The coordinates are listed in meters rather than millimeters.</div></blockquote>
<p><strong>&#8212;tomri</strong></p>
<blockquote>
<div>By default, the coordinates are transformed from MRI coordinates to
MEG head coordinates. This option reverses the transformation to
be from MEG head coordinates to MRI coordinates.</div></blockquote>
</div>
</div>
<div class="section" id="inquiring-and-changing-baselines">
<span id="chddidcc"></span><h2>Inquiring and changing baselines<a class="headerlink" href="#inquiring-and-changing-baselines" title="Permalink to this headline">¶</a></h2>
<p>The utility mne_change_baselines computes
baseline values and applies them to an evoked-response data file.
The command-line options are:</p>
<p><strong>&#8212;version</strong></p>
<blockquote>
<div>Show the program version and compilation date.</div></blockquote>
<p><strong>&#8212;help</strong></p>
<blockquote>
<div>List the command-line options.</div></blockquote>
<p><strong>&#8212;in  &lt;*name*&gt;</strong></p>
<blockquote>
<div>Specifies the input data file.</div></blockquote>
<p><strong>&#8212;set  &lt;*number*&gt;</strong></p>
<blockquote>
<div>The data set number to compute baselines from or to apply baselines
to. If this option is omitted, all average data sets in the input file
are processed.</div></blockquote>
<p><strong>&#8212;out  &lt;*name*&gt;</strong></p>
<blockquote>
<div>The output file.</div></blockquote>
<p><strong>&#8212;baselines  &lt;*name*&gt;</strong></p>
<blockquote>
<div>Specifies a text file which contains the baseline values to be applied. Each
line should contain a channel name, colon, and the baseline value
given in &#8216;native&#8217; units (T/m, T, or V). If this
option is encountered, the limits specified by previous <tt class="docutils literal"><span class="pre">--bmin</span></tt> and <tt class="docutils literal"><span class="pre">--bmax</span></tt> options will not
have an effect.</div></blockquote>
<p><strong>&#8212;list  &lt;*name*&gt;</strong></p>
<blockquote>
<div>Specifies a text file to contain the baseline values. Listing is
provided only if a specific data set is selected with the <tt class="docutils literal"><span class="pre">--set</span></tt> option.</div></blockquote>
<p><strong>&#8212;bmin  &lt;*value/ms*&gt;</strong></p>
<blockquote>
<div>Lower limit of the baseline. Effective only if <tt class="docutils literal"><span class="pre">--baselines</span></tt> option is
not present. Both <tt class="docutils literal"><span class="pre">--bmin</span></tt> and <tt class="docutils literal"><span class="pre">--bmax</span></tt> must
be present to compute the baseline values. If either <tt class="docutils literal"><span class="pre">--bmin</span></tt> or <tt class="docutils literal"><span class="pre">--bmax</span></tt> is
encountered, previous <tt class="docutils literal"><span class="pre">--baselines</span></tt> option will be ignored.</div></blockquote>
<p><strong>&#8212;bmax  &lt;*value/ms*&gt;</strong></p>
<blockquote>
<div>Upper limit of the baseline.</div></blockquote>
</div>
<div class="section" id="data-simulator">
<span id="chdecafd"></span><h2>Data simulator<a class="headerlink" href="#data-simulator" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id14">
<h3>Purpose<a class="headerlink" href="#id14" title="Permalink to this headline">¶</a></h3>
<p>The utility mne_simu creates
simulated evoked response data for investigation of the properties
of the inverse solutions. It computes MEG signals generated by dipoles
normal to the cortical mantle at one or several ROIs defined with
label files. Colored noise can be added to the signals.</p>
</div>
<div class="section" id="id15">
<h3>Command-line options<a class="headerlink" href="#id15" title="Permalink to this headline">¶</a></h3>
<p>mne_simu has the following
command-line options:</p>
<p><strong>&#8212;version</strong></p>
<blockquote>
<div>Show the program version and compilation date.</div></blockquote>
<p><strong>&#8212;help</strong></p>
<blockquote>
<div>List the command-line options.</div></blockquote>
<p><strong>&#8212;fwd  &lt;*name*&gt;</strong></p>
<blockquote>
<div>Specify a forward solution file to employ in the simulation.</div></blockquote>
<p><strong>&#8212;label  &lt;*name*&gt;</strong></p>
<blockquote>
<div>Specify a label</div></blockquote>
<p><strong>&#8212;meg</strong></p>
<blockquote>
<div>Provide MEG data in the output file.</div></blockquote>
<p><strong>&#8212;eeg</strong></p>
<blockquote>
<div>Provide EEG data in the output file.</div></blockquote>
<p><strong>&#8212;out  &lt;*name*&gt;</strong></p>
<blockquote>
<div>Specify the output file. By default, this will be an evoked data
file in the fif format.</div></blockquote>
<p><strong>&#8212;raw</strong></p>
<blockquote>
<div>Output the data as a raw data fif file instead of an evoked one.</div></blockquote>
<p><strong>&#8212;mat</strong></p>
<blockquote>
<div>Produce Matlab output of the simulated fields instead of the fif evoked
file.</div></blockquote>
<p><strong>&#8212;label  &lt;*name*&gt;</strong></p>
<blockquote>
<div>Define an ROI. Several label files can be present. By default, the sources
in the labels will have <img class="math" src="../_images/math/61696967808935c28edba1af4ce3b63ede193f38.png" alt="\cos^2"/> -shaped non-overlapping
timecourses, see below.</div></blockquote>
<p><strong>&#8212;timecourse  &lt;*name*&gt;</strong></p>
<blockquote>
<div>Specifies a text file which contains an expression for a source
time course, see <a class="reference internal" href="#chdcfibh"><em>Source waveform expressions</em></a>. If no &#8211;timecourse options
are present, the standard source time courses described in <a class="reference internal" href="#chdfiiii"><em>Simulated data</em></a> are used. Otherwise, the time course expressions
are read from the files specified. The time course expressions are
associated with the labels in the order they are specified. If the
number of expressions is smaller than the number of labels, the
last expression specified will reused for the remaining labels.</div></blockquote>
<p><strong>&#8212;sfreq  &lt;*freq/Hz*&gt;</strong></p>
<blockquote>
<div>Specifies the sampling frequency of the output data (default = 1000 Hz). This
option is used only with the time course files.</div></blockquote>
<p><strong>&#8212;tmin  &lt;*time/ms*&gt;</strong></p>
<blockquote>
<div>Specifies the starting time of the data, used only with time course files
(default -200 ms).</div></blockquote>
<p><strong>&#8212;tmax  &lt;*time/ms*&gt;</strong></p>
<blockquote>
<div>Specifies the ending time of the data, used only with time course files
(default 500 ms).</div></blockquote>
<p><strong>&#8212;seed  &lt;*number*&gt;</strong></p>
<blockquote>
<div>Specifies the seed for random numbers. This seed is used both for adding
noise, see <a class="reference internal" href="#chdfbjij"><em>Noise simulation</em></a> and for random numbers in source waveform
expressions, see <a class="reference internal" href="#chdcfibh"><em>Source waveform expressions</em></a>. If no seed is specified, the
current time in seconds since Epoch (January 1, 1970) is used.</div></blockquote>
<p><strong>&#8212;all</strong></p>
<blockquote>
<div>Activate all sources on the cortical surface uniformly. This overrides the <tt class="docutils literal"><span class="pre">--label</span></tt> options.</div></blockquote>
</div>
<div class="section" id="noise-simulation">
<span id="chdfbjij"></span><h3>Noise simulation<a class="headerlink" href="#noise-simulation" title="Permalink to this headline">¶</a></h3>
<p>Noise is added to the signals if the <tt class="docutils literal"><span class="pre">--senscov</span></tt> and <tt class="docutils literal"><span class="pre">--nave</span></tt> options
are present. If <tt class="docutils literal"><span class="pre">--nave</span></tt> is omitted the number of averages
is set to <img class="math" src="../_images/math/afac971ed6a94d6b3e9a74563281d1b77e96b14f.png" alt="L = 100"/>. The noise is computed
by first generating vectors of Gaussian random numbers <img class="math" src="../_images/math/e284dae85a953a6609ab238a166b6bde62c1de89.png" alt="n(t)"/> with <img class="math" src="../_images/math/23419009a7b85130965fe10027639b6358821a7a.png" alt="n_j(t) \sim N(0,1)"/>.
Thereafter, the noise-covariance matrix <img class="math" src="../_images/math/2bcc65482aa8e15cd4c9e9f2542451fb4e971a91.png" alt="C"/> is
used to color the noise:</p>
<div class="math">
<p><img src="../_images/math/f1e74e086c4f22f8814fd56413e942543632a40a.png" alt="n_c(t) = \frac{1}{\sqrt{L}} \Lambda U^T n(t)\ ,"/></p>
</div><p>where we have used the eigenvalue decomposition positive-definite
covariance matrix:</p>
<div class="math">
<p><img src="../_images/math/6d2680ced9eb9f85b76d26c17957b892a5031566.png" alt="C = U \Lambda^2 U^T\ ."/></p>
</div><p>Note that it is assumed that the noise-covariance matrix
is given for raw data, <em>i.e.</em>, for <img class="math" src="../_images/math/ab259a41d175a14967d70bcfe845f6880f89c027.png" alt="L = 1"/>.</p>
</div>
<div class="section" id="simulated-data">
<span id="chdfiiii"></span><h3>Simulated data<a class="headerlink" href="#simulated-data" title="Permalink to this headline">¶</a></h3>
<p>The default source waveform <img class="math" src="../_images/math/114d31bcb894c3a736f2f7ebb82f383543466cf2.png" alt="q_k"/> for
the <img class="math" src="../_images/math/95cd8c0e712982ebb308efa59408cf9962067b3c.png" alt="k^{th}"/> label is nonzero at times <img class="math" src="../_images/math/05e002db3dd08beb4466ff76fbd985dcb3213e16.png" alt="t_{kp} = (100(k - 1) + p)/f_s"/>, <img class="math" src="../_images/math/2e511954380e3dd9e7f51b947ec121b2b2dea310.png" alt="p = 0 \dotso 100"/> with:</p>
<div class="math">
<p><img src="../_images/math/836731e47109ad73f4f3a23ac31e9662a9ea1ea3.png" alt="q_k(t_{kp}) = Q_k \cos^2{(\frac{\pi p}{100} - \frac{\pi}{2})}\ ,"/></p>
</div><p>i.e., the source waveforms are non-overlapping 100-samples
wide <img class="math" src="../_images/math/61696967808935c28edba1af4ce3b63ede193f38.png" alt="\cos^2"/> pulses. The sampling frequency <img class="math" src="../_images/math/70892b5042d0911ff0df83c9ee98a7883eeccb6d.png" alt="f_s = 600"/> Hz.
The source amplitude <img class="math" src="../_images/math/7280907e16536ac3195d9f5ae85f25bfdd5a94e9.png" alt="Q_k"/> is determined
so that the strength of each of the dipoles in a label will be <img class="math" src="../_images/math/24748d0cc0d1ea69a0b3479a32a3401bc165e97f.png" alt="50 \text{nAm}/N_k"/>.</p>
<p>Let us denote the sums of the magnetic fields and electric
potentials produced by the dipoles normal to the cortical mantle
at label <img class="math" src="../_images/math/e9203da50e1059455123460d4e716c9c7f440cc3.png" alt="k"/> by <img class="math" src="../_images/math/5722016c3b6b6a8a3bf93235d6b2c9627dc3c676.png" alt="x_k"/>. The simulated
signals are then:</p>
<div class="math">
<p><img src="../_images/math/19529ce5a111eabc0fbff3570267c671c08515dc.png" alt="x(t_j) = \sum_{k = 1}^{N_s} {q_k(t_j) x_k + n_c(t_j)}\ ,"/></p>
</div><p>where <img class="math" src="../_images/math/f9b03df42cc4eecc1f289434c88139073ffd3847.png" alt="N_s"/> is the number of
sources.</p>
</div>
<div class="section" id="source-waveform-expressions">
<span id="chdcfibh"></span><h3>Source waveform expressions<a class="headerlink" href="#source-waveform-expressions" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">--timecourse</span></tt> option provides flexible possibilities
to define the source waveforms in a functional form. The source
waveform expression files consist of lines of the form:</p>
<blockquote>
<div>&lt;<em>variable</em>&gt; <tt class="docutils literal"><span class="pre">=</span></tt>  &lt;<em>arithmetic expression</em>&gt;</div></blockquote>
<p>Each file may contain multiple lines. At the end of the evaluation,
only the values in the variable <tt class="docutils literal"><span class="pre">y</span></tt> (<tt class="docutils literal"><span class="pre">q</span></tt> )
are significant, see <a class="reference internal" href="#chdjbiee"><em>Available variable names in source waveform expressions.</em></a>. They assume the role
of <img class="math" src="../_images/math/91bc7a570de522746d21a874c21a185a61980c96.png" alt="q_k(t_j)"/> to compute the simulated signals
as described in <a class="reference internal" href="#chdfiiii"><em>Simulated data</em></a>, above.</p>
<p>All expressions are case insensitive. The variables are vectors
with the length equal to the number of samples in the responses,
determined by the <tt class="docutils literal"><span class="pre">--tmin</span></tt> , <tt class="docutils literal"><span class="pre">--tmax</span></tt> , and <tt class="docutils literal"><span class="pre">--sfreq</span></tt> options.
The available variables are listed in <a class="reference internal" href="#chdjbiee"><em>Available variable names in source waveform expressions.</em></a>.</p>
<table border="1" class="docutils" id="chdjbiee">
<caption>Available variable names in source waveform expressions.</caption>
<colgroup>
<col width="29%" />
<col width="71%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Variable</th>
<th class="head">Meaning</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>x</td>
<td>time [s]</td>
</tr>
<tr class="row-odd"><td>t</td>
<td>current value of x in [ms]</td>
</tr>
<tr class="row-even"><td>y</td>
<td>the source amplitude [Am]</td>
</tr>
<tr class="row-odd"><td>q</td>
<td>synonym for y</td>
</tr>
<tr class="row-even"><td>a , b , c , d</td>
<td>help variables, initialized to zeros</td>
</tr>
</tbody>
</table>
<p>The arithmetic expressions can use usual arithmetic operations
as well as  mathematical functions listed in <a class="reference internal" href="#chdjibha"><em>Mathematical functions available for source waveform expressions</em></a>.
The arguments can be vectors or scalar numbers. In addition, standard
relational operators ( &lt;, &gt;, ==, &lt;=, &gt;=) and their textual
equivalents (lt, gt, eq, le, ge) are available. Table <a class="reference internal" href="#chddjehh"><em>Examples of source waveform expressions.</em></a> gives some
useful examples of source waveform expressions.</p>
<table border="1" class="docutils" id="chdjibha">
<caption>Mathematical functions available for source waveform expressions</caption>
<colgroup>
<col width="27%" />
<col width="73%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Function</td>
<td>Description</td>
</tr>
<tr class="row-even"><td>abs(x)</td>
<td>absolute value</td>
</tr>
<tr class="row-odd"><td>acos(x)</td>
<td><img class="math" src="../_images/math/968e002df5b262bdf87616953a002ad586cc83e8.png" alt="\cos^{-1}x"/></td>
</tr>
<tr class="row-even"><td>asin(x)</td>
<td><img class="math" src="../_images/math/56f0313babb139c1e374435fbf634121b056c04f.png" alt="\sin^{-1}x"/></td>
</tr>
<tr class="row-odd"><td>atan(x)</td>
<td><img class="math" src="../_images/math/459cda5b92d489e01d5807c1f682abf97daf842b.png" alt="\tan^{-1}x"/></td>
</tr>
<tr class="row-even"><td>atan2(x,y)</td>
<td><img class="math" src="../_images/math/3c5e487755f863fb903b901b62ea837742bdc0b9.png" alt="\tan^{-1}(^y/_x)"/></td>
</tr>
<tr class="row-odd"><td>ceil(x)</td>
<td>nearest integer larger than <img class="math" src="../_images/math/188c175aac0a8a9c22499336711b5d7256407254.png" alt="x"/></td>
</tr>
<tr class="row-even"><td>cos(x)</td>
<td><img class="math" src="../_images/math/1c368ed9a99ac8bff9855713aa73c344c2fcf35a.png" alt="\cos x"/></td>
</tr>
<tr class="row-odd"><td>cosw(x,a,b,c)</td>
<td><img class="math" src="../_images/math/61696967808935c28edba1af4ce3b63ede193f38.png" alt="\cos^2"/> -shaped window centered at <img class="math" src="../_images/math/5e87bf41a96deddf6cb485ff530f153f2590e9cc.png" alt="b"/> with a
rising slope of length <img class="math" src="../_images/math/7dd2a5ea01fbd72ad2a58dd1f3d6ecbfde6208a1.png" alt="a"/> and a trailing slope of
length <img class="math" src="../_images/math/5e87bf41a96deddf6cb485ff530f153f2590e9cc.png" alt="b"/>.</td>
</tr>
<tr class="row-even"><td>deg(x)</td>
<td>The value of <img class="math" src="../_images/math/188c175aac0a8a9c22499336711b5d7256407254.png" alt="x"/> converted to from radians to degrees</td>
</tr>
<tr class="row-odd"><td>erf(x)</td>
<td><img class="math" src="../_images/math/5ea1bed84d1be38656256b3434ec38f977cacb42.png" alt="\frac{1}{2\pi} \int_0^x{\text{exp}(-t^2)dt}"/></td>
</tr>
<tr class="row-even"><td>erfc(x)</td>
<td><img class="math" src="../_images/math/e34c652c8f2928e0b399067163c0d98853703551.png" alt="1 - \text{erf}(x)"/></td>
</tr>
<tr class="row-odd"><td>exp(x)</td>
<td><img class="math" src="../_images/math/cd4321c696b6b066437c8c595b3e947d8e6677fd.png" alt="e^x"/></td>
</tr>
<tr class="row-even"><td>floor(x)</td>
<td>Largest integer value not larger than <img class="math" src="../_images/math/188c175aac0a8a9c22499336711b5d7256407254.png" alt="x"/></td>
</tr>
<tr class="row-odd"><td>hypot(x,y)</td>
<td><img class="math" src="../_images/math/7e27a5c5ddba646f9ac7eaf4994d849d6a40410b.png" alt="\sqrt{x^2 + y^2}"/></td>
</tr>
<tr class="row-even"><td>ln(x)</td>
<td><img class="math" src="../_images/math/05f4c39b02501d3bc5d32f8f44c026ce59821e08.png" alt="\ln x"/></td>
</tr>
<tr class="row-odd"><td>log(x)</td>
<td><img class="math" src="../_images/math/6cf9b622564edf8be5b22d7aaeab66ab63ba643f.png" alt="\log_{10} x"/></td>
</tr>
<tr class="row-even"><td>maxp(x,y)</td>
<td>Takes the maximum between <img class="math" src="../_images/math/188c175aac0a8a9c22499336711b5d7256407254.png" alt="x"/> and <img class="math" src="../_images/math/b124ff74afb0914bb434e8fb849eb56d734412f8.png" alt="y"/></td>
</tr>
<tr class="row-odd"><td>minp(x,y)</td>
<td>Takes the minimum between <img class="math" src="../_images/math/188c175aac0a8a9c22499336711b5d7256407254.png" alt="x"/> and <img class="math" src="../_images/math/b124ff74afb0914bb434e8fb849eb56d734412f8.png" alt="y"/></td>
</tr>
<tr class="row-even"><td>mod(x,y)</td>
<td>Gives the remainder of  <img class="math" src="../_images/math/188c175aac0a8a9c22499336711b5d7256407254.png" alt="x"/> divided by <img class="math" src="../_images/math/b124ff74afb0914bb434e8fb849eb56d734412f8.png" alt="y"/></td>
</tr>
<tr class="row-odd"><td>pi</td>
<td>Ratio of the circumference of a circle and its diameter.</td>
</tr>
<tr class="row-even"><td>rand</td>
<td>Gives a vector of uniformly distributed random numbers
from 0 to 1.</td>
</tr>
<tr class="row-odd"><td>rnorm(x,y)</td>
<td>Gives a vector of Gaussian random numbers distributed as
<img class="math" src="../_images/math/d942bc9ca585430c36917806bf9239c929217369.png" alt="N(x,y)"/>. Note that if <img class="math" src="../_images/math/188c175aac0a8a9c22499336711b5d7256407254.png" alt="x"/> and <img class="math" src="../_images/math/b124ff74afb0914bb434e8fb849eb56d734412f8.png" alt="y"/> are
vectors, each number generated will a different mean and
variance according to the arguments.</td>
</tr>
<tr class="row-even"><td>shift(x,s)</td>
<td>Shifts the values in the input vector <img class="math" src="../_images/math/188c175aac0a8a9c22499336711b5d7256407254.png" alt="x"/> by the number
of positions given by <img class="math" src="../_images/math/6859317dd1b439cef34131bcd4bafee8393444e0.png" alt="s"/>. Note that <img class="math" src="../_images/math/6859317dd1b439cef34131bcd4bafee8393444e0.png" alt="s"/> must be
a scalar.</td>
</tr>
<tr class="row-odd"><td>sin(x)</td>
<td><img class="math" src="../_images/math/ea11ea4668cdde45adf176f2ba2979e05f21a1e0.png" alt="\sin x"/></td>
</tr>
<tr class="row-even"><td>sqr(x)</td>
<td><img class="math" src="../_images/math/86b052cccbf93634555694d1fc200c90aaf2199d.png" alt="x^2"/></td>
</tr>
<tr class="row-odd"><td>sqrt(x)</td>
<td><img class="math" src="../_images/math/739563300258a3a4f54ff4e9b397dcf9c3f524f5.png" alt="\sqrt{x}"/></td>
</tr>
<tr class="row-even"><td>tan(x)</td>
<td><img class="math" src="../_images/math/c85df0bdf7d6d815984ca964f1eca5e3eaa3cee5.png" alt="\tan x"/></td>
</tr>
</tbody>
</table>
<table border="1" class="docutils" id="chddjehh">
<caption>Examples of source waveform expressions.</caption>
<colgroup>
<col width="42%" />
<col width="58%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Expression</td>
<td>Meaning</td>
</tr>
<tr class="row-even"><td>q = 20e-9*sin(2*pi*10*x)</td>
<td>A 10-Hz sine wave with 20 nAm amplitude</td>
</tr>
<tr class="row-odd"><td>q = 20e-9*sin(2*pi*2*x)*sin(2*pi*10*x)</td>
<td>A 10-Hz 20-nAm sine wave, amplitude modulated
sinusoidally at 2 Hz.</td>
</tr>
<tr class="row-even"><td>q = 20e-9*cosw(t,100,100,100)</td>
<td><img class="math" src="../_images/math/61696967808935c28edba1af4ce3b63ede193f38.png" alt="\cos^2"/>-shaped pulse, centered at <img class="math" src="../_images/math/ef9270877405055756d345facd044e4ab297f858.png" alt="t"/> = 100 ms
with 100 ms leading and trailing slopes, 20 nAm amplitude</td>
</tr>
<tr class="row-odd"><td>q = 30e-9*(t &gt; 0)*(t  &lt;* 300)*sin(2*pi*20*x)</td>
<td>20-Hz sine wave, 30 nAm amplitude, cropped in time to
0...300 ms.</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="converting-parcellation-data-into-labels">
<span id="chdedhcg"></span><h2>Converting parcellation data into labels<a class="headerlink" href="#converting-parcellation-data-into-labels" title="Permalink to this headline">¶</a></h2>
<p>The utility mne_annot2labels converts
cortical parcellation data into a set of labels. The parcellation
data are read from the directory <tt class="docutils literal"><span class="pre">$SUBJECTS_DIR/$SUBJECT/label</span></tt> and
the resulting labels are written to the current directory. mne_annot2labels requires
that the environment variable <tt class="docutils literal"><span class="pre">$SUBJECTS_DIR</span></tt> is set.
The command line options for mne_annot2labels are:</p>
<p><strong>&#8212;version</strong></p>
<blockquote>
<div>Show the program version and compilation date.</div></blockquote>
<p><strong>&#8212;help</strong></p>
<blockquote>
<div>List the command-line options.</div></blockquote>
<p><strong>&#8212;subject  &lt;*name*&gt;</strong></p>
<blockquote>
<div>Specifies the name of the subject. If this option is not present
the <tt class="docutils literal"><span class="pre">$SUBJECT</span></tt> environment variable is consulted. If
the subject name cannot be determined, the program quits.</div></blockquote>
<p><strong>&#8212;parc  &lt;*name*&gt;</strong></p>
<blockquote>
<div>Specifies the parcellation name to convert. The corresponding parcellation
file names will be <tt class="docutils literal"><span class="pre">$SUBJECTS_DIR/$SUBJECT/label/</span></tt>  &lt;<em>hemi</em>&gt; <tt class="docutils literal"><span class="pre">h.</span></tt>  &lt;<em>name</em>&gt; <tt class="docutils literal"><span class="pre">.annot</span></tt> where  &lt;<em>hemi</em>&gt; is <tt class="docutils literal"><span class="pre">l</span></tt> or <tt class="docutils literal"><span class="pre">r</span></tt> for the
left and right hemisphere, respectively.</div></blockquote>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
        &copy; Copyright 2012-2015, MNE Developers.
      Last updated on May 14, 2015.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2.
    </div>
  </body>
</html>