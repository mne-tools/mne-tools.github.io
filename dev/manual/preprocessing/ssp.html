<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>The Signal-Space Projection API &#8212; MNE 0.19.dev0 documentation</title>
    <link rel="stylesheet" href="../../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/gallery.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/bootstrap_divs.css" />
    <link rel="stylesheet" href="../../_static/reset-syntax.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/language_data.js"></script>
    <script type="text/javascript" src="../../_static/bootstrap_divs.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />

    <script type="text/javascript" src="../../_static/copybutton.js"></script>


    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-37225609-1']);
    _gaq.push(['_trackPageview']);

    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
    </script>


    <link rel="stylesheet" href="../../_static/style.css " type="text/css" />
    <link rel="stylesheet" href="../../_static/font-awesome.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/font-source-code-pro.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/font-source-sans-pro.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/flag-icon.css" type="text/css" />



    <script type="text/javascript">
    !function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);
    js.id=id;js.src="https://platform.twitter.com/widgets.js";
    fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");
    </script>



    <script type="text/javascript">
    (function() {
    var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
    po.src = 'https://apis.google.com/js/plusone.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
    })();
    </script>



<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript" src="../../_static/js/jquery-1.11.0.min.js "></script>
<script type="text/javascript" src="../../_static/js/jquery-fix.js "></script>
<script type="text/javascript" src="../../_static/bootstrap-3.3.7/js/bootstrap.min.js "></script>
<script type="text/javascript" src="../../_static/bootstrap-sphinx.js "></script>



  </head><body>

<div class="row devbar alert alert-danger">
This documentation is for <strong>development version 0.19.dev0</strong>.
</div>





  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../../index.html"><span><img src="../../_static/mne_logo_small.png"></span>
           </a>
        <span class="navbar-text navbar-version pull-left"><b>0.19.dev0</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
                <li><a href="../../install/index.html">Install</a></li>
                <li><a href="../../overview/index.html">Overview</a></li>
                <li><a href="../../auto_tutorials/index.html">Tutorials</a></li>
                <li><a href="../../auto_examples/index.html">Examples</a></li>
                <li><a href="../../glossary.html">Glossary</a></li>
                <li><a href="../../python_reference.html">API</a></li>
                <li><a href="../../install/contributing.html">Contribute</a></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../../index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"></ul>
</li>
              
            
            
            
            
            
              <li class="hidden-sm"></li>
            
          </ul>

          
<div class="navbar-form navbar-right navbar-btn dropdown btn-group-sm" style="margin-left: 20px; margin-top: 5px; margin-bottom: 5px">
  <button type="button" class="btn btn-danger navbar-btn dropdown-toggle" id="dropdownMenu1" data-toggle="dropdown">
    v0.19.dev0
    <span class="caret"></span>
  </button>
  <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
    <li><a href="https://mne-tools.github.io/dev/index.html">Development</a></li>
    <li><a href="https://mne-tools.github.io/stable/index.html">v0.18 (stable)</a></li>
    <li><a href="https://mne-tools.github.io/0.17/index.html">v0.17</a></li>
    <li><a href="https://mne-tools.github.io/0.16/index.html">v0.16</a></li>
    <li><a href="https://mne-tools.github.io/0.15/index.html">v0.15</a></li>
    <li><a href="https://mne-tools.github.io/0.14/index.html">v0.14</a></li>
    <li><a href="https://mne-tools.github.io/0.13/index.html">v0.13</a></li>
    <li><a href="https://mne-tools.github.io/0.12/index.html">v0.12</a></li>
    <li><a href="https://mne-tools.github.io/0.11/index.html">v0.11</a></li>
  </ul>
</div>


            
<form class="navbar-form navbar-right" action="../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          

        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index.html">
              <img class="logo" src="../../_static/mne_logo_small.png" alt="Logo"/>
            </a></p><ul>
<li><a class="reference internal" href="#">The Signal-Space Projection API</a><ul>
<li><a class="reference internal" href="#the-proj-attribute">The proj attribute</a></li>
<li><a class="reference internal" href="#computing-projectors">Computing projectors</a></li>
<li><a class="reference internal" href="#adding-removing-projectors">Adding/removing projectors</a></li>
<li><a class="reference internal" href="#applying-projectors">Applying projectors</a></li>
<li><a class="reference internal" href="#delayed-projectors">Delayed projectors</a></li>
</ul>
</li>
</ul>

<form action="../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
        </div>
      </div>
    <div class="body col-md-12 content" role="main">
      
  <div class="section" id="the-signal-space-projection-api">
<span id="ssp-api"></span><h1>The Signal-Space Projection API<a class="headerlink" href="#the-signal-space-projection-api" title="Permalink to this headline">¶</a></h1>
<p>This page describes the MNE-Python API for signal-space projection (SSP). For
background information on SSP, see <a class="reference internal" href="../gui/browse.html#cacchabi"><span class="std std-ref">The Signal-Space Projection (SSP) method</span></a>. For a tutorial on applying
SSP for artifact correction, see <a class="reference internal" href="../../auto_tutorials/preprocessing/plot_50_artifact_correction_ssp.html#tut-artifact-ssp"><span class="std std-ref">Repairing artifacts with SSP</span></a>.</p>
<div class="contents local topic" id="page-contents">
<p class="topic-title first">Page contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#the-proj-attribute" id="id1">The proj attribute</a></p></li>
<li><p><a class="reference internal" href="#computing-projectors" id="id2">Computing projectors</a></p></li>
<li><p><a class="reference internal" href="#adding-removing-projectors" id="id3">Adding/removing projectors</a></p></li>
<li><p><a class="reference internal" href="#applying-projectors" id="id4">Applying projectors</a></p></li>
<li><p><a class="reference internal" href="#delayed-projectors" id="id5">Delayed projectors</a></p></li>
</ul>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Once a projector is applied to the data, it is said to be <em>active</em>.</p>
</div>
<div class="section" id="the-proj-attribute">
<h2><a class="toc-backref" href="#id1">The proj attribute</a><a class="headerlink" href="#the-proj-attribute" title="Permalink to this headline">¶</a></h2>
<p>All the basic data containers (<a class="reference internal" href="../../generated/mne.io.Raw.html#mne.io.Raw" title="mne.io.Raw"><code class="xref py py-class docutils literal notranslate"><span class="pre">Raw</span></code></a>, <a class="reference internal" href="../../generated/mne.Epochs.html#mne.Epochs" title="mne.Epochs"><code class="xref py py-class docutils literal notranslate"><span class="pre">Epochs</span></code></a>, and
<a class="reference internal" href="../../generated/mne.Evoked.html#mne.Evoked" title="mne.Evoked"><code class="xref py py-class docutils literal notranslate"><span class="pre">Evoked</span></code></a>) have a <code class="docutils literal notranslate"><span class="pre">proj</span></code> attribute. It is <code class="docutils literal notranslate"><span class="pre">True</span></code> if at least one
projector is present and all of them are <em>active</em>.</p>
</div>
<div class="section" id="computing-projectors">
<h2><a class="toc-backref" href="#id2">Computing projectors</a><a class="headerlink" href="#computing-projectors" title="Permalink to this headline">¶</a></h2>
<p>In MNE-Python SSP vectors can be computed using general
purpose functions <a class="reference internal" href="../../generated/mne.compute_proj_epochs.html#mne.compute_proj_epochs" title="mne.compute_proj_epochs"><code class="xref py py-func docutils literal notranslate"><span class="pre">mne.compute_proj_epochs()</span></code></a>,
<a class="reference internal" href="../../generated/mne.compute_proj_evoked.html#mne.compute_proj_evoked" title="mne.compute_proj_evoked"><code class="xref py py-func docutils literal notranslate"><span class="pre">mne.compute_proj_evoked()</span></code></a>, and <a class="reference internal" href="../../generated/mne.compute_proj_raw.html#mne.compute_proj_raw" title="mne.compute_proj_raw"><code class="xref py py-func docutils literal notranslate"><span class="pre">mne.compute_proj_raw()</span></code></a>.
The general assumption these functions make is that the data passed contains
raw, epochs or averages of the artifact. Typically this involves continuous raw
data of empty room recordings or averaged ECG or EOG artifacts.</p>
<p>A second set of high-level convenience functions is provided to compute
projection vectors for typical use cases. This includes
<a class="reference internal" href="../../generated/mne.preprocessing.compute_proj_ecg.html#mne.preprocessing.compute_proj_ecg" title="mne.preprocessing.compute_proj_ecg"><code class="xref py py-func docutils literal notranslate"><span class="pre">mne.preprocessing.compute_proj_ecg()</span></code></a> and
<a class="reference internal" href="../../generated/mne.preprocessing.compute_proj_eog.html#mne.preprocessing.compute_proj_eog" title="mne.preprocessing.compute_proj_eog"><code class="xref py py-func docutils literal notranslate"><span class="pre">mne.preprocessing.compute_proj_eog()</span></code></a> for computing the ECG and EOG
related artifact components, respectively. For computing the EEG reference
signal, the function <a class="reference internal" href="../../generated/mne.set_eeg_reference.html#mne.set_eeg_reference" title="mne.set_eeg_reference"><code class="xref py py-func docutils literal notranslate"><span class="pre">mne.set_eeg_reference()</span></code></a> can be used.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>It is best to compute projectors only on channels that will be
used (e.g., excluding bad channels). This ensures that
projection vectors will remain ortho-normalized and that they
properly capture the activity of interest.</p>
</div>
</div>
<div class="section" id="adding-removing-projectors">
<span id="remove-projector"></span><h2><a class="toc-backref" href="#id3">Adding/removing projectors</a><a class="headerlink" href="#adding-removing-projectors" title="Permalink to this headline">¶</a></h2>
<p>To explicitly add a <code class="docutils literal notranslate"><span class="pre">proj</span></code>, use <code class="docutils literal notranslate"><span class="pre">add_proj</span></code>. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">projs</span> <span class="o">=</span> <span class="n">mne</span><span class="o">.</span><span class="n">read_proj</span><span class="p">(</span><span class="s1">&#39;proj_a.fif&#39;</span><span class="p">)</span>  
<span class="gp">&gt;&gt;&gt; </span><span class="n">evoked</span><span class="o">.</span><span class="n">add_proj</span><span class="p">(</span><span class="n">projs</span><span class="p">)</span>  
</pre></div>
</div>
<p>If projectors are already present in the raw <code class="file docutils literal notranslate"><span class="pre">fif</span></code> file, the new
projector will be added to the <code class="docutils literal notranslate"><span class="pre">info</span></code> dictionary automatically. To remove
existing projectors first, you can do:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">evoked</span><span class="o">.</span><span class="n">add_proj</span><span class="p">([],</span> <span class="n">remove_existing</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>  
</pre></div>
</div>
</div>
<div class="section" id="applying-projectors">
<h2><a class="toc-backref" href="#id4">Applying projectors</a><a class="headerlink" href="#applying-projectors" title="Permalink to this headline">¶</a></h2>
<p>Projectors can be applied at any stage of the pipeline. When the <code class="docutils literal notranslate"><span class="pre">raw</span></code> data
is read in, the projectors are not applied by default but this flag can be
turned on. However, at the <code class="docutils literal notranslate"><span class="pre">epochs</span></code> stage, the projectors are applied by
default.</p>
<p>To apply explicitly projs at any stage of the pipeline, use <code class="docutils literal notranslate"><span class="pre">apply_proj</span></code>. For
example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">evoked</span><span class="o">.</span><span class="n">apply_proj</span><span class="p">()</span>  
</pre></div>
</div>
<p>The projectors might not be applied if data are not <a class="reference internal" href="../memory.html#memory"><span class="std std-ref">preloaded</span></a>.
In this case, it’s the <code class="docutils literal notranslate"><span class="pre">_projector</span></code> attribute that indicates if a projector
will be applied when the data is loaded in memory. If the data is already in
memory, then the projectors applied to it are the ones marked as <em class="xref py py-obj">active</em>. As
soon as you’ve applied the projectors, it will stay active in the remaining
pipeline.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Once a projection operator is applied, it cannot be reversed.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Projections present in the info are applied during inverse computation
whether or not they are <em>active</em>. Therefore, if a certain projection should
not be applied, remove it from the info as described in Section
<a class="reference internal" href="#remove-projector"><span class="std std-ref">Adding/removing projectors</span></a></p>
</div>
</div>
<div class="section" id="delayed-projectors">
<h2><a class="toc-backref" href="#id5">Delayed projectors</a><a class="headerlink" href="#delayed-projectors" title="Permalink to this headline">¶</a></h2>
<p>The suggested pipeline is <code class="docutils literal notranslate"><span class="pre">proj=True</span></code> in epochs (it’s computationally cheaper
to apply projectors to epochs than to raw). When you use delayed SSP in
<code class="docutils literal notranslate"><span class="pre">Epochs</span></code>, projectors are applied when you call <a class="reference internal" href="../../generated/mne.Epochs.html#mne.Epochs.get_data" title="mne.Epochs.get_data"><code class="xref py py-func docutils literal notranslate"><span class="pre">mne.Epochs.get_data()</span></code></a>
method. They are not applied to the <code class="docutils literal notranslate"><span class="pre">evoked</span></code> data unless you call
<code class="docutils literal notranslate"><span class="pre">apply_proj()</span></code>. The reason is that you want to reject epochs with projectors
although it’s not stored in the projector mode.</p>
<div class="topic">
<p class="topic-title first">Examples:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../../auto_tutorials/preprocessing/plot_50_artifact_correction_ssp.html#tut-artifact-ssp"><span class="std std-ref">Repairing artifacts with SSP</span></a>: SSP sensitivities in sensor space</p></li>
<li><p><a class="reference internal" href="../../auto_examples/forward/plot_forward_sensitivity_maps.html#ex-sensitivity-maps"><span class="std std-ref">Display sensitivity maps for EEG and MEG sensors</span></a>: SSP sensitivities in source space</p></li>
</ul>
</div>
</div>
</div>


    </div>
    
  </div>
</div>
<footer class="footer">
  <div class="container institutions">
    <a href="https://www.massgeneral.org/"><img class="institution_lg" src="../../_static/institution_logos/MGH.svg" title="Massachusetts General Hospital" alt="Massachusetts General Hospital"/></a>
    <a href="https://martinos.org/"><img class="institution_lg" src="../../_static/institution_logos/Martinos.png" title="Athinoula A. Martinos Center for Biomedical Imaging" alt="Athinoula A. Martinos Center for Biomedical Imaging"/></a>
    <a href="https://hms.harvard.edu/"><img class="institution_lg" src="../../_static/institution_logos/Harvard.png" title="Harvard Medical School" alt="Harvard Medical School"/></a>
    <a href="https://web.mit.edu/"><img class="institution_sm" src="../../_static/institution_logos/MIT.svg" title="Massachusetts Institute of Technology" alt="Massachusetts Institute of Technology"/></a>
    <a href="https://www.nyu.edu/"><img class="institution_md" src="../../_static/institution_logos/NYU.png" title="New York University" alt="New York University"/></a>
    <a href="http://www.cea.fr/"><img class="institution_md" src="../../_static/institution_logos/CEA.png" title="Commissariat à l´énergie atomique et aux énergies alternatives" alt="Commissariat à l´énergie atomique et aux énergies alternatives"/></a>
    <a href="https://sci.aalto.fi/"><img class="institution_md" src="../../_static/institution_logos/Aalto.svg" title="Aalto-yliopiston perustieteiden korkeakoulu" alt="Aalto-yliopiston perustieteiden korkeakoulu"/></a>
    <a href="https://www.telecom-paris.fr/"><img class="institution_md" src="../../_static/institution_logos/Telecom_Paris_Tech.png" title="Télécom ParisTech" alt="Télécom ParisTech"/></a>
    <a href="https://www.washington.edu/"><img class="institution_sm" src="../../_static/institution_logos/Washington.png" title="University of Washington" alt="University of Washington"/></a>
    <a href="https://icm-institute.org/"><img class="institution_lg" src="../../_static/institution_logos/ICM.jpg" title="Institut du Cerveau et de la Moelle épinière" alt="Institut du Cerveau et de la Moelle épinière"/></a>
    <a href="https://www.bu.edu/"><img class="institution_sm" src="../../_static/institution_logos/BU.svg" title="Boston University" alt="Boston University"/></a>
    <a href="https://www.inserm.fr/"><img class="institution_xs" src="../../_static/institution_logos/Inserm.svg" title="Institut national de la santé et de la recherche médicale" alt="Institut national de la santé et de la recherche médicale"/></a>
    <a href="https://www.fz-juelich.de/"><img class="institution_sm" src="../../_static/institution_logos/Julich.svg" title="Forschungszentrum Jülich" alt="Forschungszentrum Jülich"/></a>
    <a href="https://www.tu-ilmenau.de/"><img class="institution_sm" src="../../_static/institution_logos/Ilmenau.gif" title="Technische Universität Ilmenau" alt="Technische Universität Ilmenau"/></a>
    <a href="https://bids.berkeley.edu/"><img class="institution_md" src="../../_static/institution_logos/BIDS.png" title="Berkeley Institute for Data Science" alt="Berkeley Institute for Data Science"/></a>
    <a href="https://www.inria.fr/"><img class="institution_sm" src="../../_static/institution_logos/inria.png" title="Institut national de recherche en informatique et en automatique" alt="Institut national de recherche en informatique et en automatique"/></a>
    <a href="https://www.au.dk/"><img class="institution_sm" src="../../_static/institution_logos/Aarhus.png" title="Aarhus Universitet" alt="Aarhus Universitet"/></a>
    <a href="https://www.uni-graz.at/"><img class="institution_md" src="../../_static/institution_logos/Graz.jpg" title="Karl-Franzens-Universität Graz" alt="Karl-Franzens-Universität Graz"/></a>
  </div>
  <div class="container">
    <ul class="list-inline">
      <li><a href="https://github.com/mne-tools/mne-python">GitHub</a></li>
      <li>·</li>
      <li><a href="https://mail.nmr.mgh.harvard.edu/mailman/listinfo/mne_analysis">Mailing list</a></li>
      <li>·</li>
      <li><a href="https://gitter.im/mne-tools/mne-python">Gitter</a></li>
      <li>·</li>
      <li><a href="whats_new.html">What's new</a></li>
      <li>·</li>
      <li><a href="faq.html#cite">Cite MNE</a></li>
      <li class="pull-right"><a href="#">Back to top</a></li>
    </ul>
    <p>&copy; Copyright 2012-2019, MNE Developers. Last updated on 2019-09-04.</p>
  </div>
</footer>
  </body>
</html>