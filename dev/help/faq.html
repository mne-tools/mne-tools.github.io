
<!DOCTYPE html>


<html lang="en" data-content_root="../" data-theme="auto">

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Frequently Asked Questions (FAQ) &#8212; MNE 1.11.0.dev116+g90e5232cd documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "auto";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "auto";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css?v=4ae1632d" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery.css?v=d2d258e8" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-binder.css?v=f4aeca0c" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-dataframe.css?v=2082cf3c" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-rendered-html.css?v=1277b6f3" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="../_static/style.css?v=4c2284e1" />
  
  <!-- So that users can add custom icons -->
  <script src="../_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="../_static/documentation_options.js?v=42434e5a"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=fd10adb8"></script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script async="async" src="https://www.googletagmanager.com/gtag/js?id=G-5TBCPCRB6X"></script>
    <script>
                window.dataLayer = window.dataLayer || [];
                function gtag(){ dataLayer.push(arguments); }
                gtag('js', new Date());
                gtag('config', 'G-5TBCPCRB6X');
            </script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'help/faq';</script>
    <script>
        DOCUMENTATION_OPTIONS.theme_version = '0.16.1';
        DOCUMENTATION_OPTIONS.theme_switcher_json_url = 'https://mne.tools/dev/_static/versions.json';
        DOCUMENTATION_OPTIONS.theme_switcher_version_match = 'dev';
        DOCUMENTATION_OPTIONS.show_version_warning_banner =
            false;
        </script>
    <script defer="defer" src="../_static/js/custom-icons.js?v=8bbd8100"></script>
    <link rel="icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="MNE-Python Development" href="../development/index.html" />
    <link rel="prev" title="Getting started with Python" href="learn_python.html" />
    <link rel="canonical" href="https://mne.tools/stable/help/faq.html" />
    
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="1.11" />

  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="auto">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class=" navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/mne_logo_small.svg" class="logo__image only-light" alt="MNE 1.11.0.dev116+g90e5232cd documentation - Home"/>
    <img src="../_static/mne_logo_small.svg" class="logo__image only-dark pst-js-only" alt="MNE 1.11.0.dev116+g90e5232cd documentation - Home"/>
  
  
</a></div>
    
  </div>
  
  <div class=" navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../install/index.html">
    Install
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../documentation/index.html">
    Documentation
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../api/python_reference.html">
    API Reference
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="index.html">
    Get Help
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../development/index.html">
    Development
  </a>
</li>

  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

<button class="btn btn-sm pst-navbar-icon search-button search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
</button>
        </div>
      
      
        <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
      
        <div class="navbar-item">
<div class="version-switcher__container dropdown pst-js-only">
  <button id="pst-version-switcher-button-2"
    type="button"
    class="version-switcher__button btn btn-sm dropdown-toggle"
    data-bs-toggle="dropdown"
    aria-haspopup="listbox"
    aria-controls="pst-version-switcher-list-2"
    aria-label="Version switcher list"
  >
    Choose version  <!-- this text may get changed later by javascript -->
    <span class="caret"></span>
  </button>
  <div id="pst-version-switcher-list-2"
    class="version-switcher__menu dropdown-menu list-group-flush py-0"
    role="listbox" aria-labelledby="pst-version-switcher-button-2">
    <!-- dropdown will be populated by javascript on page load -->
  </div>
</div></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="External Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://discord.gg/rKfvxTuATa" title="Discord (office hours)" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-discord fa-fw fa-lg" aria-hidden="true"></i>
            <span class="sr-only">Discord (office hours)</span></a>
        </li>
        <li class="nav-item">
            
          
          
          
          
          
          
          
          
          
          <a href="https://fosstodon.org/@mne" title="Mastodon" class="nav-link pst-navbar-icon" rel="me" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-mastodon fa-fw fa-lg" aria-hidden="true"></i>
            <span class="sr-only">Mastodon</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://mne.discourse.group/" title="Q&A Forum" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-discourse fa-fw fa-lg" aria-hidden="true"></i>
            <span class="sr-only">Q&A Forum</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/mne-tools/mne-python" title="Code Repository" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-github fa-fw fa-lg" aria-hidden="true"></i>
            <span class="sr-only">Code Repository</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/sponsors/mne-tools" title="Sponsor us on GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-regular fa-heart fa-fw fa-lg" aria-hidden="true"></i>
            <span class="sr-only">Sponsor us on GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://opencollective.com/mne-python" title="Donate via OpenCollective" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-custom fa-opencollective fa-fw fa-lg" aria-hidden="true"></i>
            <span class="sr-only">Donate via OpenCollective</span></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

<button class="btn btn-sm pst-navbar-icon search-button search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
</button>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../install/index.html">
    Install
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../documentation/index.html">
    Documentation
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../api/python_reference.html">
    API Reference
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="index.html">
    Get Help
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../development/index.html">
    Development
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
        
          <div class="navbar-item">
<div class="version-switcher__container dropdown pst-js-only">
  <button id="pst-version-switcher-button-3"
    type="button"
    class="version-switcher__button btn btn-sm dropdown-toggle"
    data-bs-toggle="dropdown"
    aria-haspopup="listbox"
    aria-controls="pst-version-switcher-list-3"
    aria-label="Version switcher list"
  >
    Choose version  <!-- this text may get changed later by javascript -->
    <span class="caret"></span>
  </button>
  <div id="pst-version-switcher-list-3"
    class="version-switcher__menu dropdown-menu list-group-flush py-0"
    role="listbox" aria-labelledby="pst-version-switcher-button-3">
    <!-- dropdown will be populated by javascript on page load -->
  </div>
</div></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="External Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://discord.gg/rKfvxTuATa" title="Discord (office hours)" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-discord fa-fw fa-lg" aria-hidden="true"></i>
            <span class="sr-only">Discord (office hours)</span></a>
        </li>
        <li class="nav-item">
            
          
          
          
          
          
          
          
          
          
          <a href="https://fosstodon.org/@mne" title="Mastodon" class="nav-link pst-navbar-icon" rel="me" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-mastodon fa-fw fa-lg" aria-hidden="true"></i>
            <span class="sr-only">Mastodon</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://mne.discourse.group/" title="Q&A Forum" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-discourse fa-fw fa-lg" aria-hidden="true"></i>
            <span class="sr-only">Q&A Forum</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/mne-tools/mne-python" title="Code Repository" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-github fa-fw fa-lg" aria-hidden="true"></i>
            <span class="sr-only">Code Repository</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/sponsors/mne-tools" title="Sponsor us on GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-regular fa-heart fa-fw fa-lg" aria-hidden="true"></i>
            <span class="sr-only">Sponsor us on GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://opencollective.com/mne-python" title="Donate via OpenCollective" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-custom fa-opencollective fa-fw fa-lg" aria-hidden="true"></i>
            <span class="sr-only">Donate via OpenCollective</span></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="learn_python.html">Getting started with Python</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Frequently Asked Questions (FAQ)</a></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none"></div>
              
              
<div>
  
  <section id="frequently-asked-questions-faq">
<span id="faq"></span><h1>Frequently Asked Questions (FAQ)<a class="headerlink" href="#frequently-asked-questions-faq" title="Link to this heading">#</a></h1>
<section id="general-mne-python-issues">
<h2>General MNE-Python issues<a class="headerlink" href="#general-mne-python-issues" title="Link to this heading">#</a></h2>
<section id="help-i-can-t-get-python-and-mne-python-working">
<h3>Help! I can’t get Python and MNE-Python working!<a class="headerlink" href="#help-i-can-t-get-python-and-mne-python-working" title="Link to this heading">#</a></h3>
<p>Check out our <a class="reference internal" href="../install/installers.html#installers"><span class="std std-ref">installation instructions</span></a>.</p>
</section>
<section id="i-still-can-t-get-it-to-work">
<h3>I still can’t get it to work!<a class="headerlink" href="#i-still-can-t-get-it-to-work" title="Link to this heading">#</a></h3>
<p>See <a class="reference internal" href="index.html#help"><span class="std std-ref">Getting help</span></a>.</p>
</section>
<section id="i-can-t-get-pyvista-3d-plotting-to-work-under-windows">
<h3>I can’t get PyVista/3D plotting to work under Windows<a class="headerlink" href="#i-can-t-get-pyvista-3d-plotting-to-work-under-windows" title="Link to this heading">#</a></h3>
<p>If PyVista plotting in Jupyter Notebooks doesn’t work well, using the IPython
magic <code class="docutils literal notranslate"><span class="pre">%gui</span> <span class="pre">qt</span></code> should <a class="reference external" href="https://github.com/ipython/ipython/issues/10384">help</a>.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">gui</span> qt
</pre></div>
</div>
</section>
<section id="python-runs-on-macos-extremely-slow-even-on-simple-commands">
<h3>Python runs on macOS extremely slow even on simple commands!<a class="headerlink" href="#python-runs-on-macos-extremely-slow-even-on-simple-commands" title="Link to this heading">#</a></h3>
<p>Python uses some backends that interfere with the macOS energy saver when
using an IDE such as Spyder or PyCharm. To test it, import <code class="docutils literal notranslate"><span class="pre">time</span></code> and run:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">start</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">();</span> <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.0005</span><span class="p">);</span> <span class="nb">print</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start</span><span class="p">)</span>
</pre></div>
</div>
<p>If it takes several seconds you can either:</p>
<ul>
<li><p>Install the module <code class="docutils literal notranslate"><span class="pre">appnope</span></code> and run in your script:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">appnope</span>
<span class="n">appnope</span><span class="o">.</span><span class="n">nope</span><span class="p">()</span>
</pre></div>
</div>
</li>
<li><p>Change the configuration defaults by running in your terminal:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>defaults<span class="w"> </span>write<span class="w"> </span>org.python.python<span class="w"> </span>NSAppSleepDisabled<span class="w"> </span>-bool<span class="w"> </span>YES
</pre></div>
</div>
</li>
</ul>
</section>
<section id="how-do-i-cite-mne">
<h3>How do I cite MNE?<a class="headerlink" href="#how-do-i-cite-mne" title="Link to this heading">#</a></h3>
<p>See <a class="reference internal" href="../documentation/cite.html#cite"><span class="std std-ref">How to cite MNE-Python</span></a>.</p>
</section>
<section id="i-m-not-sure-how-to-do-x-analysis-step-with-my-y-data">
<h3>I’m not sure how to do <em>X</em> analysis step with my <em>Y</em> data…<a class="headerlink" href="#i-m-not-sure-how-to-do-x-analysis-step-with-my-y-data" title="Link to this heading">#</a></h3>
<p>Knowing “the right thing” to do with EEG and MEG data is challenging. We use
the <a class="reference external" href="https://mne.discourse.group">MNE Forum</a> to discuss analysis strategies for different kinds of
data. It’s worth searching the archives to see if there have been relevant
discussions in the past, but don’t hesitate to ask a new question if the answer
isn’t out there already.</p>
</section>
<section id="i-think-i-found-a-bug-what-do-i-do">
<h3>I think I found a bug, what do I do?<a class="headerlink" href="#i-think-i-found-a-bug-what-do-i-do" title="Link to this heading">#</a></h3>
<p>When you encounter an error message or unexpected results, it can be hard to
tell whether it happened because of a bug in MNE-Python, a mistake in user
code, a corrupted data file, or irregularities in the data itself. Your first
step when asking for help should be the <a class="reference external" href="https://mne.discourse.group">MNE Forum</a>, not GitHub. This bears
repeating: <em>the GitHub issue tracker is not for usage help</em> — it is for
software bugs, feature requests, and improvements to documentation. If you
open an issue that contains only a usage question, we will close the issue and
direct you to the forum. If you’re pretty sure the problem you’ve encountered
is a software bug (not bad data or user error):</p>
<ul>
<li><p>Make sure you’re using <a class="reference external" href="https://github.com/mne-tools/mne-python/releases/latest">the most current version</a>. You can check it locally
at a shell prompt with:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>mne<span class="w"> </span>sys_info
</pre></div>
</div>
<p>which will also give you version info about important MNE-Python
dependencies.</p>
</li>
<li><p>If you’re already on the most current version, if possible try using
<a class="reference internal" href="../install/updating.html#installing-main"><span class="std std-ref">the latest development version</span></a>, as the bug may
have been fixed already since the latest release. If you can’t try the latest
development version, search the GitHub issues page to see if the problem has
already been reported and/or fixed.</p></li>
<li><p>Try to replicate the problem with one of the <a class="reference internal" href="../documentation/datasets.html#datasets"><span class="std std-ref">MNE sample datasets</span></a>. If you can’t replicate it with a built-in dataset, provide a
link to a small, anonymized portion of your data that does yield the error.</p></li>
</ul>
<p>If the problem persists, <a class="reference external" href="https://github.com/mne-tools/mne-python/issues/new?template=bug_report.md">open a new issue</a>
and include the <em>smallest possible</em> code sample that replicates the error
you’re seeing. Paste the code sample into the issue, with a line containing
three backticks (```) above and below the lines of code. This
<a class="reference external" href="https://en.wikipedia.org/wiki/Minimal_Working_Example">minimal working example</a> should be self-contained, which means that
MNE-Python contributors should be able to copy and paste the provided snippet
and replicate the bug on their own computers.</p>
</section>
<section id="why-is-it-dangerous-to-pickle-my-mne-python-objects-and-data-for-later-use">
<h3>Why is it dangerous to “pickle” my MNE-Python objects and data for later use?<a class="headerlink" href="#why-is-it-dangerous-to-pickle-my-mne-python-objects-and-data-for-later-use" title="Link to this heading">#</a></h3>
<p><a class="reference external" href="https://docs.python.org/3/library/pickle.html">Pickling</a> data and MNE-Python
objects for later use can be tempting due to its simplicity and generality, but
it is usually not the best option. Pickling is not designed for stable
persistence, and it is likely that you will not be able to read your data in
the not-too-distant future. For details, see:</p>
<ul class="simple">
<li><p><a class="reference external" href="http://www.benfrederickson.com/dont-pickle-your-data/">http://www.benfrederickson.com/dont-pickle-your-data/</a></p></li>
<li><p><a class="reference external" href="https://stackoverflow.com/questions/21752259/python-why-pickle">https://stackoverflow.com/questions/21752259/python-why-pickle</a></p></li>
</ul>
<p>MNE-Python is designed to provide its own file saving formats (often based on
the FIF standard) for its objects usually via a <code class="docutils literal notranslate"><span class="pre">save</span></code> method or <code class="docutils literal notranslate"><span class="pre">write_*</span></code>
method, e.g. <a class="reference internal" href="../generated/mne.io.Raw.html#mne.io.Raw.save" title="mne.io.Raw.save"><code class="xref py py-func docutils literal notranslate"><span class="pre">mne.io.Raw.save()</span></code></a>, <a class="reference internal" href="../generated/mne.Epochs.html#mne.Epochs.save" title="mne.Epochs.save"><code class="xref py py-func docutils literal notranslate"><span class="pre">mne.Epochs.save()</span></code></a>,
<a class="reference internal" href="../generated/mne.write_evokeds.html#mne.write_evokeds" title="mne.write_evokeds"><code class="xref py py-func docutils literal notranslate"><span class="pre">mne.write_evokeds()</span></code></a>, <a class="reference internal" href="../generated/mne.SourceEstimate.html#mne.SourceEstimate.save" title="mne.SourceEstimate.save"><code class="xref py py-func docutils literal notranslate"><span class="pre">mne.SourceEstimate.save()</span></code></a>. If you have some
data that you want to save but can’t figure out how, post to the <a class="reference external" href="https://mne.discourse.group">MNE Forum</a>
or to the <a class="reference external" href="https://github.com/mne-tools/mne-python/issues/">GitHub issues page</a>.</p>
<p>If you want to write your own data to disk (e.g., subject behavioral scores),
we strongly recommend using <a class="reference external" href="https://github.com/h5io/h5io">h5io</a>, which is based on the <a class="reference external" href="https://en.wikipedia.org/wiki/Hierarchical_Data_Format">HDF5 format</a> and <a class="reference external" href="http://www.h5py.org">h5py</a>, to save
data in a fast, future-compatible, standard format.</p>
</section>
<section id="i-downloaded-a-dataset-once-but-mne-python-is-asking-to-download-it-again-why">
<h3>I downloaded a dataset once, but MNE-Python is asking to download it again. Why?<a class="headerlink" href="#i-downloaded-a-dataset-once-but-mne-python-is-asking-to-download-it-again-why" title="Link to this heading">#</a></h3>
<p>The default location for the MNE-sample data is <code class="docutils literal notranslate"><span class="pre">~/mne_data</span></code>. If you
downloaded data and an example asks you whether to download it again, make sure
the data reside in the examples directory and that you run the script from its
current directory:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span><span class="nb">cd</span><span class="w"> </span>examples/preprocessing
</pre></div>
</div>
<p>Then in Python you can do:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">1</span><span class="p">]:</span> <span class="o">%</span><span class="n">run</span> <span class="n">plot_find_ecg_artifacts</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
<p>See <a class="reference internal" href="../documentation/datasets.html#datasets"><span class="std std-ref">Datasets Overview</span></a> for a list of all available datasets and some advanced
configuration options, e.g. to specify a custom location for storing the
datasets.</p>
</section>
<section id="a-function-uses-multiple-cpu-cores-even-though-i-didn-t-tell-it-to-why">
<span id="faq-cpu"></span><h3>A function uses multiple CPU cores even though I didn’t tell it to. Why?<a class="headerlink" href="#a-function-uses-multiple-cpu-cores-even-though-i-didn-t-tell-it-to-why" title="Link to this heading">#</a></h3>
<p>Ordinarily in MNE-python the <code class="docutils literal notranslate"><span class="pre">parallel</span></code> module is used to deploy multiple
cores via the <code class="docutils literal notranslate"><span class="pre">n_jobs</span></code> variable. However, functions like
<a class="reference internal" href="../generated/mne.preprocessing.maxwell_filter.html#mne.preprocessing.maxwell_filter" title="mne.preprocessing.maxwell_filter"><code class="xref py py-func docutils literal notranslate"><span class="pre">mne.preprocessing.maxwell_filter()</span></code></a> that use <a class="reference external" href="https://scipy.github.io/devdocs/reference/linalg.html#module-scipy.linalg" title="(in SciPy v1.17.0.dev)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">scipy.linalg</span></code></a> do not
have an <code class="docutils literal notranslate"><span class="pre">n_jobs</span></code> flag but may still use multiple cores. This is because
<a class="reference external" href="https://scipy.github.io/devdocs/reference/linalg.html#module-scipy.linalg" title="(in SciPy v1.17.0.dev)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">scipy.linalg</span></code></a> is built with linear algebra libraries that natively
support multithreading:</p>
<ul class="simple">
<li><p><a class="reference external" href="http://www.openblas.net/">OpenBLAS</a></p></li>
<li><p><a class="reference external" href="https://www.intel.com/content/www/us/en/developer/tools/oneapi/onemkl.html">Intel Math Kernel Library (MKL)</a>,
which uses <a class="reference external" href="https://www.openmp.org/">OpenMP</a></p></li>
</ul>
<p>To control how many cores are used for linear-algebra-heavy functions like
<a class="reference internal" href="../generated/mne.preprocessing.maxwell_filter.html#mne.preprocessing.maxwell_filter" title="mne.preprocessing.maxwell_filter"><code class="xref py py-func docutils literal notranslate"><span class="pre">mne.preprocessing.maxwell_filter()</span></code></a>, you can set the <code class="docutils literal notranslate"><span class="pre">OMP_NUM_THREADS</span></code>
or <code class="docutils literal notranslate"><span class="pre">OPENBLAS_NUM_THREADS</span></code> environment variable to the desired number of cores
for MKL or OpenBLAS, respectively. This can be done before running Python, or
inside Python you can achieve the same effect by, e.g.:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">os</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">num_cpu</span> <span class="o">=</span> <span class="s1">&#39;4&#39;</span> <span class="c1"># Set as a string</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;OMP_NUM_THREADS&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">num_cpu</span>
</pre></div>
</div>
<p>This must be done <em>before</em> running linear algebra functions; subsequent
changes in the same Python session will have no effect.</p>
</section>
<section id="i-have-a-mystery-fif-file-how-do-i-read-it">
<h3>I have a mystery FIF file, how do I read it?<a class="headerlink" href="#i-have-a-mystery-fif-file-how-do-i-read-it" title="Link to this heading">#</a></h3>
<p>The <a class="reference internal" href="../generated/mne.what.html#mne.what" title="mne.what"><code class="xref py py-func docutils literal notranslate"><span class="pre">mne.what()</span></code></a> function can be called on any <code class="file docutils literal notranslate"><span class="pre">.fif</span></code> file to
identify the kind of data contained in the file. This will help you determine
whether to use <a class="reference internal" href="../generated/mne.read_cov.html#mne.read_cov" title="mne.read_cov"><code class="xref py py-func docutils literal notranslate"><span class="pre">mne.read_cov()</span></code></a>, <a class="reference internal" href="../generated/mne.read_epochs.html#mne.read_epochs" title="mne.read_epochs"><code class="xref py py-func docutils literal notranslate"><span class="pre">mne.read_epochs()</span></code></a>,
<a class="reference internal" href="../generated/mne.read_evokeds.html#mne.read_evokeds" title="mne.read_evokeds"><code class="xref py py-func docutils literal notranslate"><span class="pre">mne.read_evokeds()</span></code></a>, etc. There is also a corresponding command line tool
<a class="reference internal" href="../generated/commands.html#mne-what"><span class="std std-ref">mne what</span></a>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>mne<span class="w"> </span>what<span class="w"> </span>sample_audvis_eog-eve.fif
<span class="go">events</span>
</pre></div>
</div>
</section>
</section>
<section id="resampling-and-decimating-data">
<span id="resampling-and-decimating"></span><h2>Resampling and decimating data<a class="headerlink" href="#resampling-and-decimating-data" title="Link to this heading">#</a></h2>
<section id="what-are-all-these-options-for-resampling-decimating-and-binning-data">
<h3>What are all these options for resampling, decimating, and binning data?<a class="headerlink" href="#what-are-all-these-options-for-resampling-decimating-and-binning-data" title="Link to this heading">#</a></h3>
<p>There are many functions in MNE-Python for changing the effective sampling rate
of data. We’ll discuss some major ones here, with some of their implications:</p>
<ul>
<li><p><a class="reference internal" href="../generated/mne.io.Raw.html#mne.io.Raw.resample" title="mne.io.Raw.resample"><code class="xref py py-func docutils literal notranslate"><span class="pre">mne.io.Raw.resample()</span></code></a> is used to resample (typically downsample) raw
data. Resampling is the two-step process of applying a low-pass FIR filter
and subselecting samples from the data.</p>
<p>Using this function to resample data before forming <a class="reference internal" href="../generated/mne.Epochs.html#mne.Epochs" title="mne.Epochs"><code class="xref py py-class docutils literal notranslate"><span class="pre">mne.Epochs</span></code></a>
for final analysis is generally discouraged because doing so effectively
loses precision of (and jitters) the event timings, see
<a class="reference external" href="https://gist.github.com/larsoner/01642cb3789992fbca59">this gist</a> as
a demonstration. However, resampling raw data can be useful for
(at least):</p>
<blockquote>
<div><ul class="simple">
<li><p>Computing projectors in low- or band-passed data</p></li>
<li><p>Exploring data</p></li>
</ul>
</div></blockquote>
</li>
<li><p><a class="reference internal" href="../generated/mne.preprocessing.ICA.html#mne.preprocessing.ICA.fit" title="mne.preprocessing.ICA.fit"><code class="xref py py-func docutils literal notranslate"><span class="pre">mne.preprocessing.ICA.fit()</span></code></a> decimates data without low-passing,
but is only used for fitting a statistical model to the data.</p></li>
<li><p><a class="reference internal" href="../generated/mne.Epochs.html#mne.Epochs.decimate" title="mne.Epochs.decimate"><code class="xref py py-func docutils literal notranslate"><span class="pre">mne.Epochs.decimate()</span></code></a>, which does the same thing as the
<code class="docutils literal notranslate"><span class="pre">decim</span></code> parameter in the <a class="reference internal" href="../generated/mne.Epochs.html#mne.Epochs" title="mne.Epochs"><code class="xref py py-class docutils literal notranslate"><span class="pre">mne.Epochs</span></code></a> constructor, sub-selects every
<span class="math notranslate nohighlight">\(N^{th}\)</span> sample before and after each event. To avoid aliasing
artifacts, the raw data should be sufficiently low-passed before decimation.
It is recommended to use <a class="reference internal" href="../generated/mne.io.Raw.html#mne.io.Raw.filter" title="mne.io.Raw.filter"><code class="xref py py-func docutils literal notranslate"><span class="pre">mne.io.Raw.filter()</span></code></a> with <code class="docutils literal notranslate"><span class="pre">h_freq</span></code> set to
half the new sampling rate (fs/2N) or lower, as per the Nyquist criterion, to
ensure effective attenuation of frequency content above this threshold.</p></li>
<li><p><a class="reference internal" href="../generated/mne.Epochs.html#mne.Epochs.resample" title="mne.Epochs.resample"><code class="xref py py-func docutils literal notranslate"><span class="pre">mne.Epochs.resample()</span></code></a>, <a class="reference internal" href="../generated/mne.Evoked.html#mne.Evoked.resample" title="mne.Evoked.resample"><code class="xref py py-func docutils literal notranslate"><span class="pre">mne.Evoked.resample()</span></code></a>, and
<a class="reference internal" href="../generated/mne.SourceEstimate.html#mne.SourceEstimate.resample" title="mne.SourceEstimate.resample"><code class="xref py py-func docutils literal notranslate"><span class="pre">mne.SourceEstimate.resample()</span></code></a> all resample data.
This process avoids potential aliasing artifacts because the
resampling process applies a low-pass filter. However, this filtering
introduces edge artifacts. Edge artifacts also exist when using
<a class="reference internal" href="../generated/mne.io.Raw.html#mne.io.Raw.resample" title="mne.io.Raw.resample"><code class="xref py py-func docutils literal notranslate"><span class="pre">mne.io.Raw.resample()</span></code></a>, but there the edge artifacts are constrained
to two times: the start and end of the recording. With these three methods,
edge artifacts are introduced to the start and end of every epoch
of data (or the start and end of the <a class="reference internal" href="../generated/mne.Evoked.html#mne.Evoked" title="mne.Evoked"><code class="xref py py-class docutils literal notranslate"><span class="pre">mne.Evoked</span></code></a> or
<a class="reference internal" href="../generated/mne.SourceEstimate.html#mne.SourceEstimate" title="mne.SourceEstimate"><code class="xref py py-class docutils literal notranslate"><span class="pre">mne.SourceEstimate</span></code></a> data), which often has a more pronounced
effect on the data.</p></li>
<li><p><a class="reference internal" href="../generated/mne.SourceEstimate.html#mne.SourceEstimate.bin" title="mne.SourceEstimate.bin"><code class="xref py py-func docutils literal notranslate"><span class="pre">mne.SourceEstimate.bin()</span></code></a> can be used to decimate, with or without
“binning” (averaging across data points). This is equivalent to applying
a moving-average (boxcar) filter to the data and decimating. A boxcar in
time is a <a class="reference external" href="https://en.wikipedia.org/wiki/Sinc_function">sinc</a> in
frequency, so this acts as a simplistic, non-ideal low-pass filter;
this will reduce but not eliminate aliasing if data were not sufficiently
low-passed. In the case where the “filter” or bin-width is a single sample
(i.e., an impulse) this operation simplifies to decimation without filtering.</p></li>
</ul>
</section>
<section id="resampling-raw-data-is-taking-forever-what-do-i-do">
<h3>Resampling raw data is taking forever! What do I do?<a class="headerlink" href="#resampling-raw-data-is-taking-forever-what-do-i-do" title="Link to this heading">#</a></h3>
<p><a class="reference internal" href="../generated/mne.io.Raw.html#mne.io.Raw.resample" title="mne.io.Raw.resample"><code class="xref py py-func docutils literal notranslate"><span class="pre">mne.io.Raw.resample()</span></code></a> has a parameter <code class="docutils literal notranslate"><span class="pre">npad=='auto'</span></code>. This is the
default, but if you’ve changed it you could try changing it back to <code class="docutils literal notranslate"><span class="pre">'auto'</span></code>,
it might help.</p>
<p>If you have an NVIDIA GPU you could also try using <a class="reference internal" href="../install/advanced.html#cuda"><span class="std std-ref">Fixing dock icons on Linux</span></a>, which can
sometimes speed up filtering and resampling operations by an order of
magnitude.</p>
</section>
</section>
<section id="forward-and-inverse-solution">
<h2>Forward and Inverse Solution<a class="headerlink" href="#forward-and-inverse-solution" title="Link to this heading">#</a></h2>
<section id="how-should-i-regularize-the-covariance-matrix">
<span id="faq-how-should-i-regularize"></span><h3>How should I regularize the covariance matrix?<a class="headerlink" href="#how-should-i-regularize-the-covariance-matrix" title="Link to this heading">#</a></h3>
<p>The estimated covariance can be numerically unstable and tends to induce
correlations between estimated source amplitudes and the number of samples
available. It is thus suggested to regularize the noise covariance
matrix (see <a class="reference internal" href="../documentation/implementation.html#cov-regularization-math"><span class="std std-ref">Regularization of the noise-covariance matrix</span></a>), especially if only few samples
are available. Unfortunately it is not easy to tell the effective number of
samples, hence, to choose the appropriate regularization. In MNE-Python,
regularization is done using advanced regularization methods described in
<a class="footnote-reference brackets" href="#footcite-engemanngramfort2015" id="id3" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a>. For this the ‘auto’ option can be used. With
this option cross-validation will be used to learn the optimal regularization:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">mne</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">epochs</span> <span class="o">=</span> <span class="n">mne</span><span class="o">.</span><span class="n">read_epochs</span><span class="p">(</span><span class="n">epochs_path</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cov</span> <span class="o">=</span> <span class="n">mne</span><span class="o">.</span><span class="n">compute_covariance</span><span class="p">(</span><span class="n">epochs</span><span class="p">,</span> <span class="n">tmax</span><span class="o">=</span><span class="mf">0.</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;auto&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>This procedure evaluates the noise covariance quantitatively by how well it
whitens the data using the negative log-likelihood of unseen data. The final
result can also be visually inspected. Under the assumption that the baseline
does not contain a systematic signal (time-locked to the event of interest),
the whitened baseline signal should be follow a multivariate Gaussian
distribution, i.e., whitened baseline signals should be between -1.96 and 1.96
at a given time sample. Based on the same reasoning, the expected value for the
<a class="reference internal" href="../documentation/glossary.html#term-global-field-power"><span class="xref std std-term">global field power</span></a> (GFP) is 1 (calculation of the <a class="reference internal" href="../documentation/glossary.html#term-GFP"><span class="xref std std-term">GFP</span></a>
should take into account the true degrees of freedom, e.g. <code class="docutils literal notranslate"><span class="pre">ddof=3</span></code> with 2
active SSP vectors):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">evoked</span> <span class="o">=</span> <span class="n">epochs</span><span class="o">.</span><span class="n">average</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">evoked</span><span class="o">.</span><span class="n">plot_white</span><span class="p">(</span><span class="n">cov</span><span class="p">)</span>
</pre></div>
</div>
<p>This plot displays both, the whitened evoked signals for each channels and the
whitened <a class="reference internal" href="../documentation/glossary.html#term-GFP"><span class="xref std std-term">GFP</span></a>. The numbers in the <a class="reference internal" href="../documentation/glossary.html#term-GFP"><span class="xref std std-term">GFP</span></a> panel represent the
estimated rank of the data, which amounts to the effective degrees of freedom
by which the squared sum across sensors is divided when computing the whitened
<a class="reference internal" href="../documentation/glossary.html#term-GFP"><span class="xref std std-term">GFP</span></a>. The whitened <a class="reference internal" href="../documentation/glossary.html#term-GFP"><span class="xref std std-term">GFP</span></a> also helps detecting spurious late evoked
components which can be the consequence of over- or under-regularization.</p>
<p>Note that if data have been processed using signal space separation (SSS)
<a class="footnote-reference brackets" href="#footcite-tauluetal2005" id="id4" role="doc-noteref"><span class="fn-bracket">[</span>2<span class="fn-bracket">]</span></a>, gradiometers and magnetometers will be displayed
jointly because both are reconstructed from the same SSS basis vectors with the
same numerical rank. This also implies that both sensor types are not any
longer linearly independent.</p>
<p>These methods for evaluation can be used to assess model violations. Additional
introductory materials can be found <a class="reference external" href="https://speakerdeck.com/dengemann/eeg-sensor-covariance-using-cross-validation">here</a>.</p>
<p>For expert use cases or debugging the alternative estimators can also be
compared:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">covs</span> <span class="o">=</span> <span class="n">mne</span><span class="o">.</span><span class="n">compute_covariance</span><span class="p">(</span><span class="n">epochs</span><span class="p">,</span> <span class="n">tmax</span><span class="o">=</span><span class="mf">0.</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;auto&#39;</span><span class="p">,</span> <span class="n">return_estimators</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">evoked</span> <span class="o">=</span> <span class="n">epochs</span><span class="o">.</span><span class="n">average</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">evoked</span><span class="o">.</span><span class="n">plot_white</span><span class="p">(</span><span class="n">covs</span><span class="p">)</span>
</pre></div>
</div>
<p>This will plot the whitened evoked for the optimal estimator and display the
<a class="reference internal" href="../documentation/glossary.html#term-GFP"><span class="xref std std-term">GFP</span></a> for all estimators as separate lines in the related panel.</p>
</section>
<section id="my-watershed-bem-meshes-look-incorrect">
<span id="faq-watershed-bem-meshes"></span><h3>My watershed BEM meshes look incorrect<a class="headerlink" href="#my-watershed-bem-meshes-look-incorrect" title="Link to this heading">#</a></h3>
<p>After using <a class="reference internal" href="../generated/commands.html#mne-watershed-bem"><span class="std std-ref">mne watershed_bem</span></a> or <a class="reference internal" href="../generated/mne.bem.make_watershed_bem.html#mne.bem.make_watershed_bem" title="mne.bem.make_watershed_bem"><code class="xref py py-func docutils literal notranslate"><span class="pre">mne.bem.make_watershed_bem()</span></code></a>
you might find that the BEM meshes for the brain, inner skull, outer skull,
and/or scalp surfaces do not look correct in <a class="reference internal" href="../generated/mne.viz.plot_alignment.html#mne.viz.plot_alignment" title="mne.viz.plot_alignment"><code class="xref py py-func docutils literal notranslate"><span class="pre">mne.viz.plot_alignment()</span></code></a>
and <a class="reference internal" href="../generated/mne.viz.plot_bem.html#mne.viz.plot_bem" title="mne.viz.plot_bem"><code class="xref py py-func docutils literal notranslate"><span class="pre">mne.viz.plot_bem()</span></code></a>.</p>
<p>MNE relies on FreeSurfer’s <a class="reference external" href="https://surfer.nmr.mgh.harvard.edu/fswiki/mri_watershed">mri_watershed</a> to compute the BEM meshes.
Freesurfer’s watershed bem strategy is to:</p>
<ol class="arabic simple">
<li><p>Compute the outer skin (scalp) surface</p></li>
<li><p>Shrink outer skin inward make the “outer skull”</p></li>
<li><p>Compute brain surface</p></li>
<li><p>Expand brain surface outward to make the “inner skull”</p></li>
</ol>
<p>A common problem is to see:</p>
<blockquote>
<div><p>the surface inner skull is not completely inside surface outer skull</p>
</div></blockquote>
<p>When looking at the meshes, the inner skull surface (expanded brain surface)
will have defects, and these defects will protrude into the outer skull surface
(shrunken scalp surface). In these cases, you can try (in rough ascending
order of difficulty):</p>
<ol class="arabic">
<li><p>Changing the <code class="docutils literal notranslate"><span class="pre">--preflood</span></code> / <code class="docutils literal notranslate"><span class="pre">-p</span></code> parameter in
<a class="reference internal" href="../generated/commands.html#mne-watershed-bem"><span class="std std-ref">mne watershed_bem</span></a>.</p></li>
<li><p>Changing the <code class="docutils literal notranslate"><span class="pre">--atlas</span></code> and <code class="docutils literal notranslate"><span class="pre">--gcaatlas</span></code> options of
<a class="reference internal" href="../generated/commands.html#mne-watershed-bem"><span class="std std-ref">mne watershed_bem</span></a>.</p></li>
<li><p>Manually editing the meshes (see <a class="reference internal" href="../auto_tutorials/forward/80_fix_bem_in_blender.html#tut-fix-meshes"><span class="std std-ref">this tutorial</span></a>).</p></li>
<li><p>Manually running <a class="reference external" href="https://surfer.nmr.mgh.harvard.edu/fswiki/mri_watershed">mri_watershed</a> with various FreeSurfer flags (e.g.,
<code class="docutils literal notranslate"><span class="pre">-less</span></code> to fix the output).</p></li>
<li><p>Going farther back in your Freesurfer pipeline to fix the problem.
In particular, <code class="docutils literal notranslate"><span class="pre">mri/brainmask.mgz</span></code> could be incorrectly generated by the
<a class="reference external" href="https://surfer.nmr.mgh.harvard.edu/fswiki/ReconAllDevTable">autorecon1</a> step and contain some dura and/or skull within the brain mask.
You can check by using <a class="reference external" href="https://surfer.nmr.mgh.harvard.edu/fswiki/FreeviewGuide/FreeviewIntroduction">freeview</a> or some other MRI-viewing tool.</p>
<ul>
<li><p>Consult the Freesurfer docs on <a class="reference external" href="https://surfer.nmr.mgh.harvard.edu/fswiki/FsTutorial/TroubleshootingDataV6.0#Fixingerrors">fixing errors</a>.</p></li>
<li><p>Try tweaking the <a class="reference external" href="https://surfer.nmr.mgh.harvard.edu/fswiki/mri_normalize">mri_normalize</a> parameters <a class="reference external" href="https://www.mail-archive.com/freesurfer&#64;nmr.mgh.harvard.edu/msg20991.html">via xopts</a>,
e.g.:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>mri_normalize<span class="w"> </span>-mprage<span class="w"> </span>-b<span class="w"> </span><span class="m">20</span><span class="w"> </span>-n<span class="w"> </span><span class="m">5</span>
</pre></div>
</div>
</li>
<li><p>Try <a class="reference external" href="https://www.mail-archive.com/freesurfer&#64;nmr.mgh.harvard.edu/msg11658.html">manually setting the control points and/or using -gentle</a>.</p></li>
<li><p>Examine the talairach transformation to see if it’s not quite right,
and if it’s not, <a class="reference external" href="https://surfer.nmr.mgh.harvard.edu/fswiki/Edits">adjust it manually</a>.</p></li>
<li><p>Search the <a class="reference external" href="https://www.mail-archive.com/freesurfer&#64;nmr.mgh.harvard.edu/">FreeSurfer listserv</a> for other ideas</p></li>
</ul>
<p>It can be helpful to run <code class="docutils literal notranslate"><span class="pre">recon_all</span> <span class="pre">-autorecon1</span> <span class="pre">-xopts</span> <span class="pre">xopts.txt</span></code> in a
clean directory first to see if this fixes everything, and, if not, then
resorting to manual control point setting and/or talairach adjustment.
Once everything looks good at the end of <code class="docutils literal notranslate"><span class="pre">-autorecon1</span></code>, you can then run
<a class="reference internal" href="../generated/commands.html#mne-watershed-bem"><span class="std std-ref">mne watershed_bem</span></a> to see if the output is good. Once it is
(and once brainmask.mgz is correct), you can then proceed with
<code class="docutils literal notranslate"><span class="pre">recon_all</span> <span class="pre">-autorecon2</span></code> and <code class="docutils literal notranslate"><span class="pre">recon_all</span> <span class="pre">-autorecon3</span></code> to effectively
complete all <code class="docutils literal notranslate"><span class="pre">recon_all</span></code> steps.</p>
</li>
</ol>
</section>
<section id="references">
<h3>References<a class="headerlink" href="#references" title="Link to this heading">#</a></h3>
<div class="docutils container" id="id5">
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="footcite-engemanngramfort2015" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id3">1</a><span class="fn-bracket">]</span></span>
<p>Denis A. Engemann and Alexandre Gramfort. Automated model selection in covariance estimation and spatial whitening of MEG and EEG signals. <em>NeuroImage</em>, 108:328–342, 2015. <a class="reference external" href="https://doi.org/10.1016/j.neuroimage.2014.12.040">doi:10.1016/j.neuroimage.2014.12.040</a>.</p>
</aside>
<aside class="footnote brackets" id="footcite-tauluetal2005" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id4">2</a><span class="fn-bracket">]</span></span>
<p>Samu Taulu, Juha Simola, and Matti J. Kajola. Applications of the signal space separation method. <em>IEEE Transactions on Signal Processing</em>, 53(9):3359–3372, 2005. <a class="reference external" href="https://doi.org/10.1109/TSP.2005.853302">doi:10.1109/TSP.2005.853302</a>.</p>
</aside>
</aside>
</div>
</section>
</section>
</section>


  
</div>

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="learn_python.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Getting started with Python</p>
      </div>
    </a>
    <a class="right-next"
       href="../development/index.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">MNE-Python Development</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#general-mne-python-issues">General MNE-Python issues</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#help-i-can-t-get-python-and-mne-python-working">Help! I can’t get Python and MNE-Python working!</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#i-still-can-t-get-it-to-work">I still can’t get it to work!</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#i-can-t-get-pyvista-3d-plotting-to-work-under-windows">I can’t get PyVista/3D plotting to work under Windows</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#python-runs-on-macos-extremely-slow-even-on-simple-commands">Python runs on macOS extremely slow even on simple commands!</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#how-do-i-cite-mne">How do I cite MNE?</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#i-m-not-sure-how-to-do-x-analysis-step-with-my-y-data">I’m not sure how to do <em>X</em> analysis step with my <em>Y</em> data…</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#i-think-i-found-a-bug-what-do-i-do">I think I found a bug, what do I do?</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#why-is-it-dangerous-to-pickle-my-mne-python-objects-and-data-for-later-use">Why is it dangerous to “pickle” my MNE-Python objects and data for later use?</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#i-downloaded-a-dataset-once-but-mne-python-is-asking-to-download-it-again-why">I downloaded a dataset once, but MNE-Python is asking to download it again. Why?</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#a-function-uses-multiple-cpu-cores-even-though-i-didn-t-tell-it-to-why">A function uses multiple CPU cores even though I didn’t tell it to. Why?</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#i-have-a-mystery-fif-file-how-do-i-read-it">I have a mystery FIF file, how do I read it?</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#resampling-and-decimating-data">Resampling and decimating data</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#what-are-all-these-options-for-resampling-decimating-and-binning-data">What are all these options for resampling, decimating, and binning data?</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#resampling-raw-data-is-taking-forever-what-do-i-do">Resampling raw data is taking forever! What do I do?</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#forward-and-inverse-solution">Forward and Inverse Solution</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#how-should-i-regularize-the-covariance-matrix">How should I regularize the covariance matrix?</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#my-watershed-bem-meshes-look-incorrect">My watershed BEM meshes look incorrect</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#references">References</a></li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
    
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

    <script src="https://mne.tools/versionwarning.js"></script>
  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item"><p class="text-center small">&copy; Copyright 2012–2025, MNE Developers. Last updated <time datetime="2025-11-20T06:30:00.627504+00:00" class="localized">2025-11-20 06:30 UTC</time>.
<script type="text/javascript">
function formatTimestamp() {
    document.querySelectorAll("time.localized").forEach(el => {
        const d = new Date(el.getAttribute("datetime"));
        el.textContent = d.toLocaleString("sv-SE", { "timeZoneName": "short" });
    });
}
if (document.readyState !== "loading") {
    formatTimestamp();
} else {
    document.addEventListener("DOMContentLoaded", formatTimestamp);
}
</script></p></div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  <!-- # L10n: Setting the PST URL as an argument as this does not need to be localized -->
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.16.1.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>