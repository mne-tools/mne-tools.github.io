<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Advanced setup and troubleshooting &#8212; MNE 0.18.dev0 documentation</title>
    <link rel="stylesheet" href="_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/gallery.css" />
    <link rel="stylesheet" type="text/css" href="_static/reset-syntax.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="_static/bootstrap-3.3.7/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="_static/bootstrap-sphinx.js"></script>
    <link rel="shortcut icon" href="_static/favicon.ico"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />

    <script type="text/javascript" src="_static/copybutton.js"></script>


    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-37225609-1']);
    _gaq.push(['_trackPageview']);

    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
    </script>


    <link rel="stylesheet" href="_static/style.css " type="text/css" />
    <link rel="stylesheet" href="_static/font-awesome.css" type="text/css" />
    <link rel="stylesheet" href="_static/flag-icon.css" type="text/css" />



    <script type="text/javascript">
    !function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);
    js.id=id;js.src="https://platform.twitter.com/widgets.js";
    fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");
    </script>



    <script type="text/javascript">
    (function() {
    var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
    po.src = 'https://apis.google.com/js/plusone.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
    })();
    </script>


  </head><body>

<div class="row devbar alert alert-danger">
This documentation is for <strong>development version 0.18.dev0</strong>.
</div>





  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="index.html"><span><img src="_static/mne_logo_small.png"></span>
           </a>
        <span class="navbar-text navbar-version pull-left"><b>0.18.dev0</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
                <li><a href="getting_started.html">Install</a></li>
                <li><a href="documentation.html">Documentation</a></li>
                <li><a href="python_reference.html">API</a></li>
                <li><a href="glossary.html">Glossary</a></li>
                <li><a href="auto_examples/index.html">Examples</a></li>
                <li><a href="contributing.html">Contribute</a></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"></ul>
</li>
              
            
            
            
            
            
              <li class="hidden-sm"></li>
            
          </ul>

          
<div class="navbar-form navbar-right navbar-btn dropdown btn-group-sm" style="margin-left: 20px; margin-top: 5px; margin-bottom: 5px">
  <button type="button" class="btn btn-danger navbar-btn dropdown-toggle" id="dropdownMenu1" data-toggle="dropdown">
    v0.18.dev0
    <span class="caret"></span>
  </button>
  <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
    <li><a href="https://mne-tools.github.io/dev/index.html">Development</a></li>
    <li><a href="https://mne-tools.github.io/stable/index.html">v0.17 (stable)</a></li>
    <li><a href="https://mne-tools.github.io/0.16/index.html">v0.16</a></li>
    <li><a href="https://mne-tools.github.io/0.15/index.html">v0.15</a></li>
    <li><a href="https://mne-tools.github.io/0.14/index.html">v0.14</a></li>
    <li><a href="https://mne-tools.github.io/0.13/index.html">v0.13</a></li>
    <li><a href="https://mne-tools.github.io/0.12/index.html">v0.12</a></li>
    <li><a href="https://mne-tools.github.io/0.11/index.html">v0.11</a></li>
  </ul>
</div>


            
<form class="navbar-form navbar-right" action="search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          

        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/mne_logo_small.png" alt="Logo"/>
            </a></p><ul>
<li><a class="reference internal" href="#">Advanced setup and troubleshooting</a><ul>
<li><a class="reference internal" href="#using-the-development-version-of-mne-latest-master">Using the development version of MNE (latest master)</a></li>
<li><a class="reference internal" href="#cuda-nvidia-gpu-acceleration">CUDA (NVIDIA GPU acceleration)</a></li>
<li><a class="reference internal" href="#ipython-jupyter-notebooks">IPython / Jupyter notebooks</a></li>
<li><a class="reference internal" href="#troubleshooting">Troubleshooting</a></li>
<li><a class="reference internal" href="#off-screen-rendering-on-linux-with-mesa">Off-screen rendering on Linux with MESA</a></li>
</ul>
</li>
</ul>

<form action="search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
        </div>
      </div>
    <div class="col-md-12 content">
      
  <div class="section" id="advanced-setup-and-troubleshooting">
<span id="advanced-setup"></span><h1>Advanced setup and troubleshooting<a class="headerlink" href="#advanced-setup-and-troubleshooting" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="steps">
<p class="topic-title first">Steps</p>
<ul class="simple">
<li><a class="reference internal" href="#using-the-development-version-of-mne-latest-master" id="id1">Using the development version of MNE (latest master)</a></li>
<li><a class="reference internal" href="#cuda-nvidia-gpu-acceleration" id="id2">CUDA (NVIDIA GPU acceleration)</a></li>
<li><a class="reference internal" href="#ipython-jupyter-notebooks" id="id3">IPython / Jupyter notebooks</a></li>
<li><a class="reference internal" href="#troubleshooting" id="id4">Troubleshooting</a></li>
<li><a class="reference internal" href="#off-screen-rendering-on-linux-with-mesa" id="id5">Off-screen rendering on Linux with MESA</a></li>
</ul>
</div>
<div class="section" id="using-the-development-version-of-mne-latest-master">
<span id="installing-master"></span><h2><a class="toc-backref" href="#id1">Using the development version of MNE (latest master)</a><a class="headerlink" href="#using-the-development-version-of-mne-latest-master" title="Permalink to this headline">¶</a></h2>
<p>It is possible to update your version of MNE between releases for
bugfixes or new features.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">In between releases, function and class APIs can change without
warning.</p>
</div>
<p>You can use <code class="docutils literal notranslate"><span class="pre">pip</span></code> for a one-time update:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> pip install --upgrade --no-deps git+https://github.com/mne-tools/mne-python.git
</pre></div>
</div>
<p>Or, if you prefer to be set up for frequent updates, you can use <code class="docutils literal notranslate"><span class="pre">git</span></code> directly:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> git clone git://github.com/mne-tools/mne-python.git
<span class="gp">$</span> <span class="nb">cd</span> mne-python
<span class="gp">$</span> python setup.py develop
</pre></div>
</div>
<p>A feature of <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">setup.py</span> <span class="pre">develop</span></code> is that any changes made to
the files (e.g., by updating to latest <code class="docutils literal notranslate"><span class="pre">master</span></code>) will be reflected in
<code class="docutils literal notranslate"><span class="pre">mne</span></code> as soon as you restart your Python interpreter. So to update to
the latest version of the <code class="docutils literal notranslate"><span class="pre">master</span></code> development branch, you can do:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> git pull origin master
</pre></div>
</div>
<p>and MNE will be updated to have the latest changes.</p>
<p>If you plan to contribute to MNE, please continue reading how to
<a class="reference internal" href="contributing.html#contribute-to-mne"><span class="std std-ref">How to contribute to MNE</span></a>.</p>
</div>
<div class="section" id="cuda-nvidia-gpu-acceleration">
<span id="cuda"></span><h2><a class="toc-backref" href="#id2">CUDA (NVIDIA GPU acceleration)</a><a class="headerlink" href="#cuda-nvidia-gpu-acceleration" title="Permalink to this headline">¶</a></h2>
<p>Some routines can utilize
<a class="reference external" href="https://developer.nvidia.com/cuda-zone">NVIDIA CUDA GPU processing</a>
to speed up some operations (e.g. FIR filtering) by roughly an order of magnitude.
To use CUDA, first  ensure that you are running the NVIDIA proprietary drivers
on your operating system, and then do:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> conda install cupy
<span class="gp">$</span> <span class="nv">MNE_USE_CUDA</span><span class="o">=</span><span class="nb">true</span> python -c <span class="s2">&quot;import mne; mne.cuda.init_cuda(verbose=True)&quot;</span>
<span class="go">Enabling CUDA with 1.55 GB available memory</span>
</pre></div>
</div>
<p>If you receive a message reporting the GPU’s available memory, <a class="reference external" href="https://cupy.chainer.org/">CuPy</a>
is woriking properly. To permanently enable CUDA in MNE, you can do:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">mne</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">set_config</span><span class="p">(</span><span class="s1">&#39;MNE_USE_CUDA&#39;</span><span class="p">,</span> <span class="s1">&#39;true&#39;</span><span class="p">)</span> 
</pre></div>
</div>
<p>You can then test MNE CUDA support by running the associated test:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> pytest mne/tests/test_filter.py -k cuda
</pre></div>
</div>
<p>If the tests pass, then CUDA should work in MNE. You can use CUDA in methods
that state that they allow passing <code class="docutils literal notranslate"><span class="pre">n_jobs='cuda'</span></code>, such as
<a class="reference internal" href="generated/mne.io.Raw.html#mne.io.Raw.filter" title="mne.io.Raw.filter"><code class="xref py py-meth docutils literal notranslate"><span class="pre">mne.io.Raw.filter()</span></code></a> and <a class="reference internal" href="generated/mne.io.Raw.html#mne.io.Raw.resample" title="mne.io.Raw.resample"><code class="xref py py-meth docutils literal notranslate"><span class="pre">mne.io.Raw.resample()</span></code></a>,
and they should run faster than the CPU-based multithreading such as
<code class="docutils literal notranslate"><span class="pre">n_jobs=8</span></code>.</p>
</div>
<div class="section" id="ipython-jupyter-notebooks">
<h2><a class="toc-backref" href="#id3">IPython / Jupyter notebooks</a><a class="headerlink" href="#ipython-jupyter-notebooks" title="Permalink to this headline">¶</a></h2>
<p>In Jupyter, we strongly recommend using the Qt matplotlib backend for
fast and correct rendering:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> ipython --matplotlib<span class="o">=</span>qt
</pre></div>
</div>
<p>On Linux, for example, QT is the only matplotlib backend for which 3D rendering
will work correctly. On Mac OS X for other backends certain matplotlib
functions might not work as expected.</p>
<p>To take full advantage of MNE-Python’s visualization capacities in combination
with IPython notebooks and inline displaying, please explicitly add the
following magic method invocation to your notebook or configure your notebook
runtime accordingly:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">1</span><span class="p">]:</span> <span class="o">%</span><span class="k">matplotlib</span> inline
</pre></div>
</div>
<p>If you use another Python setup and you encounter some difficulties please
report them on the MNE mailing list or on github to get assistance.</p>
</div>
<div class="section" id="troubleshooting">
<h2><a class="toc-backref" href="#id4">Troubleshooting</a><a class="headerlink" href="#troubleshooting" title="Permalink to this headline">¶</a></h2>
<p>If you run into trouble when visualizing source estimates (or anything else
using mayavi), you can try setting the <code class="docutils literal notranslate"><span class="pre">ETS_TOOLKIT</span></code> environment variable:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">os</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;ETS_TOOLKIT&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;qt4&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;QT_API&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;pyqt5&#39;</span>
</pre></div>
</div>
<p>This will tell Traits that we will use Qt with PyQt bindings.</p>
<p>For more information, see
<a class="reference external" href="http://docs.enthought.com/mayavi/mayavi/building_applications.html">http://docs.enthought.com/mayavi/mayavi/building_applications.html</a>.</p>
</div>
<div class="section" id="off-screen-rendering-on-linux-with-mesa">
<h2><a class="toc-backref" href="#id5">Off-screen rendering on Linux with MESA</a><a class="headerlink" href="#off-screen-rendering-on-linux-with-mesa" title="Permalink to this headline">¶</a></h2>
<p>On remote systems, it might be possible to use MESA software rendering
(such as <code class="docutils literal notranslate"><span class="pre">llvmpipe</span></code> or <code class="docutils literal notranslate"><span class="pre">swr</span></code>) for 3D visualization with some tweaks.
For example, on CentOS 7.5 you might be able to use the environment variable
to force MESA to use modern OpenGL by using this before executing
<code class="docutils literal notranslate"><span class="pre">spyder</span></code> or <code class="docutils literal notranslate"><span class="pre">python</span></code>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> <span class="nb">export</span> <span class="nv">MESA_GL_VERSION_OVERRIDE</span><span class="o">=</span><span class="m">3</span>.3
</pre></div>
</div>
<p>Also, it’s possible that different software rending backends might perform
better than others, such as using the <code class="docutils literal notranslate"><span class="pre">llvmpipe</span></code> backend rather than <code class="docutils literal notranslate"><span class="pre">swr</span></code>.</p>
</div>
</div>


    </div>
    
  </div>
</div>
<footer class="footer">
  <div class="container"><img src="_static/institutions.png" alt="Institutions"></div>
  <div class="container">
    <ul class="list-inline">
      <li><a href="https://github.com/mne-tools/mne-python">GitHub</a></li>
      <li>·</li>
      <li><a href="https://mail.nmr.mgh.harvard.edu/mailman/listinfo/mne_analysis">Mailing list</a></li>
      <li>·</li>
      <li><a href="https://gitter.im/mne-tools/mne-python">Gitter</a></li>
      <li>·</li>
      <li><a href="whats_new.html">What's new</a></li>
      <li>·</li>
      <li><a href="faq.html#cite">Cite MNE</a></li>
      <li class="pull-right"><a href="#">Back to top</a></li>
    </ul>
    <p>&copy; Copyright 2012-2018, MNE Developers. Last updated on 2018-11-29.</p>
  </div>
</footer>
  </body>
</html>