<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>mne.simulation.simulate_raw &#8212; MNE 0.18.dev0 documentation</title>
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/gallery.css" />
    <link rel="stylesheet" type="text/css" href="../_static/reset-syntax.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.3.7/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />

    <script type="text/javascript" src="../_static/copybutton.js"></script>


    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-37225609-1']);
    _gaq.push(['_trackPageview']);

    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
    </script>


    <link rel="stylesheet" href="../_static/style.css " type="text/css" />
    <link rel="stylesheet" href="../_static/font-awesome.css" type="text/css" />
    <link rel="stylesheet" href="../_static/flag-icon.css" type="text/css" />



    <script type="text/javascript">
    !function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);
    js.id=id;js.src="https://platform.twitter.com/widgets.js";
    fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");
    </script>



    <script type="text/javascript">
    (function() {
    var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
    po.src = 'https://apis.google.com/js/plusone.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
    })();
    </script>


  </head><body>

<div class="row devbar alert alert-danger">
This documentation is for <strong>development version 0.18.dev0</strong>.
</div>





  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../index.html"><span><img src="../_static/mne_logo_small.png"></span>
           </a>
        <span class="navbar-text navbar-version pull-left"><b>0.18.dev0</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
                <li><a href="../getting_started.html">Install</a></li>
                <li><a href="../documentation.html">Documentation</a></li>
                <li><a href="../python_reference.html">API</a></li>
                <li><a href="../glossary.html">Glossary</a></li>
                <li><a href="../auto_examples/index.html">Examples</a></li>
                <li><a href="../contributing.html">Contribute</a></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"></ul>
</li>
              
            
            
            
            
            
              <li class="hidden-sm"></li>
            
          </ul>

          
<div class="navbar-form navbar-right navbar-btn dropdown btn-group-sm" style="margin-left: 20px; margin-top: 5px; margin-bottom: 5px">
  <button type="button" class="btn btn-danger navbar-btn dropdown-toggle" id="dropdownMenu1" data-toggle="dropdown">
    v0.18.dev0
    <span class="caret"></span>
  </button>
  <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
    <li><a href="https://mne-tools.github.io/dev/index.html">Development</a></li>
    <li><a href="https://mne-tools.github.io/stable/index.html">v0.17 (stable)</a></li>
    <li><a href="https://mne-tools.github.io/0.16/index.html">v0.16</a></li>
    <li><a href="https://mne-tools.github.io/0.15/index.html">v0.15</a></li>
    <li><a href="https://mne-tools.github.io/0.14/index.html">v0.14</a></li>
    <li><a href="https://mne-tools.github.io/0.13/index.html">v0.13</a></li>
    <li><a href="https://mne-tools.github.io/0.12/index.html">v0.12</a></li>
    <li><a href="https://mne-tools.github.io/0.11/index.html">v0.11</a></li>
  </ul>
</div>


            
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          

        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/mne_logo_small.png" alt="Logo"/>
            </a></p><ul>
<li><a class="reference internal" href="#">mne.simulation.simulate_raw</a><ul>
<li><a class="reference internal" href="#examples-using-mne-simulation-simulate-raw">Examples using <code class="docutils literal notranslate"><span class="pre">mne.simulation.simulate_raw</span></code></a></li>
</ul>
</li>
</ul>

<form action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
        </div>
      </div>
    <div class="col-md-12 content">
      
  <div class="section" id="mne-simulation-simulate-raw">
<h1>mne.simulation.simulate_raw<a class="headerlink" href="#mne-simulation-simulate-raw" title="Permalink to this headline">¶</a></h1>
<dl class="function">
<dt id="mne.simulation.simulate_raw">
<code class="descclassname">mne.simulation.</code><code class="descname">simulate_raw</code><span class="sig-paren">(</span><em>raw</em>, <em>stc</em>, <em>trans</em>, <em>src</em>, <em>bem</em>, <em>cov='simple'</em>, <em>blink=False</em>, <em>ecg=False</em>, <em>chpi=False</em>, <em>head_pos=None</em>, <em>mindist=1.0</em>, <em>interp='cos2'</em>, <em>iir_filter=None</em>, <em>n_jobs=1</em>, <em>random_state=None</em>, <em>use_cps=True</em>, <em>forward=None</em>, <em>duration=None</em>, <em>verbose=None</em><span class="sig-paren">)</span><a class="reference external" href="http://github.com/mne-tools/mne-python/blob/master/mne/simulation/raw.py#L65-L506"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mne.simulation.simulate_raw" title="Permalink to this definition">¶</a></dt>
<dd><p>Simulate raw data.</p>
<p>Head movements can optionally be simulated using the <code class="docutils literal notranslate"><span class="pre">head_pos</span></code>
parameter.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>raw</strong> <span class="classifier-delimiter">:</span> <span class="classifier">instance of Raw | instance of Info</span></dt>
<dd><p class="first last">The raw template to use for simulation. The <code class="docutils literal notranslate"><span class="pre">info</span></code>, <code class="docutils literal notranslate"><span class="pre">times</span></code>,
and <code class="docutils literal notranslate"><span class="pre">first_samp</span></code> properties will be used.
Can be <code class="docutils literal notranslate"><span class="pre">info</span></code> if <code class="docutils literal notranslate"><span class="pre">duration</span></code> is also supplied, in which case
<code class="docutils literal notranslate"><span class="pre">first_samp</span></code> will be set to zero.</p>
</dd>
<dt><strong>stc</strong> <span class="classifier-delimiter">:</span> <span class="classifier">instance of SourceEstimate</span></dt>
<dd><p class="first last">The source estimate to use to simulate data. Must have the same
sample rate as the raw data.</p>
</dd>
<dt><strong>trans</strong> <span class="classifier-delimiter">:</span> <span class="classifier">dict | str | None</span></dt>
<dd><p class="first last">Either a transformation filename (usually made using mne_analyze)
or an info dict (usually opened using read_trans()).
If string, an ending of <em class="xref py py-obj">fif</em> or <em class="xref py py-obj">fif.gz</em> will be assumed to
be in FIF format, any other ending will be assumed to be a text
file with a 4x4 transformation matrix (like the <em class="xref py py-obj">–trans</em> MNE-C
option). If trans is None, an identity transform will be used.</p>
</dd>
<dt><strong>src</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str | instance of SourceSpaces</span></dt>
<dd><p class="first last">Source space corresponding to the stc. If string, should be a source
space filename. Can also be an instance of loaded or generated
SourceSpaces.</p>
</dd>
<dt><strong>bem</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str | dict</span></dt>
<dd><p class="first last">BEM solution  corresponding to the stc. If string, should be a BEM
solution filename (e.g., “sample-5120-5120-5120-bem-sol.fif”).</p>
</dd>
<dt><strong>cov</strong> <span class="classifier-delimiter">:</span> <span class="classifier">instance of Covariance | str | dict of float | None</span></dt>
<dd><p class="first last">The sensor covariance matrix used to generate noise. If string, should
be a filename or ‘simple’. If ‘simple’, an ad hoc covariance matrix
will be generated with default values. If dict, an ad hoc covariance
matrix will be generated with the values specified by the dict entries.
If None, no noise will be added.</p>
</dd>
<dt><strong>blink</strong> <span class="classifier-delimiter">:</span> <span class="classifier">bool</span></dt>
<dd><p class="first last">If true, add simulated blink artifacts. See Notes for details.</p>
</dd>
<dt><strong>ecg</strong> <span class="classifier-delimiter">:</span> <span class="classifier">bool</span></dt>
<dd><p class="first last">If true, add simulated ECG artifacts. See Notes for details.</p>
</dd>
<dt><strong>chpi</strong> <span class="classifier-delimiter">:</span> <span class="classifier">bool</span></dt>
<dd><p class="first last">If true, simulate continuous head position indicator information.
Valid cHPI information must encoded in <code class="docutils literal notranslate"><span class="pre">raw.info['hpi_meas']</span></code>
to use this option.</p>
</dd>
<dt><strong>head_pos</strong> <span class="classifier-delimiter">:</span> <span class="classifier">None | str | dict | tuple | array</span></dt>
<dd><p class="first last">Name of the position estimates file. Should be in the format of
the files produced by maxfilter. If dict, keys should
be the time points and entries should be 4x4 <code class="docutils literal notranslate"><span class="pre">dev_head_t</span></code>
matrices. If None, the original head position (from
<code class="docutils literal notranslate"><span class="pre">info['dev_head_t']</span></code>) will be used. If tuple, should have the
same format as data returned by <em class="xref py py-obj">head_pos_to_trans_rot_t</em>.
If array, should be of the form returned by
<a class="reference internal" href="mne.chpi.read_head_pos.html#mne.chpi.read_head_pos" title="mne.chpi.read_head_pos"><code class="xref py py-func docutils literal notranslate"><span class="pre">mne.chpi.read_head_pos()</span></code></a>.</p>
</dd>
<dt><strong>mindist</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">Minimum distance between sources and the inner skull boundary
to use during forward calculation.</p>
</dd>
<dt><strong>interp</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd><p class="first last">Either ‘hann’, ‘cos2’, ‘linear’, or ‘zero’, the type of
forward-solution interpolation to use between forward solutions
at different head positions.</p>
</dd>
<dt><strong>iir_filter</strong> <span class="classifier-delimiter">:</span> <span class="classifier">None | array</span></dt>
<dd><p class="first last">IIR filter coefficients (denominator) e.g. [1, -1, 0.2].</p>
</dd>
<dt><strong>n_jobs</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">Number of jobs to use.</p>
</dd>
<dt><strong>random_state</strong> <span class="classifier-delimiter">:</span> <span class="classifier">None | int | ~numpy.random.RandomState</span></dt>
<dd><p class="first last">The random generator state used for blink, ECG, and sensor
noise randomization.</p>
</dd>
<dt><strong>use_cps</strong> <span class="classifier-delimiter">:</span> <span class="classifier">None | bool (default True)</span></dt>
<dd><p class="first last">Whether to use cortical patch statistics to define normal
orientations. Only used when surf_ori and/or force_fixed are True.</p>
</dd>
<dt><strong>forward</strong> <span class="classifier-delimiter">:</span> <span class="classifier">instance of Forward | None</span></dt>
<dd><p class="first">The forward operator to use. If None (default) it will be computed
using <code class="docutils literal notranslate"><span class="pre">bem</span></code>, <code class="docutils literal notranslate"><span class="pre">trans</span></code>, and <code class="docutils literal notranslate"><span class="pre">src</span></code>.</p>
<div class="last versionadded">
<p><span class="versionmodified">New in version 0.17.</span></p>
</div>
</dd>
<dt><strong>duration</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float | None</span></dt>
<dd><p class="first">The duration to simulate. Can be None to use the duration of <code class="docutils literal notranslate"><span class="pre">raw</span></code>.
Must be supplied if <code class="docutils literal notranslate"><span class="pre">raw</span></code> is an instance of <a class="reference internal" href="mne.Info.html#mne.Info" title="mne.Info"><code class="xref py py-class docutils literal notranslate"><span class="pre">mne.Info</span></code></a>.</p>
<div class="last versionadded">
<p><span class="versionmodified">New in version 0.18.</span></p>
</div>
</dd>
<dt><strong>verbose</strong> <span class="classifier-delimiter">:</span> <span class="classifier">bool, str, int, or None</span></dt>
<dd><p class="first last">If not None, override default verbose level (see <a class="reference internal" href="mne.verbose.html#mne.verbose" title="mne.verbose"><code class="xref py py-func docutils literal notranslate"><span class="pre">mne.verbose()</span></code></a>
and <a class="reference internal" href="../auto_tutorials/plot_configuration.html#tut-logging"><span class="std std-ref">Logging documentation</span></a> for more).</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>raw</strong> <span class="classifier-delimiter">:</span> <span class="classifier">instance of Raw</span></dt>
<dd><p class="first last">The simulated raw file.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="mne.chpi.read_head_pos.html#mne.chpi.read_head_pos" title="mne.chpi.read_head_pos"><code class="xref py py-obj docutils literal notranslate"><span class="pre">mne.chpi.read_head_pos</span></code></a>, <a class="reference internal" href="mne.simulation.simulate_evoked.html#mne.simulation.simulate_evoked" title="mne.simulation.simulate_evoked"><code class="xref py py-obj docutils literal notranslate"><span class="pre">simulate_evoked</span></code></a>, <a class="reference internal" href="mne.simulation.simulate_stc.html#mne.simulation.simulate_stc" title="mne.simulation.simulate_stc"><code class="xref py py-obj docutils literal notranslate"><span class="pre">simulate_stc</span></code></a>, <a class="reference internal" href="mne.simulation.simulate_sparse_stc.html#mne.simulation.simulate_sparse_stc" title="mne.simulation.simulate_sparse_stc"><code class="xref py py-obj docutils literal notranslate"><span class="pre">simulate_sparse_stc</span></code></a></p>
</div>
<p class="rubric">Notes</p>
<p>Events coded with the position number (starting at 1) will be stored
in the trigger channel (if available) at times corresponding to t=0
in the <code class="docutils literal notranslate"><span class="pre">stc</span></code>.</p>
<p>The resulting SNR will be determined by the structure of the noise
covariance, the amplitudes of <code class="docutils literal notranslate"><span class="pre">stc</span></code>, and the head position(s) provided.</p>
<p>The blink and ECG artifacts are generated by 1) placing impulses at
random times of activation, and 2) convolving with activation kernel
functions. In both cases, the scale-factors of the activation functions
(and for the resulting EOG and ECG channel traces) were chosen based on
visual inspection to yield amplitudes generally consistent with those
seen in experimental data. Noisy versions of the blink and ECG
activations will be stored in the first EOG and ECG channel in the
raw file, respectively, if they exist.</p>
<p>For blink artifacts:</p>
<blockquote>
<div><ol class="arabic simple">
<li>Random activation times are drawn from an inhomogeneous poisson
process whose blink rate oscillates between 4.5 blinks/minute
and 17 blinks/minute based on the low (reading) and high (resting)
blink rates from <a class="reference internal" href="#rcf0e4436a8f9-1" id="id1">[1]</a>.</li>
<li>The activation kernel is a 250 ms Hanning window.</li>
<li>Two activated dipoles are located in the z=0 plane (in head
coordinates) at ±30 degrees away from the y axis (nasion).</li>
<li>Activations affect MEG and EEG channels.</li>
</ol>
</div></blockquote>
<p>For ECG artifacts:</p>
<blockquote>
<div><ol class="arabic simple">
<li>Random inter-beat intervals are drawn from a uniform distribution
of times corresponding to 40 and 80 beats per minute.</li>
<li>The activation function is the sum of three Hanning windows with
varying durations and scales to make a more complex waveform.</li>
<li>The activated dipole is located one (estimated) head radius to
the left (-x) of head center and three head radii below (+z)
head center; this dipole is oriented in the +x direction.</li>
<li>Activations only affect MEG channels.</li>
</ol>
</div></blockquote>
<p>If you have a <a class="reference internal" href="mne.Info.html#mne.Info" title="mne.Info"><code class="xref py py-class docutils literal notranslate"><span class="pre">mne.Info</span></code></a> that you want to use with no associated
<a class="reference internal" href="mne.io.Raw.html#mne.io.Raw" title="mne.io.Raw"><code class="xref py py-class docutils literal notranslate"><span class="pre">mne.io.Raw</span></code></a> instance, consider creating a dummy one using
<a class="reference internal" href="mne.io.RawArray.html#mne.io.RawArray" title="mne.io.RawArray"><code class="xref py py-class docutils literal notranslate"><span class="pre">mne.io.RawArray</span></code></a>.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.10.0.</span></p>
</div>
<p class="rubric">References</p>
<table class="docutils citation" frame="void" id="rcf0e4436a8f9-1" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[1]</td><td><em>(<a class="fn-backref" href="#id1">1</a>, <a class="fn-backref" href="#id2">2</a>)</em> Bentivoglio et al. “Analysis of blink rate patterns in normal
subjects” Movement Disorders, 1997 Nov;12(6):1028-34.</td></tr>
</tbody>
</table>
</dd></dl>

<div class="section" id="examples-using-mne-simulation-simulate-raw">
<h2>Examples using <code class="docutils literal notranslate"><span class="pre">mne.simulation.simulate_raw</span></code><a class="headerlink" href="#examples-using-mne-simulation-simulate-raw" title="Permalink to this headline">¶</a></h2>
<div class="sphx-glr-thumbcontainer" tooltip="This example generates raw data by repeating a desired source activation multiple times."><div class="figure" id="id3">
<img alt="../_images/sphx_glr_plot_simulate_raw_data_thumb.png" src="../_images/sphx_glr_plot_simulate_raw_data_thumb.png" />
<p class="caption"><span class="caption-text"><a class="reference internal" href="../auto_examples/simulation/plot_simulate_raw_data.html#sphx-glr-auto-examples-simulation-plot-simulate-raw-data-py"><span class="std std-ref">Generate simulated raw data</span></a></span></p>
</div>
</div><div class="sphx-glr-thumbcontainer" tooltip="In this tutorial, we&#x27;ll simulate two signals originating from two locations on the cortex. Thes..."><div class="figure" id="id4">
<img alt="../_images/sphx_glr_plot_dics_thumb.png" src="../_images/sphx_glr_plot_dics_thumb.png" />
<p class="caption"><span class="caption-text"><a class="reference internal" href="../auto_tutorials/plot_dics.html#sphx-glr-auto-tutorials-plot-dics-py"><span class="std std-ref">DICS for power mapping</span></a></span></p>
</div>
</div><div style='clear:both'></div></div>
</div>


    </div>
    
  </div>
</div>
<footer class="footer">
  <div class="container"><img src="../_static/institutions.png" alt="Institutions"></div>
  <div class="container">
    <ul class="list-inline">
      <li><a href="https://github.com/mne-tools/mne-python">GitHub</a></li>
      <li>·</li>
      <li><a href="https://mail.nmr.mgh.harvard.edu/mailman/listinfo/mne_analysis">Mailing list</a></li>
      <li>·</li>
      <li><a href="https://gitter.im/mne-tools/mne-python">Gitter</a></li>
      <li>·</li>
      <li><a href="whats_new.html">What's new</a></li>
      <li>·</li>
      <li><a href="faq.html#cite">Cite MNE</a></li>
      <li class="pull-right"><a href="#">Back to top</a></li>
    </ul>
    <p>&copy; Copyright 2012-2019, MNE Developers. Last updated on 2019-02-11.</p>
  </div>
</footer>
  </body>
</html>