<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>The Events and Annotations data structures &#8212; MNE 0.18.dev0 documentation</title>
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/gallery.css" />
    <link rel="stylesheet" href="../_static/reset-syntax.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />

    <script type="text/javascript" src="../_static/copybutton.js"></script>


    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-37225609-1']);
    _gaq.push(['_trackPageview']);

    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
    </script>


    <link rel="stylesheet" href="../_static/style.css " type="text/css" />
    <link rel="stylesheet" href="../_static/font-awesome.css" type="text/css" />
    <link rel="stylesheet" href="../_static/flag-icon.css" type="text/css" />



    <script type="text/javascript">
    !function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);
    js.id=id;js.src="https://platform.twitter.com/widgets.js";
    fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");
    </script>



    <script type="text/javascript">
    (function() {
    var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
    po.src = 'https://apis.google.com/js/plusone.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
    })();
    </script>


  </head><body>

<div class="row devbar alert alert-danger">
This documentation is for <strong>development version 0.18.dev0</strong>.
</div>





  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../index.html"><span><img src="../_static/mne_logo_small.png"></span>
           </a>
        <span class="navbar-text navbar-version pull-left"><b>0.18.dev0</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
                <li><a href="../getting_started.html">Install</a></li>
                <li><a href="../documentation.html">Documentation</a></li>
                <li><a href="../python_reference.html">API</a></li>
                <li><a href="../glossary.html">Glossary</a></li>
                <li><a href="../auto_examples/index.html">Examples</a></li>
                <li><a href="../contributing.html">Contribute</a></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"></ul>
</li>
              
            
            
            
            
            
              <li class="hidden-sm"></li>
            
          </ul>

          
<div class="navbar-form navbar-right navbar-btn dropdown btn-group-sm" style="margin-left: 20px; margin-top: 5px; margin-bottom: 5px">
  <button type="button" class="btn btn-danger navbar-btn dropdown-toggle" id="dropdownMenu1" data-toggle="dropdown">
    v0.18.dev0
    <span class="caret"></span>
  </button>
  <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
    <li><a href="https://mne-tools.github.io/dev/index.html">Development</a></li>
    <li><a href="https://mne-tools.github.io/stable/index.html">v0.17 (stable)</a></li>
    <li><a href="https://mne-tools.github.io/0.16/index.html">v0.16</a></li>
    <li><a href="https://mne-tools.github.io/0.15/index.html">v0.15</a></li>
    <li><a href="https://mne-tools.github.io/0.14/index.html">v0.14</a></li>
    <li><a href="https://mne-tools.github.io/0.13/index.html">v0.13</a></li>
    <li><a href="https://mne-tools.github.io/0.12/index.html">v0.12</a></li>
    <li><a href="https://mne-tools.github.io/0.11/index.html">v0.11</a></li>
  </ul>
</div>


            
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          

        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/mne_logo_small.png" alt="Logo"/>
            </a></p><ul>
<li><a class="reference internal" href="#">The <span class="xref std std-term">Events</span> and <code class="xref py py-class docutils literal notranslate"><span class="pre">Annotations</span></code> data structures</a><ul>
<li><a class="reference internal" href="#an-example-of-events-and-annotations">An example of events and annotations</a></li>
<li><a class="reference internal" href="#add-annotations-to-raw-objects">Add <span class="xref std std-term">annotations</span> to <span class="xref std std-term">raw</span> objects</a></li>
<li><a class="reference internal" href="#valid-operations-in-mne-annotations">Valid operations in <code class="xref py py-class docutils literal notranslate"><span class="pre">mne.Annotations</span></code></a><ul>
<li><a class="reference internal" href="#concatenate">Concatenate</a></li>
<li><a class="reference internal" href="#iterating-indexing-and-slicing-mne-annotations">Iterating, Indexing and Slicing <code class="xref py py-class docutils literal notranslate"><span class="pre">mne.Annotations</span></code></a></li>
<li><a class="reference internal" href="#save">Save</a></li>
</ul>
</li>
</ul>
</li>
</ul>

<form action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
        </div>
      </div>
    <div class="body col-md-12 content" role="main">
      
  <div class="sphx-glr-download-link-note admonition note">
<p class="admonition-title">Note</p>
<p>Click <a class="reference internal" href="#sphx-glr-download-auto-tutorials-plot-object-annotations-py"><span class="std std-ref">here</span></a> to download the full example code</p>
</div>
<div class="sphx-glr-example-title section" id="the-events-and-annotations-data-structures">
<span id="sphx-glr-auto-tutorials-plot-object-annotations-py"></span><h1>The <a class="reference internal" href="../glossary.html#term-events"><span class="xref std std-term">Events</span></a> and <a class="reference internal" href="../generated/mne.Annotations.html#mne.Annotations" title="mne.Annotations"><code class="xref py py-class docutils literal notranslate"><span class="pre">Annotations</span></code></a> data structures<a class="headerlink" href="#the-events-and-annotations-data-structures" title="Permalink to this headline">¶</a></h1>
<p><a class="reference internal" href="../glossary.html#term-events"><span class="xref std std-term">Events</span></a> and <a class="reference internal" href="../glossary.html#term-annotations"><span class="xref std std-term">annotations</span></a> are quite similar.
This tutorial highlights their differences and similarities, and tries to shed
some light on which one is preferred to use in different situations when using
MNE.</p>
<p>Both events and <a class="reference internal" href="../generated/mne.Annotations.html#mne.Annotations" title="mne.Annotations"><code class="xref py py-class docutils literal notranslate"><span class="pre">Annotations</span></code></a> can be seen as triplets
where the first element answers to <strong>when</strong> something happens and the last
element refers to <strong>what</strong> it is.
The main difference is that events represent the onset in samples taking into
account the first sample value
(<a class="reference internal" href="../generated/mne.io.Raw.html#mne.io.Raw.first_samp" title="mne.io.Raw.first_samp"><code class="xref py py-attr docutils literal notranslate"><span class="pre">raw.first_samp</span></code></a>), and the description is
an integer value.
In contrast, <a class="reference internal" href="../generated/mne.Annotations.html#mne.Annotations" title="mne.Annotations"><code class="xref py py-class docutils literal notranslate"><span class="pre">Annotations</span></code></a> represents the
<code class="docutils literal notranslate"><span class="pre">onset</span></code> in seconds (relative to the reference <code class="docutils literal notranslate"><span class="pre">orig_time</span></code>),
and the <code class="docutils literal notranslate"><span class="pre">description</span></code> is an arbitrary string.
There is no correspondence between the second element of events and
<a class="reference internal" href="../generated/mne.Annotations.html#mne.Annotations" title="mne.Annotations"><code class="xref py py-class docutils literal notranslate"><span class="pre">Annotations</span></code></a>.
For events, the second element corresponds to the previous value on the
stimulus channel from which events are extracted. In practice, the second
element is therefore in most cases zero.
The second element of <a class="reference internal" href="../generated/mne.Annotations.html#mne.Annotations" title="mne.Annotations"><code class="xref py py-class docutils literal notranslate"><span class="pre">Annotations</span></code></a> is a float
indicating its duration in seconds.</p>
<p>See <a class="reference internal" href="../auto_examples/io/plot_read_events.html#sphx-glr-auto-examples-io-plot-read-events-py"><span class="std std-ref">Reading an event file</span></a>
for a complete example of how to read, select, and visualize <strong>events</strong>;
and <a class="reference internal" href="plot_artifacts_correction_rejection.html#sphx-glr-auto-tutorials-plot-artifacts-correction-rejection-py"><span class="std std-ref">Rejecting bad data (channels and segments)</span></a> to
learn how <a class="reference internal" href="../generated/mne.Annotations.html#mne.Annotations" title="mne.Annotations"><code class="xref py py-class docutils literal notranslate"><span class="pre">Annotations</span></code></a> are used to mark bad segments
of data.</p>
<div class="section" id="an-example-of-events-and-annotations">
<h2>An example of events and annotations<a class="headerlink" href="#an-example-of-events-and-annotations" title="Permalink to this headline">¶</a></h2>
<p>The following example shows the recorded events in <em class="xref py py-obj">sample_audvis_raw.fif</em> and
marks bad segments due to eye blinks.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os.path</span> <span class="k">as</span> <span class="nn">op</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="kn">import</span> <span class="nn">mne</span>

<span class="c1"># Load the data</span>
<span class="n">data_path</span> <span class="o">=</span> <a href="../generated/mne.datasets.sample.data_path.html#mne.datasets.sample.data_path" title="View documentation for mne.datasets.sample.data_path"><span class="n">mne</span><span class="o">.</span><span class="n">datasets</span><span class="o">.</span><span class="n">sample</span><span class="o">.</span><span class="n">data_path</span></a><span class="p">()</span>
<span class="n">fname</span> <span class="o">=</span> <span class="n">op</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">data_path</span><span class="p">,</span> <span class="s1">&#39;MEG&#39;</span><span class="p">,</span> <span class="s1">&#39;sample&#39;</span><span class="p">,</span> <span class="s1">&#39;sample_audvis_raw.fif&#39;</span><span class="p">)</span>
<span class="n">raw</span> <span class="o">=</span> <a href="../generated/mne.io.read_raw_fif.html#mne.io.read_raw_fif" title="View documentation for mne.io.read_raw_fif"><span class="n">mne</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">read_raw_fif</span></a><span class="p">(</span><span class="n">fname</span><span class="p">)</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>Opening raw data file /home/circleci/mne_data/MNE-sample-data/MEG/sample/sample_audvis_raw.fif...
    Read a total of 3 projection items:
        PCA-v1 (1 x 102)  idle
        PCA-v2 (1 x 102)  idle
        PCA-v3 (1 x 102)  idle
    Range : 25800 ... 192599 =     42.956 ...   320.670 secs
Ready.
Current compensation grade : 0
</pre></div>
</div>
<p>First we’ll create and plot events associated with the experimental paradigm:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># extract the events array from the stim channel</span>
<span class="n">events</span> <span class="o">=</span> <a href="../generated/mne.find_events.html#mne.find_events" title="View documentation for mne.find_events"><span class="n">mne</span><span class="o">.</span><span class="n">find_events</span></a><span class="p">(</span><span class="n">raw</span><span class="p">)</span>

<span class="c1"># Specify event_id dictionary based on the meaning of experimental triggers</span>
<span class="n">event_id</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;Auditory/Left&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;Auditory/Right&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
            <span class="s1">&#39;Visual/Left&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;Visual/Right&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
            <span class="s1">&#39;smiley&#39;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="s1">&#39;button&#39;</span><span class="p">:</span> <span class="mi">32</span><span class="p">}</span>
<span class="n">color</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">:</span> <span class="s1">&#39;green&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span> <span class="s1">&#39;yellow&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">:</span> <span class="s1">&#39;red&#39;</span><span class="p">,</span> <span class="mi">4</span><span class="p">:</span> <span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="mi">5</span><span class="p">:</span> <span class="s1">&#39;black&#39;</span><span class="p">,</span> <span class="mi">32</span><span class="p">:</span> <span class="s1">&#39;blue&#39;</span><span class="p">}</span>

<a href="../generated/mne.viz.plot_events.html#mne.viz.plot_events" title="View documentation for mne.viz.plot_events"><span class="n">mne</span><span class="o">.</span><span class="n">viz</span><span class="o">.</span><span class="n">plot_events</span></a><span class="p">(</span><span class="n">events</span><span class="p">,</span> <span class="n">raw</span><span class="o">.</span><span class="n">info</span><span class="p">[</span><span class="s1">&#39;sfreq&#39;</span><span class="p">],</span> <span class="n">raw</span><span class="o">.</span><span class="n">first_samp</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">,</span>
                    <span class="n">event_id</span><span class="o">=</span><span class="n">event_id</span><span class="p">)</span>
</pre></div>
</div>
<img alt="../_images/sphx_glr_plot_object_annotations_001.png" class="sphx-glr-single-img" src="../_images/sphx_glr_plot_object_annotations_001.png" />
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>320 events found
Event IDs: [ 1  2  3  4  5 32]
</pre></div>
</div>
<p>Next, we’re going to detect eye blinks and turn them into
<a class="reference internal" href="../generated/mne.Annotations.html#mne.Annotations" title="mne.Annotations"><code class="xref py py-class docutils literal notranslate"><span class="pre">Annotations</span></code></a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># find blinks</span>
<span class="n">annotated_blink_raw</span> <span class="o">=</span> <span class="n">raw</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">eog_events</span> <span class="o">=</span> <a href="../generated/mne.preprocessing.find_eog_events.html#mne.preprocessing.find_eog_events" title="View documentation for mne.preprocessing.find_eog_events"><span class="n">mne</span><span class="o">.</span><span class="n">preprocessing</span><span class="o">.</span><span class="n">find_eog_events</span></a><span class="p">(</span><span class="n">raw</span><span class="p">)</span>
<span class="n">n_blinks</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">eog_events</span><span class="p">)</span>

<span class="c1"># Turn blink events into Annotations of 0.5 seconds duration,</span>
<span class="c1"># each centered on the blink event:</span>
<span class="n">onset</span> <span class="o">=</span> <span class="n">eog_events</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">/</span> <span class="n">raw</span><span class="o">.</span><span class="n">info</span><span class="p">[</span><span class="s1">&#39;sfreq&#39;</span><span class="p">]</span> <span class="o">-</span> <span class="mf">0.25</span>
<span class="n">duration</span> <span class="o">=</span> <a href="https://www.numpy.org/devdocs/reference/generated/numpy.repeat.html#numpy.repeat" title="View documentation for numpy.repeat"><span class="n">np</span><span class="o">.</span><span class="n">repeat</span></a><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">n_blinks</span><span class="p">)</span>
<span class="n">description</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;bad blink&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="n">n_blinks</span>
<span class="n">annot</span> <span class="o">=</span> <a href="../generated/mne.Annotations.html#mne.Annotations" title="View documentation for mne.Annotations"><span class="n">mne</span><span class="o">.</span><span class="n">Annotations</span></a><span class="p">(</span><span class="n">onset</span><span class="p">,</span> <span class="n">duration</span><span class="p">,</span> <span class="n">description</span><span class="p">,</span>
                        <span class="n">orig_time</span><span class="o">=</span><span class="n">raw</span><span class="o">.</span><span class="n">info</span><span class="p">[</span><span class="s1">&#39;meas_date&#39;</span><span class="p">])</span>
<span class="n">annotated_blink_raw</span><span class="o">.</span><span class="n">set_annotations</span><span class="p">(</span><span class="n">annot</span><span class="p">)</span>

<span class="c1"># plot the annotated raw</span>
<span class="n">annotated_blink_raw</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>
</div>
<img alt="../_images/sphx_glr_plot_object_annotations_002.png" class="sphx-glr-single-img" src="../_images/sphx_glr_plot_object_annotations_002.png" />
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>EOG channel index for this subject is: [375]
Filtering the data to remove DC offset to help distinguish blinks from saccades
Setting up band-pass filter from 2 - 45 Hz
Filter length of 8192 samples (13.639 sec) selected
Setting up band-pass filter from 1 - 10 Hz
Filter length of 8192 samples (13.639 sec) selected
Now detecting blinks and generating corresponding events
Number of EOG events detected : 46
</pre></div>
</div>
</div>
<div class="section" id="add-annotations-to-raw-objects">
<h2>Add <a class="reference internal" href="../glossary.html#term-annotations"><span class="xref std std-term">annotations</span></a> to <a class="reference internal" href="../glossary.html#term-raw"><span class="xref std std-term">raw</span></a> objects<a class="headerlink" href="#add-annotations-to-raw-objects" title="Permalink to this headline">¶</a></h2>
<p>An important element of <a class="reference internal" href="../generated/mne.Annotations.html#mne.Annotations" title="mne.Annotations"><code class="xref py py-class docutils literal notranslate"><span class="pre">Annotations</span></code></a> is
<code class="docutils literal notranslate"><span class="pre">orig_time</span></code> which is the time reference for the <code class="docutils literal notranslate"><span class="pre">onset</span></code>.
It is key to understand that when calling
<a class="reference internal" href="../generated/mne.io.Raw.html#mne.io.Raw.set_annotations" title="mne.io.Raw.set_annotations"><code class="xref py py-func docutils literal notranslate"><span class="pre">raw.set_annotations</span></code></a>, given
annotations are copied and transformed so that
<a class="reference internal" href="../generated/mne.Annotations.html#mne.Annotations" title="mne.Annotations"><code class="xref py py-class docutils literal notranslate"><span class="pre">raw.annotations.orig_time</span></code></a>
matches the recording time of the raw object.
Refer to the documentation of <a class="reference internal" href="../generated/mne.Annotations.html#mne.Annotations" title="mne.Annotations"><code class="xref py py-class docutils literal notranslate"><span class="pre">Annotations</span></code></a> to see
the expected behavior depending on <code class="docutils literal notranslate"><span class="pre">meas_date</span></code> and <code class="docutils literal notranslate"><span class="pre">orig_time</span></code>.
Where <code class="docutils literal notranslate"><span class="pre">meas_date</span></code> is the recording time stored in
<a class="reference internal" href="../generated/mne.Info.html#mne.Info" title="mne.Info"><code class="xref py py-class docutils literal notranslate"><span class="pre">Info</span></code></a>.
You can find more information about <a class="reference internal" href="../generated/mne.Info.html#mne.Info" title="mne.Info"><code class="xref py py-class docutils literal notranslate"><span class="pre">Info</span></code></a> in
<a class="reference internal" href="plot_info.html#sphx-glr-auto-tutorials-plot-info-py"><span class="std std-ref">The Info data structure</span></a>.</p>
<p>We’ll now manipulate some simulated annotations.
The first annotations has <code class="docutils literal notranslate"><span class="pre">orig_time</span></code> set to <code class="docutils literal notranslate"><span class="pre">None</span></code> while the
second is set to a chosen POSIX timestamp for illustration purposes.
Note that both annotations have different <code class="docutils literal notranslate"><span class="pre">onset</span></code> values.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create an annotation object with orig_time undefined (default)</span>
<span class="n">annot_none</span> <span class="o">=</span> <a href="../generated/mne.Annotations.html#mne.Annotations" title="View documentation for mne.Annotations"><span class="n">mne</span><span class="o">.</span><span class="n">Annotations</span></a><span class="p">(</span><span class="n">onset</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">9</span><span class="p">],</span> <span class="n">duration</span><span class="o">=</span><span class="p">[</span><span class="mf">0.5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
                             <span class="n">description</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;bar&#39;</span><span class="p">,</span> <span class="s1">&#39;foo&#39;</span><span class="p">],</span>
                             <span class="n">orig_time</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">annot_none</span><span class="p">)</span>

<span class="c1"># Create an annotation object with orig_time</span>
<span class="n">orig_time</span> <span class="o">=</span> <span class="s1">&#39;2002-12-03 19:01:31.676071&#39;</span>
<span class="n">annot_orig</span> <span class="o">=</span> <a href="../generated/mne.Annotations.html#mne.Annotations" title="View documentation for mne.Annotations"><span class="n">mne</span><span class="o">.</span><span class="n">Annotations</span></a><span class="p">(</span><span class="n">onset</span><span class="o">=</span><span class="p">[</span><span class="mi">22</span><span class="p">,</span> <span class="mi">24</span><span class="p">,</span> <span class="mi">31</span><span class="p">],</span> <span class="n">duration</span><span class="o">=</span><span class="p">[</span><span class="mf">0.5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
                             <span class="n">description</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;bar&#39;</span><span class="p">,</span> <span class="s1">&#39;foo&#39;</span><span class="p">],</span>
                             <span class="n">orig_time</span><span class="o">=</span><span class="n">orig_time</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">annot_orig</span><span class="p">)</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>&lt;Annotations  |  3 segments : foo (2), bar (1), orig_time : None&gt;
&lt;Annotations  |  3 segments : foo (2), bar (1), orig_time : 2002-12-03 19:01:31.676071&gt;
</pre></div>
</div>
<p>Now we create two raw objects and set each with different annotations.
Then we plot both raw objects to compare the annotations.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create two cropped copies of raw with the two previous annotations</span>
<span class="n">raw_a</span> <span class="o">=</span> <span class="n">raw</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span><span class="o">.</span><span class="n">crop</span><span class="p">(</span><span class="n">tmax</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span><span class="o">.</span><span class="n">set_annotations</span><span class="p">(</span><span class="n">annot_none</span><span class="p">)</span>
<span class="n">raw_b</span> <span class="o">=</span> <span class="n">raw</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span><span class="o">.</span><span class="n">crop</span><span class="p">(</span><span class="n">tmax</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span><span class="o">.</span><span class="n">set_annotations</span><span class="p">(</span><span class="n">annot_orig</span><span class="p">)</span>

<span class="c1"># Plot the raw objects</span>
<span class="n">raw_a</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
<span class="n">raw_b</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>
</div>
<ul class="sphx-glr-horizontal">
<li><img alt="../_images/sphx_glr_plot_object_annotations_003.png" class="sphx-glr-multi-img" src="../_images/sphx_glr_plot_object_annotations_003.png" />
</li>
<li><img alt="../_images/sphx_glr_plot_object_annotations_004.png" class="sphx-glr-multi-img" src="../_images/sphx_glr_plot_object_annotations_004.png" />
</li>
</ul>
<p>Note that although the <code class="docutils literal notranslate"><span class="pre">onset</span></code> values of both annotations were different,
due to complementary <code class="docutils literal notranslate"><span class="pre">orig_time</span></code> they are now identical. This is because
the first one (<code class="docutils literal notranslate"><span class="pre">annot_none</span></code>), once set in raw, adopted its <code class="docutils literal notranslate"><span class="pre">orig_time</span></code>.
The second one (<code class="docutils literal notranslate"><span class="pre">annot_orig</span></code>) already had an <code class="docutils literal notranslate"><span class="pre">orig_time</span></code>, so its
<code class="docutils literal notranslate"><span class="pre">orig_time</span></code> was changed to match the onset time of the raw. Changing an
already defined <code class="docutils literal notranslate"><span class="pre">orig_time</span></code> of annotations caused its <code class="docutils literal notranslate"><span class="pre">onset</span></code> to be
recalibrated with respect to the new <code class="docutils literal notranslate"><span class="pre">orig_time</span></code>. As a result both
annotations have now identical <code class="docutils literal notranslate"><span class="pre">onset</span></code> and identical <code class="docutils literal notranslate"><span class="pre">orig_time</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Show the annotations in the raw objects</span>
<span class="nb">print</span><span class="p">(</span><span class="n">raw_a</span><span class="o">.</span><span class="n">annotations</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">raw_b</span><span class="o">.</span><span class="n">annotations</span><span class="p">)</span>

<span class="c1"># Show that the onsets are the same</span>
<a href="https://www.numpy.org/devdocs/reference/generated/numpy.set_printoptions.html#numpy.set_printoptions" title="View documentation for numpy.set_printoptions"><span class="n">np</span><span class="o">.</span><span class="n">set_printoptions</span></a><span class="p">(</span><span class="n">precision</span><span class="o">=</span><span class="mi">6</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">raw_a</span><span class="o">.</span><span class="n">annotations</span><span class="o">.</span><span class="n">onset</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">raw_b</span><span class="o">.</span><span class="n">annotations</span><span class="o">.</span><span class="n">onset</span><span class="p">)</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>&lt;Annotations  |  3 segments : foo (2), bar (1), orig_time : 2002-12-03 19:01:10.720100&gt;
&lt;Annotations  |  3 segments : foo (2), bar (1), orig_time : 2002-12-03 19:01:10.720100&gt;
[42.955971 44.955971 51.955971]
[42.955971 44.955971 51.955971]
</pre></div>
</div>
<p>Notice again that for the case where <code class="docutils literal notranslate"><span class="pre">orig_time</span></code> is <code class="docutils literal notranslate"><span class="pre">None</span></code>,
it is assumed that the <code class="docutils literal notranslate"><span class="pre">orig_time</span></code> is the time of the first sample of data.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">raw_delta</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">/</span> <span class="n">raw</span><span class="o">.</span><span class="n">info</span><span class="p">[</span><span class="s1">&#39;sfreq&#39;</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;raw.first_sample is </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">raw</span><span class="o">.</span><span class="n">first_samp</span> <span class="o">*</span> <span class="n">raw_delta</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;annot_none.onset[0] is </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">annot_none</span><span class="o">.</span><span class="n">onset</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;raw_a.annotations.onset[0] is </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">raw_a</span><span class="o">.</span><span class="n">annotations</span><span class="o">.</span><span class="n">onset</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>raw.first_sample is 42.95597082905339
annot_none.onset[0] is 0.0
raw_a.annotations.onset[0] is 42.955970883369446
</pre></div>
</div>
</div>
<div class="section" id="valid-operations-in-mne-annotations">
<h2>Valid operations in <a class="reference internal" href="../generated/mne.Annotations.html#mne.Annotations" title="mne.Annotations"><code class="xref py py-class docutils literal notranslate"><span class="pre">mne.Annotations</span></code></a><a class="headerlink" href="#valid-operations-in-mne-annotations" title="Permalink to this headline">¶</a></h2>
<div class="section" id="concatenate">
<h3>Concatenate<a class="headerlink" href="#concatenate" title="Permalink to this headline">¶</a></h3>
<p>It is possible to concatenate two annotations with the + operator (just like
lists) if both share the same <code class="docutils literal notranslate"><span class="pre">orig_time</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">annot</span> <span class="o">=</span> <a href="../generated/mne.Annotations.html#mne.Annotations" title="View documentation for mne.Annotations"><span class="n">mne</span><span class="o">.</span><span class="n">Annotations</span></a><span class="p">(</span><span class="n">onset</span><span class="o">=</span><span class="p">[</span><span class="mi">10</span><span class="p">],</span> <span class="n">duration</span><span class="o">=</span><span class="p">[</span><span class="mf">0.5</span><span class="p">],</span>
                        <span class="n">description</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;foobar&#39;</span><span class="p">],</span>
                        <span class="n">orig_time</span><span class="o">=</span><span class="n">orig_time</span><span class="p">)</span>
<span class="n">annot</span> <span class="o">=</span> <span class="n">annot_orig</span> <span class="o">+</span> <span class="n">annot</span>  <span class="c1"># concatenation</span>
<span class="nb">print</span><span class="p">(</span><span class="n">annot</span><span class="p">)</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>&lt;Annotations  |  4 segments : foobar (1), foo (2), bar (1), orig_time : 2002-12-03 19:01:31.676071&gt;
</pre></div>
</div>
</div>
<div class="section" id="iterating-indexing-and-slicing-mne-annotations">
<h3>Iterating, Indexing and Slicing <a class="reference internal" href="../generated/mne.Annotations.html#mne.Annotations" title="mne.Annotations"><code class="xref py py-class docutils literal notranslate"><span class="pre">mne.Annotations</span></code></a><a class="headerlink" href="#iterating-indexing-and-slicing-mne-annotations" title="Permalink to this headline">¶</a></h3>
<p><a class="reference internal" href="../generated/mne.Annotations.html#mne.Annotations" title="mne.Annotations"><code class="xref py py-class docutils literal notranslate"><span class="pre">Annotations</span></code></a> supports iterating, indexing and slicing.
Iterating over <a class="reference internal" href="../generated/mne.Annotations.html#mne.Annotations" title="mne.Annotations"><code class="xref py py-class docutils literal notranslate"><span class="pre">Annotations</span></code></a> and indexing with an integer returns
a dictionary. While slicing returns a new <a class="reference internal" href="../generated/mne.Annotations.html#mne.Annotations" title="mne.Annotations"><code class="xref py py-class docutils literal notranslate"><span class="pre">Annotations</span></code></a> instance.</p>
<p>See the following examples and usages:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># difference between indexing and slicing a single element</span>
<span class="nb">print</span><span class="p">(</span><span class="n">annot</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>  <span class="c1"># indexing</span>
<span class="nb">print</span><span class="p">(</span><span class="n">annot</span><span class="p">[:</span><span class="mi">1</span><span class="p">])</span>  <span class="c1"># slicing</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>OrderedDict([(&#39;onset&#39;, 10.0), (&#39;duration&#39;, 0.5), (&#39;description&#39;, &#39;foobar&#39;), (&#39;orig_time&#39;, 1038942091.676071)])
&lt;Annotations  |  1 segment : foobar (1), orig_time : 2002-12-03 19:01:31.676071&gt;
</pre></div>
</div>
<p>How about iterations?</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">annot</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>  <span class="c1"># iterate on one element which is dictionary</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>onset 10.0
duration 0.5
description foobar
orig_time 1038942091.676071
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">my_annot</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">annot</span><span class="p">):</span>  <span class="c1"># iterate on the Annotations object</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;annot #</span><span class="si">{0}</span><span class="s1">: onset=</span><span class="si">{1}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">idx</span><span class="p">,</span> <span class="n">my_annot</span><span class="p">[</span><span class="s1">&#39;onset&#39;</span><span class="p">]))</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;annot #</span><span class="si">{0}</span><span class="s1">: duration=</span><span class="si">{1}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">idx</span><span class="p">,</span> <span class="n">my_annot</span><span class="p">[</span><span class="s1">&#39;duration&#39;</span><span class="p">]))</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;annot #</span><span class="si">{0}</span><span class="s1">: description=</span><span class="si">{1}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">idx</span><span class="p">,</span> <span class="n">my_annot</span><span class="p">[</span><span class="s1">&#39;description&#39;</span><span class="p">]))</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>annot #0: onset=10.0
annot #0: duration=0.5
annot #0: description=foobar
annot #1: onset=22.0
annot #1: duration=0.5
annot #1: description=foo
annot #2: onset=24.0
annot #2: duration=4.0
annot #2: description=bar
annot #3: onset=31.0
annot #3: duration=0.0
annot #3: description=foo
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">my_annot</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">annot</span><span class="p">[:</span><span class="mi">1</span><span class="p">]):</span>
    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">my_annot</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;annot #</span><span class="si">{0}</span><span class="s1">: </span><span class="si">{1}</span><span class="s1"> = </span><span class="si">{2}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">idx</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span><span class="p">))</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>annot #0: onset = 10.0
annot #0: duration = 0.5
annot #0: description = foobar
annot #0: orig_time = 1038942091.676071
</pre></div>
</div>
<p>Iterating, indexing and slicing return a copy. This has implications like the
fact that changes are not kept.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># this change is not kept</span>
<span class="n">annot</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;onset&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">42</span>
<span class="nb">print</span><span class="p">(</span><span class="n">annot</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

<span class="c1"># this change is kept</span>
<span class="n">annot</span><span class="o">.</span><span class="n">onset</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">42</span>
<span class="nb">print</span><span class="p">(</span><span class="n">annot</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>OrderedDict([(&#39;onset&#39;, 10.0), (&#39;duration&#39;, 0.5), (&#39;description&#39;, &#39;foobar&#39;), (&#39;orig_time&#39;, 1038942091.676071)])
OrderedDict([(&#39;onset&#39;, 42.0), (&#39;duration&#39;, 0.5), (&#39;description&#39;, &#39;foobar&#39;), (&#39;orig_time&#39;, 1038942091.676071)])
</pre></div>
</div>
</div>
<div class="section" id="save">
<h3>Save<a class="headerlink" href="#save" title="Permalink to this headline">¶</a></h3>
<p>Note that you can also save annotations to disk in FIF format:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">annot</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s1">&#39;my-annot.fif&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Or as CSV with onsets in (absolute) ISO timestamps:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">annot</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s1">&#39;my-annot.csv&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Or in plain text with onsets relative to <code class="docutils literal notranslate"><span class="pre">orig_time</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">annot</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s1">&#39;my-annot.txt&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p class="sphx-glr-timing"><strong>Total running time of the script:</strong> ( 0 minutes  10.088 seconds)</p>
<p><strong>Estimated memory usage:</strong>  8 MB</p>
<div class="sphx-glr-footer class sphx-glr-footer-example docutils container" id="sphx-glr-download-auto-tutorials-plot-object-annotations-py">
<div class="sphx-glr-download docutils container">
<p><a class="reference download internal" download="" href="../_downloads/4ff6fcac5a260c59436ce417b66216d0/plot_object_annotations.py"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Python</span> <span class="pre">source</span> <span class="pre">code:</span> <span class="pre">plot_object_annotations.py</span></code></a></p>
</div>
<div class="sphx-glr-download docutils container">
<p><a class="reference download internal" download="" href="../_downloads/5aed7e184bbc15d957e5af18b0edfb7e/plot_object_annotations.ipynb"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Jupyter</span> <span class="pre">notebook:</span> <span class="pre">plot_object_annotations.ipynb</span></code></a></p>
</div>
</div>
<p class="sphx-glr-signature"><a class="reference external" href="https://sphinx-gallery.github.io">Gallery generated by Sphinx-Gallery</a></p>
</div>
</div>
</div>


    </div>
    
  </div>
</div>
<footer class="footer">
  <div class="container"><img src="../_static/institutions.png" alt="Institutions"></div>
  <div class="container">
    <ul class="list-inline">
      <li><a href="https://github.com/mne-tools/mne-python">GitHub</a></li>
      <li>·</li>
      <li><a href="https://mail.nmr.mgh.harvard.edu/mailman/listinfo/mne_analysis">Mailing list</a></li>
      <li>·</li>
      <li><a href="https://gitter.im/mne-tools/mne-python">Gitter</a></li>
      <li>·</li>
      <li><a href="whats_new.html">What's new</a></li>
      <li>·</li>
      <li><a href="faq.html#cite">Cite MNE</a></li>
      <li class="pull-right"><a href="#">Back to top</a></li>
    </ul>
    <p>&copy; Copyright 2012-2019, MNE Developers. Last updated on 2019-04-11.</p>
  </div>
</footer>
  </body>
</html>